function sprintf(){var t=sprintf.arguments,e=t.length;if(0==e)return"";for(var i,n,r,s,o="",a=t[0],l=a.length,d=1,h=i=0,c=0;c<l;c++){var u=a.charAt(c);switch(h){case 0:"%"==u?(u,h=1,s=""):o+=u;break;case 1:if("%"==u){o+=u,h=0;break}switch(e<=d&&(t[e++]=""),n=0,r=-1,u){case"-":i|=1,h=1;break;case"+":i|=2,h=1;break;case"0":i|=4,h=2;break;case" ":i|=8,h=1;break;case"#":i|=16,h=1;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=parseInt(u),h=2;break;case"-":i=1,h=2;break;case".":n="",r=0,h=3;break;case"d":o+=toInteger(t[d],i,n,r),d++,h=0;break;case"f":o+=toFloatingPoint(t[d],i,n,6),d++,h=0;break;case"e":o+=toExponential(t[d],i,n,6,"e"),d++,h=0;break;case"E":o+=toExponential(t[d],i,n,6,"E"),d++,h=0;break;case"s":o+=t[d],d++,h=0;break;default:o+=s+u,h=0}break;case 2:switch(u){case".":r=0,h=3;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=10*n+parseInt(u),h=2;break;case"d":o+=toInteger(t[d],i,n,r),d++,h=0;break;case"f":o+=toFloatingPoint(t[d],i,n,6),d++,h=0;break;case"e":o+=toExponential(t[d],i,n,6,"e"),d++,h=0;break;case"E":o+=toExponential(t[d],i,n,6,"E"),d++,h=0;break;case"s":o+=toFormatString(t[d],n,r),d++,h=0;break;default:o+=s+u,h=0}break;case 3:switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=10*r+parseInt(u);break;case"d":o+=toInteger(t[d],i,n,r),d++,h=0;break;case"f":o+=toFloatingPoint(t[d],i,n,r),d++,h=0;break;case"e":o+=toExponential(t[d],i,n,r,"e"),d++,h=0;break;case"E":o+=toExponential(t[d],i,n,r,"E"),d++,h=0;break;case"s":o+=toFormatString(t[d],n,r),d++,h=0;break;default:o+=s+u,h=0}break;default:return"error"}h&&(s+=u)}return o}function toInteger(t,e,i,n){"number"!=typeof t&&("string"==typeof t?(t=parseFloat(t),isNaN(t)&&(t=0)):t=0);var r=t.toString();if(-1<t&&t<1)r="0";else{t<0&&(r=r.substring(1));var s=r.indexOf("e");if(-1!=s){var o=parseInt(r.substring(s+2));for(-1==(a=r.indexOf("."))?(r=r.substring(0,s)+"000000000000000000000",o-=21):o-=(r=r.substring(0,a)+r.substring(a+1,s)+"00000").length-a;o;o--)r+="0"}else{var a;-1!=(a=r.indexOf("."))&&(r=r.substring(0,a))}}var l=r.length;if(l<n){for(var d="0",h=n-l;h;h--)r=d+r;l=n}return ProcFlag(r,e,i-l,0<=t)}function toFloatingPoint(t,e,i,n){"number"!=typeof t&&("string"==typeof t?(t=parseFloat(t),isNaN(t)&&(t=0)):t=0);var r=0<=t;return r||(t=-t),str=toFloatingPoint2(t,e,n),ProcFlag(str,e,i-str.length,r)}function toFloatingPoint2(t,e,i){var n=t.toString(),r=n.indexOf("e");if(-1!=r){var s=parseInt(n.substring(r+1));if(0<s){for(-1==(l=n.indexOf("."))?(n=n.substring(0,r)+"000000000000000000000",s-=21):s-=(n=n.charAt(0)+n.substring(2,r)+"00000").length-1;s;s--)n+="0"}else{var o=s+i;if(o<-1)n="0";else if(0<=o){for(-1!=(l=(n=n.substring(0,r)).indexOf("."))&&(n=n.charAt(0)+n.substring(2,r)),n="000000"+n,s+=7;s;s++)n="0"+n;n="0."+n}else{if(5<(h=parseFloat(n.substring(0,r)))){n="0.00000";for(var a=s+7;a;a++)n+="0";n+="1"}else n="0"}}}var l,d=n.length;if(-1!=(l=n.indexOf("."))){var h,c=d-l-1;if(i<c)if(5<(h=parseFloat(n.charAt(l+i+1)+"."+n.substring(l+i+2))))if(t<1){for(a=2;"0"==n.charAt(a);)a++;n=(h=(parseInt(n.substring(a,i+2))+1).toString()).length>i+2-a?2==a?"1."+h.substring(1):n.substring(0,a-1)+h:n.substring(0,a)+h}else n=(h=(parseInt(n.substring(0,l)+n.substring(l+1,l+i+1))+1).toString()).length>l+i?h.substring(0,l+1)+"."+h.substring(l+1):h.substring(0,l)+"."+h.substring(l);else n=n.substring(0,i?l+i+1:l);else if(c<i)for(a=i-c;a;a--)n+="0"}else if(i){n+=".0";for(a=i-1;a;a--)n+="0"}return n}function toExponential(t,e,i,n,r){"number"!=typeof t&&("string"==typeof t?(t=parseFloat(t),isNaN(t)&&(t=0)):t=0);var s=0<=t;s||(t=-t);var o,a=t.toString(),l=a.indexOf("."),d=a.indexOf("e"),h=((-1!=d)<<1)+(-1!=l);if(0==h)(o=a.length-1)&&(a=a.charAt(0)+"."+a.substring(l=1));else if(1==h)if(10<t)o=l-1,a=a.substring(0,1)+"."+a.substring(1,l)+a.substring(l+1),l=1;else if(1<t)o=0;else{for(var c=2;;c++)if("0"!=a.charAt(c)){o=1-c,a=a.charAt(c)+"."+a.substring(c+1);break}l=1}else o=parseInt(a.substring(d+1)),a=a.substring(0,d);return a=toFloatingPoint2(parseFloat(a),e,n),a=ProcFlag(a+=0<=o?r+(o<10?"+0":"+")+o:r+(-10<o?"-0"+-o:o),e,i-a.length,s)}function toFormatString(t,e,i){"string"!=typeof t&&(t=t.toString());var n=t.length;if(0<=i&&i<n&&(t=t.substring(0,i),n=i),n<e)for(var r=" ",s=e-n;s;s--)t=r+t;return t}function ProcFlag(t,e,i,n){var r=1&e,s=2&e,o=8&e;if(o&&i--,i-=0<!n+s,0<(4&e)&&!r){if(0<i)for(var a="0",l=i;l;l--)t=a+t;n?s&&(t="+"+t):t="-"+t}else{n?s&&(t="+"+t):t="-"+t;a=" ";if(0<i){a=" ";if(r)for(l=i;l;l--)t+=a;else for(l=i;l;l--)t=a+t}}return o&&(t=" "+t),t}function Gws_Category_Navi(t){this.el=$(t)}function Gws_Tab(){}function Gws_Bookmark(){this.bookmarkId=null,this.defaultName=null,this.url=null,this.model=null,this.el=$(".gws-bookmark"),this.bookmarkIcon="&#xE838;",this.unbookmarkIcon="&#xE83A;",this.loading=!1}function Gws_ReadableSetting(t){this.el=$(t)}function Gws_Contrast(t){this.opts=t,this.$el=$("#user-contrast-menu"),this.template="body * { color: :color !important; border-color: :color !important; background: :background !important; }",this.render()}function Gws_Schedule_CalendarTransition(t){t&&(this.date="calendar[date]="+t.date,this.path="calendar[path]="+t.path,this.view="calendar[view]="+t.view,this.format="calendar[viewFormat]="+t.viewFormat,this.todo="calendar[viewTodo]="+t.viewTodo,this.atendance="calendar[viewAttendance]="+t.viewAttendance,this.state=[this.date,this.view,this.path,this.format,this.todo,this.attendance].join("&"))}function Gws_Memo_Folder(){}function Gws_Memo_Filter(){}function Gws_Portal(t,e){options={autogenerate_stylesheet:!0,resize:{enabled:!0,max_size:[4,10]},widget_base_dimensions:["auto",120],widget_margins:[10,10],min_cols:1,max_cols:4},e&&e.readonly&&(this.readonly=!0,options.resize={enabled:!1},options.draggable={enabled:!1,handle:"disable"}),this.el=$(t),this.gs=this.el.find("ul.portlets").gridster(options).data("gridster")}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function d(){return Tn.apply(null,arguments)}function t(t){Tn=t}function o(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function a(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function l(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function s(t){return void 0===t}function h(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function r(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function i(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t,e){for(var i in e)c(e,i)&&(t[i]=e[i]);return c(e,"toString")&&(t.toString=e.toString),c(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e,i,n){return xe(t,e,i,n,!0).utc()}function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(t){return null==t._pf&&(t._pf=e()),t._pf}function g(t){if(null==t._isValid){var e=f(t),i=kn.call(e.parsedDateParts,function(t){return null!=t}),n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&e.bigHour===undefined),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function n(t){var e=p(NaN);return null!=t?u(f(e),t):f(e).userInvalidated=!0,e}function m(t,e){var i,n,r;if(s(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),s(e._i)||(t._i=e._i),s(e._f)||(t._f=e._f),s(e._l)||(t._l=e._l),s(e._strict)||(t._strict=e._strict),s(e._tzm)||(t._tzm=e._tzm),s(e._isUTC)||(t._isUTC=e._isUTC),s(e._offset)||(t._offset=e._offset),s(e._pf)||(t._pf=f(e)),s(e._locale)||(t._locale=e._locale),0<$n.length)for(i=0;i<$n.length;i++)s(r=e[n=$n[i]])||(t[n]=r);return t}function _(t){m(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Hn&&(Hn=!0,d.updateOffset(this),Hn=!1)}function v(t){return t instanceof _||null!=t&&null!=t._isAMomentObject}function y(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function w(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=y(e)),i}function b(t,e,i){var n,r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),o=0;for(n=0;n<r;n++)(i&&t[n]!==e[n]||!i&&w(t[n])!==w(e[n]))&&o++;return o+s}function S(t){!1===d.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function C(s,o){var a=!0;return u(function(t){if(null!=d.deprecationHandler&&d.deprecationHandler(null,s),a){for(var e,i=[],n=0;n<arguments.length;n++){if(e="","object"==typeof arguments[n]){for(var r in e+="\n["+n+"] ",t)e+=r+": "+t[r]+", ";e=e.slice(0,-2)}else e=arguments[n];i.push(e)}S(s+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),a=!1}return o.apply(this,arguments)},o)}function x(t,e){null!=d.deprecationHandler&&d.deprecationHandler(t,e),Mn[t]||(S(e),Mn[t]=!0)}function D(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function E(t){var e,i;for(i in t)D(e=t[i])?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function T(t,e){var i,n=u({},t);for(i in e)c(e,i)&&(a(t[i])&&a(e[i])?(n[i]={},u(n[i],t[i]),u(n[i],e[i])):null!=e[i]?n[i]=e[i]:delete n[i]);for(i in t)c(t,i)&&!c(e,i)&&a(t[i])&&(n[i]=u({},n[i]));return n}function k(t){null!=t&&this.set(t)}function R(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return D(n)?n.call(e,i):n}function $(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function H(){return this._invalidDate}function M(t){return this._ordinal.replace("%d",t)}function z(t,e,i,n){var r=this._relativeTime[i];return D(r)?r(t,e,i,n):r.replace(/%d/i,t)}function I(t,e){var i=this._relativeTime[0<t?"future":"past"];return D(i)?i(e):i.replace(/%s/i,e)}function F(t,e){var i=t.toLowerCase();Pn[i]=Pn[i+"s"]=Pn[e]=t}function G(t){return"string"==typeof t?Pn[t]||Pn[t.toLowerCase()]:undefined}function Y(t){var e,i,n={};for(i in t)c(t,i)&&(e=G(i))&&(n[e]=t[i]);return n}function L(t,e){On[t]=e}function P(t){var e=[];for(var i in t)e.push({unit:i,priority:On[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}function O(t,e,i){var n=""+Math.abs(t),r=e-n.length;return(0<=t?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}function A(t,e,i,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),t&&(Vn[t]=r),e&&(Vn[e[0]]=function(){return O(r.apply(this,arguments),e[1],e[2])}),i&&(Vn[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function W(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function N(n){var t,r,s=n.match(An);for(t=0,r=s.length;t<r;t++)Vn[s[t]]?s[t]=Vn[s[t]]:s[t]=W(s[t]);return function(t){var e,i="";for(e=0;e<r;e++)i+=D(s[e])?s[e].call(t,n):s[e];return i}}function V(t,e){return t.isValid()?(e=B(e,t.localeData()),Nn[e]=Nn[e]||N(e),Nn[e](t)):t.localeData().invalidDate()}function B(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Wn.lastIndex=0;0<=n&&Wn.test(t);)t=t.replace(Wn,i),Wn.lastIndex=0,n-=1;return t}function j(t,e,i){lr[t]=D(e)?e:function(t){return t&&i?i:e}}function U(t,e){return c(lr,t)?lr[t](e._strict,e._locale):new RegExp(q(t))}function q(t){return Z(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,r){return e||i||n||r}))}function Z(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function X(t,i){var e,n=i;for("string"==typeof t&&(t=[t]),h(i)&&(n=function(t,e){e[i]=w(t)}),e=0;e<t.length;e++)dr[t[e]]=n}function Q(t,r){X(t,function(t,e,i,n){i._w=i._w||{},r(t,i._w,i,n)})}function J(t,e,i){null!=e&&c(dr,t)&&dr[t](e,i._a,i,t)}function K(t){return tt(t)?366:365}function tt(t){return t%4==0&&t%100!=0||t%400==0}function et(){return tt(this.year())}function it(e,i){return function(t){return null!=t?(rt(this,e,t),d.updateOffset(this,i),this):nt(this,e)}}function nt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function rt(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&tt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),lt(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function st(t){return D(this[t=G(t)])?this[t]():this}function ot(t,e){if("object"==typeof t)for(var i=P(t=Y(t)),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit]);else if(D(this[t=G(t)]))return this[t](e);return this}function at(t,e){return(t%e+e)%e}function lt(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=at(e,12);return t+=(e-i)/12,1===i?tt(t)?29:28:31-i%7%2}function dt(t,e){return t?o(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||br).test(e)?"format":"standalone"][t.month()]:o(this._months)?this._months:this._months.standalone}function ht(t,e){return t?o(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[br.test(e)?"format":"standalone"][t.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ct(t,e,i){var n,r,s,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)s=p([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return i?"MMM"===e?-1!==(r=yr.call(this._shortMonthsParse,o))?r:null:-1!==(r=yr.call(this._longMonthsParse,o))?r:null:"MMM"===e?-1!==(r=yr.call(this._shortMonthsParse,o))?r:-1!==(r=yr.call(this._longMonthsParse,o))?r:null:-1!==(r=yr.call(this._longMonthsParse,o))?r:-1!==(r=yr.call(this._shortMonthsParse,o))?r:null}function ut(t,e,i){var n,r,s;if(this._monthsParseExact)return ct.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(r=p([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function pt(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=w(e);else if(!h(e=t.localeData().monthsParse(e)))return t;return i=Math.min(t.date(),lt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function ft(t){return null!=t?(pt(this,t),d.updateOffset(this,!0),this):nt(this,"Month")}function gt(){return lt(this.year(),this.month())}function mt(t){return this._monthsParseExact?(c(this,"_monthsRegex")||vt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=xr),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function _t(t){return this._monthsParseExact?(c(this,"_monthsRegex")||vt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Dr),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function vt(){function t(t,e){return e.length-t.length}var e,i,n=[],r=[],s=[];for(e=0;e<12;e++)i=p([2e3,e]),n.push(this.monthsShort(i,"")),r.push(this.months(i,"")),s.push(this.months(i,"")),s.push(this.monthsShort(i,""));for(n.sort(t),r.sort(t),s.sort(t),e=0;e<12;e++)n[e]=Z(n[e]),r[e]=Z(r[e]);for(e=0;e<24;e++)s[e]=Z(s[e]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function yt(t,e,i,n,r,s,o){var a=new Date(t,e,i,n,r,s,o);return t<100&&0<=t&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function wt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&0<=t&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function bt(t,e,i){var n=7+e-i;return-((7+wt(t,0,n).getUTCDay()-e)%7)+n-1}function St(t,e,i,n,r){var s,o,a=1+7*(e-1)+(7+i-n)%7+bt(t,n,r);return a<=0?o=K(s=t-1)+a:a>K(t)?(s=t+1,o=a-K(t)):(s=t,o=a),{year:s,dayOfYear:o}}function Ct(t,e,i){var n,r,s=bt(t.year(),e,i),o=Math.floor((t.dayOfYear()-s-1)/7)+1;return o<1?n=o+xt(r=t.year()-1,e,i):o>xt(t.year(),e,i)?(n=o-xt(t.year(),e,i),r=t.year()+1):(r=t.year(),n=o),{week:n,year:r}}function xt(t,e,i){var n=bt(t,e,i),r=bt(t+1,e,i);return(K(t)-n+r)/7}function Dt(t){return Ct(t,this._week.dow,this._week.doy).week}function Et(){return this._week.dow}function Tt(){return this._week.doy}function kt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Rt(t){var e=Ct(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function $t(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}function Ht(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Mt(t,e){return t?o(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:o(this._weekdays)?this._weekdays:this._weekdays.standalone}function zt(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function It(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Ft(t,e,i){var n,r,s,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)s=p([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return i?"dddd"===e?-1!==(r=yr.call(this._weekdaysParse,o))?r:null:"ddd"===e?-1!==(r=yr.call(this._shortWeekdaysParse,o))?r:null:-1!==(r=yr.call(this._minWeekdaysParse,o))?r:null:"dddd"===e?-1!==(r=yr.call(this._weekdaysParse,o))?r:-1!==(r=yr.call(this._shortWeekdaysParse,o))?r:-1!==(r=yr.call(this._minWeekdaysParse,o))?r:null:"ddd"===e?-1!==(r=yr.call(this._shortWeekdaysParse,o))?r:-1!==(r=yr.call(this._weekdaysParse,o))?r:-1!==(r=yr.call(this._minWeekdaysParse,o))?r:null:-1!==(r=yr.call(this._minWeekdaysParse,o))?r:-1!==(r=yr.call(this._weekdaysParse,o))?r:-1!==(r=yr.call(this._shortWeekdaysParse,o))?r:null}function Gt(t,e,i){var n,r,s;if(this._weekdaysParseExact)return Ft.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=p([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(s.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function Yt(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=$t(t,this.localeData()),this.add(t-e,"d")):e}function Lt(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Pt(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Ht(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Ot(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Nt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=$r),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function At(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Nt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Hr),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Wt(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Nt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Mr),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Nt(){function t(t,e){return e.length-t.length}var e,i,n,r,s,o=[],a=[],l=[],d=[];for(e=0;e<7;e++)i=p([2e3,1]).day(e),n=this.weekdaysMin(i,""),r=this.weekdaysShort(i,""),s=this.weekdays(i,""),o.push(n),a.push(r),l.push(s),d.push(n),d.push(r),d.push(s);for(o.sort(t),a.sort(t),l.sort(t),d.sort(t),e=0;e<7;e++)a[e]=Z(a[e]),l[e]=Z(l[e]),d[e]=Z(d[e]);this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Vt(){return this.hours()%12||12}function Bt(){return this.hours()||24}function jt(t,e){A(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ut(t,e){return e._meridiemParse}function qt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Zt(t,e,i){return 11<t?i?"pm":"PM":i?"am":"AM"}function Xt(t){return t?t.toLowerCase().replace("_","-"):t}function Qt(t){for(var e,i,n,r,s=0;s<t.length;){for(e=(r=Xt(t[s]).split("-")).length,i=(i=Xt(t[s+1]))?i.split("-"):null;0<e;){if(n=Jt(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&b(r,i,!0)>=e-1)break;e--}s++}return null}function Jt(t){var e=null;if(!Yr[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=zr._abbr,require("./locale/"+t),Kt(e)}catch(i){}return Yr[t]}function Kt(t,e){var i;return t&&(i=s(e)?ie(t):te(t,e))&&(zr=i),zr._abbr}function te(t,e){if(null!==e){var i=Gr;if(e.abbr=t,null!=Yr[t])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Yr[t]._config;else if(null!=e.parentLocale){if(null==Yr[e.parentLocale])return Lr[e.parentLocale]||(Lr[e.parentLocale]=[]),Lr[e.parentLocale].push({name:t,config:e}),null;i=Yr[e.parentLocale]._config}return Yr[t]=new k(T(i,e)),Lr[t]&&Lr[t].forEach(function(t){te(t.name,t.config)}),Kt(t),Yr[t]}return delete Yr[t],null}function ee(t,e){if(null!=e){var i,n,r=Gr;null!=(n=Jt(t))&&(r=n._config),(i=new k(e=T(r,e))).parentLocale=Yr[t],Yr[t]=i,Kt(t)}else null!=Yr[t]&&(null!=Yr[t].parentLocale?Yr[t]=Yr[t].parentLocale:null!=Yr[t]&&delete Yr[t]);return Yr[t]}function ie(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return zr;if(!o(t)){if(e=Jt(t))return e;t=[t]}return Qt(t)}function ne(){return Rn(Yr)}function re(t){var e,i=t._a;return i&&-2===f(t).overflow&&(e=i[cr]<0||11<i[cr]?cr:i[ur]<1||i[ur]>lt(i[hr],i[cr])?ur:i[pr]<0||24<i[pr]||24===i[pr]&&(0!==i[fr]||0!==i[gr]||0!==i[mr])?pr:i[fr]<0||59<i[fr]?fr:i[gr]<0||59<i[gr]?gr:i[mr]<0||999<i[mr]?mr:-1,f(t)._overflowDayOfYear&&(e<hr||ur<e)&&(e=ur),f(t)._overflowWeeks&&-1===e&&(e=_r),f(t)._overflowWeekday&&-1===e&&(e=vr),f(t).overflow=e),t}function se(t,e,i){return null!=t?t:null!=e?e:i}function oe(t){var e=new Date(d.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function ae(t){var e,i,n,r,s,o=[];if(!t._d){for(n=oe(t),t._w&&null==t._a[ur]&&null==t._a[cr]&&le(t),null!=t._dayOfYear&&(s=se(t._a[hr],n[hr]),(t._dayOfYear>K(s)||0===t._dayOfYear)&&(f(t)._overflowDayOfYear=!0),i=wt(s,0,t._dayOfYear),t._a[cr]=i.getUTCMonth(),t._a[ur]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=o[e]=n[e];for(;e<7;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[pr]&&0===t._a[fr]&&0===t._a[gr]&&0===t._a[mr]&&(t._nextDay=!0,t._a[pr]=0),t._d=(t._useUTC?wt:yt).apply(null,o),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[pr]=24),t._w&&"undefined"!=typeof t._w.d&&t._w.d!==r&&(f(t).weekdayMismatch=!0)}}function le(t){var e,i,n,r,s,o,a,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)s=1,o=4,i=se(e.GG,t._a[hr],Ct(De(),1,4).year),n=se(e.W,1),((r=se(e.E,1))<1||7<r)&&(l=!0);else{s=t._locale._week.dow,o=t._locale._week.doy;var d=Ct(De(),s,o);i=se(e.gg,t._a[hr],d.year),n=se(e.w,d.week),null!=e.d?((r=e.d)<0||6<r)&&(l=!0):null!=e.e?(r=e.e+s,(e.e<0||6<e.e)&&(l=!0)):r=s}n<1||n>xt(i,s,o)?f(t)._overflowWeeks=!0:null!=l?f(t)._overflowWeekday=!0:(a=St(i,n,r,s,o),t._a[hr]=a.year,t._dayOfYear=a.dayOfYear)}function de(t){var e,i,n,r,s,o,a=t._i,l=Pr.exec(a)||Or.exec(a);if(l){for(f(t).iso=!0,e=0,i=Wr.length;e<i;e++)if(Wr[e][1].exec(l[1])){r=Wr[e][0],n=!1!==Wr[e][2];break}if(null==r)return void(t._isValid=!1);if(l[3]){for(e=0,i=Nr.length;e<i;e++)if(Nr[e][1].exec(l[3])){s=(l[2]||" ")+Nr[e][0];break}if(null==s)return void(t._isValid=!1)}if(!n&&null!=s)return void(t._isValid=!1);if(l[4]){if(!Ar.exec(l[4]))return void(t._isValid=!1);o="Z"}t._f=r+(s||"")+(o||""),_e(t)}else t._isValid=!1}function he(t,e,i,n,r,s){var o=[ce(t),Cr.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(r,10)];return s&&o.push(parseInt(s,10)),o}function ce(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function ue(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function pe(t,e,i){if(t&&kr.indexOf(t)!==new Date(e[0],e[1],e[2]).getDay())return f(i).weekdayMismatch=!0,i._isValid=!1;return!0}function fe(t,e,i){if(t)return jr[t];if(e)return 0;var n=parseInt(i,10),r=n%100;return 60*((n-r)/100)+r}function ge(t){var e=Br.exec(ue(t._i));if(e){var i=he(e[4],e[3],e[2],e[5],e[6],e[7]);if(!pe(e[1],i,t))return;t._a=i,t._tzm=fe(e[8],e[9],e[10]),t._d=wt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),f(t).rfc2822=!0}else t._isValid=!1}function me(t){var e=Vr.exec(t._i);null===e?(de(t),!1===t._isValid&&(delete t._isValid,ge(t),!1===t._isValid&&(delete t._isValid,d.createFromInputFallback(t)))):t._d=new Date(+e[1])}function _e(t){if(t._f!==d.ISO_8601)if(t._f!==d.RFC_2822){t._a=[],f(t).empty=!0;var e,i,n,r,s,o=""+t._i,a=o.length,l=0;for(n=B(t._f,t._locale).match(An)||[],e=0;e<n.length;e++)r=n[e],(i=(o.match(U(r,t))||[])[0])&&(0<(s=o.substr(0,o.indexOf(i))).length&&f(t).unusedInput.push(s),o=o.slice(o.indexOf(i)+i.length),l+=i.length),Vn[r]?(i?f(t).empty=!1:f(t).unusedTokens.push(r),J(r,i,t)):t._strict&&!i&&f(t).unusedTokens.push(r);f(t).charsLeftOver=a-l,0<o.length&&f(t).unusedInput.push(o),t._a[pr]<=12&&!0===f(t).bigHour&&0<t._a[pr]&&(f(t).bigHour=undefined),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[pr]=ve(t._locale,t._a[pr],t._meridiem),ae(t),re(t)}else ge(t);else de(t)}function ve(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):(null!=t.isPM&&((n=t.isPM(i))&&e<12&&(e+=12),n||12!==e||(e=0)),e)}function ye(t){var e,i,n,r,s;if(0===t._f.length)return f(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)s=0,e=m({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],_e(e),g(e)&&(s+=f(e).charsLeftOver,s+=10*f(e).unusedTokens.length,f(e).score=s,(null==n||s<n)&&(n=s,i=e));u(t,i||e)}function we(t){if(!t._d){var e=Y(t._i);t._a=i([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),ae(t)}}function be(t){var e=new _(re(Se(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=undefined),e}function Se(t){var e=t._i,i=t._f;return t._locale=t._locale||ie(t._l),null===e||i===undefined&&""===e?n({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),v(e)?new _(re(e)):(r(e)?t._d=e:o(i)?ye(t):i?_e(t):Ce(t),g(t)||(t._d=null),t))}function Ce(t){var e=t._i;s(e)?t._d=new Date(d.now()):r(e)?t._d=new Date(e.valueOf()):"string"==typeof e?me(t):o(e)?(t._a=i(e.slice(0),function(t){return parseInt(t,10)}),ae(t)):a(e)?we(t):h(e)?t._d=new Date(e):d.createFromInputFallback(t)}function xe(t,e,i,n,r){var s={};return!0!==i&&!1!==i||(n=i,i=undefined),(a(t)&&l(t)||o(t)&&0===t.length)&&(t=undefined),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=i,s._i=t,s._f=e,s._strict=n,be(s)}function De(t,e,i,n){return xe(t,e,i,n,!1)}function Ee(t,e){var i,n;if(1===e.length&&o(e[0])&&(e=e[0]),!e.length)return De();for(i=e[0],n=1;n<e.length;++n)e[n].isValid()&&!e[n][t](i)||(i=e[n]);return i}function Te(){return Ee("isBefore",[].slice.call(arguments,0))}function ke(){return Ee("isAfter",[].slice.call(arguments,0))}function Re(t){for(var e in t)if(-1===yr.call(Xr,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<Xr.length;++n)if(t[Xr[n]]){if(i)return!1;parseFloat(t[Xr[n]])!==w(t[Xr[n]])&&(i=!0)}return!0}function $e(){return this._isValid}function He(){return Xe(NaN)}function Me(t){var e=Y(t),i=e.year||0,n=e.quarter||0,r=e.month||0,s=e.week||0,o=e.day||0,a=e.hour||0,l=e.minute||0,d=e.second||0,h=e.millisecond||0;this._isValid=Re(e),this._milliseconds=+h+1e3*d+6e4*l+1e3*a*60*60,this._days=+o+7*s,this._months=+r+3*n+12*i,this._data={},this._locale=ie(),this._bubble()}function ze(t){return t instanceof Me}function Ie(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Fe(t,i){A(t,0,0,function(){var t=this.utcOffset(),e="+";return t<0&&(t=-t,e="-"),e+O(~~(t/60),2)+i+O(~~t%60,2)})}function Ge(t,e){var i=(e||"").match(t);if(null===i)return null;var n=((i[i.length-1]||[])+"").match(Qr)||["-",0,0],r=60*n[1]+w(n[2]);return 0===r?0:"+"===n[0]?r:-r}function Ye(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(v(t)||r(t)?t.valueOf():De(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),d.updateOffset(i,!1),i):De(t).local()}function Le(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Pe(t,e,i){var n,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Ge(sr,t)))return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&e&&(n=Le(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==t&&(!e||this._changeInProgress?ei(this,Xe(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,d.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:Le(this)}function Oe(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ae(t){return this.utcOffset(0,t)}function We(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Le(this),"m")),this}function Ne(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ge(rr,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Ve(t){return!!this.isValid()&&(t=t?De(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function Be(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function je(){if(!s(this._isDSTShifted))return this._isDSTShifted;var t={};if(m(t,this),(t=Se(t))._a){var e=t._isUTC?p(t._a):De(t._a);this._isDSTShifted=this.isValid()&&0<b(t._a,e.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted}function Ue(){return!!this.isValid()&&!this._isUTC}function qe(){return!!this.isValid()&&this._isUTC}function Ze(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Xe(t,e){var i,n,r,s=t,o=null;return ze(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:h(t)?(s={},e?s[e]=t:s.milliseconds=t):(o=Jr.exec(t))?(i="-"===o[1]?-1:1,s={y:0,d:w(o[ur])*i,h:w(o[pr])*i,m:w(o[fr])*i,s:w(o[gr])*i,ms:w(Ie(1e3*o[mr]))*i}):(o=Kr.exec(t))?(i="-"===o[1]?-1:(o[1],1),s={y:Qe(o[2],i),M:Qe(o[3],i),w:Qe(o[4],i),d:Qe(o[5],i),h:Qe(o[6],i),m:Qe(o[7],i),s:Qe(o[8],i)}
):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(r=Ke(De(s.from),De(s.to)),(s={}).ms=r.milliseconds,s.M=r.months),n=new Me(s),ze(t)&&c(t,"_locale")&&(n._locale=t._locale),n}function Qe(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Je(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Ke(t,e){var i;return t.isValid()&&e.isValid()?(e=Ye(e,t),t.isBefore(e)?i=Je(t,e):((i=Je(e,t)).milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function ti(n,r){return function(t,e){var i;return null===e||isNaN(+e)||(x(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=t,t=e,e=i),ei(this,Xe(t="string"==typeof t?+t:t,e),n),this}}function ei(t,e,i,n){var r=e._milliseconds,s=Ie(e._days),o=Ie(e._months);t.isValid()&&(n=null==n||n,o&&pt(t,nt(t,"Month")+o*i),s&&rt(t,"Date",nt(t,"Date")+s*i),r&&t._d.setTime(t._d.valueOf()+r*i),n&&d.updateOffset(t,s||o))}function ii(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function ni(t,e){var i=t||De(),n=Ye(i,this).startOf("day"),r=d.calendarFormat(this,n)||"sameElse",s=e&&(D(e[r])?e[r].call(this,i):e[r]);return this.format(s||this.localeData().calendar(r,this,De(i)))}function ri(){return new _(this)}function si(t,e){var i=v(t)?t:De(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=G(s(e)?"millisecond":e))?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())}function oi(t,e){var i=v(t)?t:De(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=G(s(e)?"millisecond":e))?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())}function ai(t,e,i,n){return("("===(n=n||"()")[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))}function li(t,e){var i,n=v(t)?t:De(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=G(e||"millisecond"))?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))}function di(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function hi(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function ci(t,e,i){var n,r,s;if(!this.isValid())return NaN;if(!(n=Ye(t,this)).isValid())return NaN;switch(r=6e4*(n.utcOffset()-this.utcOffset()),e=G(e)){case"year":s=ui(this,n)/12;break;case"month":s=ui(this,n);break;case"quarter":s=ui(this,n)/3;break;case"second":s=(this-n)/1e3;break;case"minute":s=(this-n)/6e4;break;case"hour":s=(this-n)/36e5;break;case"day":s=(this-n-r)/864e5;break;case"week":s=(this-n-r)/6048e5;break;default:s=this-n}return i?s:y(s)}function ui(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(i,"months");return-(i+(e-n<0?(e-n)/(n-t.clone().add(i-1,"months")):(e-n)/(t.clone().add(i+1,"months")-n)))||0}function pi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fi(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||9999<i.year()?V(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this._d.valueOf()).toISOString().replace("Z",V(i,"Z")):V(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function gi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",s=e+'[")]';return this.format(i+n+r+s)}function mi(t){t||(t=this.isUtc()?d.defaultFormatUtc:d.defaultFormat);var e=V(this,t);return this.localeData().postformat(e)}function _i(t,e){return this.isValid()&&(v(t)&&t.isValid()||De(t).isValid())?Xe({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function vi(t){return this.from(De(),t)}function yi(t,e){return this.isValid()&&(v(t)&&t.isValid()||De(t).isValid())?Xe({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function wi(t){return this.to(De(),t)}function bi(t){var e;return t===undefined?this._locale._abbr:(null!=(e=ie(t))&&(this._locale=e),this)}function Si(){return this._locale}function Ci(t){switch(t=G(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function xi(t){return(t=G(t))===undefined||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function Di(){return this._d.valueOf()-6e4*(this._offset||0)}function Ei(){return Math.floor(this.valueOf()/1e3)}function Ti(){return new Date(this.valueOf())}function ki(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Ri(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function $i(){return this.isValid()?this.toISOString():null}function Hi(){return g(this)}function Mi(){return u({},f(this))}function zi(){return f(this).overflow}function Ii(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Fi(t,e){A(0,[t,t.length],0,e)}function Gi(t){return Oi.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Yi(t){return Oi.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Li(){return xt(this.year(),1,4)}function Pi(){var t=this.localeData()._week;return xt(this.year(),t.dow,t.doy)}function Oi(t,e,i,n,r){var s;return null==t?Ct(this,n,r).year:((s=xt(t,n,r))<e&&(e=s),Ai.call(this,t,e,i,n,r))}function Ai(t,e,i,n,r){var s=St(t,e,i,n,r),o=wt(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Wi(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Ni(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Vi(t,e){e[mr]=w(1e3*("0."+t))}function Bi(){return this._isUTC?"UTC":""}function ji(){return this._isUTC?"Coordinated Universal Time":""}function Ui(t){return De(1e3*t)}function qi(){return De.apply(null,arguments).parseZone()}function Zi(t){return t}function Xi(t,e,i,n){var r=ie(),s=p().set(n,e);return r[i](s,t)}function Qi(t,e,i){if(h(t)&&(e=t,t=undefined),t=t||"",null!=e)return Xi(t,e,i,"month");var n,r=[];for(n=0;n<12;n++)r[n]=Xi(t,n,i,"month");return r}function Ji(t,e,i,n){"boolean"==typeof t?h(e)&&(i=e,e=undefined):(e=t,t=!1,h(i=e)&&(i=e,e=undefined)),e=e||"";var r,s=ie(),o=t?s._week.dow:0;if(null!=i)return Xi(e,(i+o)%7,n,"day");var a=[];for(r=0;r<7;r++)a[r]=Xi(e,(r+o)%7,n,"day");return a}function Ki(t,e){return Qi(t,e,"months")}function tn(t,e){return Qi(t,e,"monthsShort")}function en(t,e,i){return Ji(t,e,i,"weekdays")}function nn(t,e,i){return Ji(t,e,i,"weekdaysShort")}function rn(t,e,i){return Ji(t,e,i,"weekdaysMin")}function sn(){var t=this._data;return this._milliseconds=hs(this._milliseconds),this._days=hs(this._days),this._months=hs(this._months),t.milliseconds=hs(t.milliseconds),t.seconds=hs(t.seconds),t.minutes=hs(t.minutes),t.hours=hs(t.hours),t.months=hs(t.months),t.years=hs(t.years),this}function on(t,e,i,n){var r=Xe(e,i);return t._milliseconds+=n*r._milliseconds,t._days+=n*r._days,t._months+=n*r._months,t._bubble()}function an(t,e){return on(this,t,e,1)}function ln(t,e){return on(this,t,e,-1)}function dn(t){return t<0?Math.floor(t):Math.ceil(t)}function hn(){var t,e,i,n,r,s=this._milliseconds,o=this._days,a=this._months,l=this._data;return 0<=s&&0<=o&&0<=a||s<=0&&o<=0&&a<=0||(s+=864e5*dn(un(a)+o),a=o=0),l.milliseconds=s%1e3,t=y(s/1e3),l.seconds=t%60,e=y(t/60),l.minutes=e%60,i=y(e/60),l.hours=i%24,a+=r=y(cn(o+=y(i/24))),o-=dn(un(r)),n=y(a/12),a%=12,l.days=o,l.months=a,l.years=n,this}function cn(t){return 4800*t/146097}function un(t){return 146097*t/4800}function pn(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=G(t))||"year"===t)return e=this._days+n/864e5,i=this._months+cn(e),"month"===t?i:i/12;switch(e=this._days+Math.round(un(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function fn(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN}function gn(t){return function(){return this.as(t)}}function mn(){return Xe(this)}function _n(t){return t=G(t),this.isValid()?this[t+"s"]():NaN}function vn(t){return function(){return this.isValid()?this._data[t]:NaN}}function yn(){return y(this.days()/7)}function wn(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}function bn(t,e,i){var n=Xe(t).abs(),r=Es(n.as("s")),s=Es(n.as("m")),o=Es(n.as("h")),a=Es(n.as("d")),l=Es(n.as("M")),d=Es(n.as("y")),h=r<=Ts.ss&&["s",r]||r<Ts.s&&["ss",r]||s<=1&&["m"]||s<Ts.m&&["mm",s]||o<=1&&["h"]||o<Ts.h&&["hh",o]||a<=1&&["d"]||a<Ts.d&&["dd",a]||l<=1&&["M"]||l<Ts.M&&["MM",l]||d<=1&&["y"]||["yy",d];return h[2]=e,h[3]=0<+t,h[4]=i,wn.apply(null,h)}function Sn(t){return t===undefined?Es:"function"==typeof t&&(Es=t,!0)}function Cn(t,e){return Ts[t]!==undefined&&(e===undefined?Ts[t]:(Ts[t]=e,"s"===t&&(Ts.ss=e-1),!0))}function xn(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=bn(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function Dn(t){return(0<t)-(t<0)||+t}function En(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i=ks(this._milliseconds)/1e3,n=ks(this._days),r=ks(this._months);e=y((t=y(i/60))/60),i%=60,t%=60;var s=y(r/12),o=r%=12,a=n,l=e,d=t,h=i?i.toFixed(3).replace(/\.?0+$/,""):"",c=this.asSeconds();if(!c)return"P0D";var u=c<0?"-":"",p=Dn(this._months)!==Dn(c)?"-":"",f=Dn(this._days)!==Dn(c)?"-":"",g=Dn(this._milliseconds)!==Dn(c)?"-":"";return u+"P"+(s?p+s+"Y":"")+(o?p+o+"M":"")+(a?f+a+"D":"")+(l||d||h?"T":"")+(l?g+l+"H":"")+(d?g+d+"M":"")+(h?g+h+"S":"")}var Tn,kn;kn=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var Rn,$n=d.momentProperties=[],Hn=!1,Mn={};d.suppressDeprecationWarnings=!1,d.deprecationHandler=null,Rn=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)c(t,e)&&i.push(e);return i};var zn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},In={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Fn="Invalid date",Gn="%d",Yn=/\d{1,2}/,Ln={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Pn={},On={},An=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Wn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Nn={},Vn={},Bn=/\d/,jn=/\d\d/,Un=/\d{3}/,qn=/\d{4}/,Zn=/[+-]?\d{6}/,Xn=/\d\d?/,Qn=/\d\d\d\d?/,Jn=/\d\d\d\d\d\d?/,Kn=/\d{1,3}/,tr=/\d{1,4}/,er=/[+-]?\d{1,6}/,ir=/\d+/,nr=/[+-]?\d+/,rr=/Z|[+-]\d\d:?\d\d/gi,sr=/Z|[+-]\d\d(?::?\d\d)?/gi,or=/[+-]?\d+(\.\d{1,3})?/,ar=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,lr={},dr={},hr=0,cr=1,ur=2,pr=3,fr=4,gr=5,mr=6,_r=7,vr=8;A("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),A(0,["YY",2],0,function(){return this.year()%100}),A(0,["YYYY",4],0,"year"),A(0,["YYYYY",5],0,"year"),A(0,["YYYYYY",6,!0],0,"year"),F("year","y"),L("year",1),j("Y",nr),j("YY",Xn,jn),j("YYYY",tr,qn),j("YYYYY",er,Zn),j("YYYYYY",er,Zn),X(["YYYYY","YYYYYY"],hr),X("YYYY",function(t,e){e[hr]=2===t.length?d.parseTwoDigitYear(t):w(t)}),X("YY",function(t,e){e[hr]=d.parseTwoDigitYear(t)}),X("Y",function(t,e){e[hr]=parseInt(t,10)}),d.parseTwoDigitYear=function(t){return w(t)+(68<w(t)?1900:2e3)};var yr,wr=it("FullYear",!0);yr=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},A("M",["MM",2],"Mo",function(){return this.month()+1}),A("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),A("MMMM",0,0,function(t){return this.localeData().months(this,t)}),F("month","M"),L("month",8),j("M",Xn),j("MM",Xn,jn),j("MMM",function(t,e){return e.monthsShortRegex(t)}),j("MMMM",function(t,e){return e.monthsRegex(t)}),X(["M","MM"],function(t,e){e[cr]=w(t)-1}),X(["MMM","MMMM"],function(t,e,i,n){var r=i._locale.monthsParse(t,n,i._strict);null!=r?e[cr]=r:f(i).invalidMonth=t});var br=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Sr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Cr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),xr=ar,Dr=ar;A("w",["ww",2],"wo","week"),A("W",["WW",2],"Wo","isoWeek"),F("week","w"),F("isoWeek","W"),L("week",5),L("isoWeek",5),j("w",Xn),j("ww",Xn,jn),j("W",Xn),j("WW",Xn,jn),Q(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=w(t)});var Er={dow:0,doy:6};A("d",0,"do","day"),A("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),A("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),A("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),A("e",0,0,"weekday"),A("E",0,0,"isoWeekday"),F("day","d"),F("weekday","e"),F("isoWeekday","E"),L("day",11),L("weekday",11),L("isoWeekday",11),j("d",Xn),j("e",Xn),j("E",Xn),j("dd",function(t,e){return e.weekdaysMinRegex(t)}),j("ddd",function(t,e){return e.weekdaysShortRegex(t)}),j("dddd",function(t,e){return e.weekdaysRegex(t)}),Q(["dd","ddd","dddd"],function(t,e,i,n){var r=i._locale.weekdaysParse(t,n,i._strict);null!=r?e.d=r:f(i).invalidWeekday=t}),Q(["d","e","E"],function(t,e,i,n){e[n]=w(t)});var Tr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),kr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Rr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),$r=ar,Hr=ar,Mr=ar;A("H",["HH",2],0,"hour"),A("h",["hh",2],0,Vt),A("k",["kk",2],0,Bt),A("hmm",0,0,function(){return""+Vt.apply(this)+O(this.minutes(),2)}),A("hmmss",0,0,function(){return""+Vt.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)}),A("Hmm",0,0,function(){return""+this.hours()+O(this.minutes(),2)}),A("Hmmss",0,0,function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)}),jt("a",!0),jt("A",!1),F("hour","h"),L("hour",13),j("a",Ut),j("A",Ut),j("H",Xn),j("h",Xn),j("k",Xn),j("HH",Xn,jn),j("hh",Xn,jn),j("kk",Xn,jn),j("hmm",Qn),j("hmmss",Jn),j("Hmm",Qn),j("Hmmss",Jn),X(["H","HH"],pr),X(["k","kk"],function(t,e){var i=w(t);e[pr]=24===i?0:i}),X(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),X(["h","hh"],function(t,e,i){e[pr]=w(t),f(i).bigHour=!0}),X("hmm",function(t,e,i){var n=t.length-2;e[pr]=w(t.substr(0,n)),e[fr]=w(t.substr(n)),f(i).bigHour=!0}),X("hmmss",function(t,e,i){var n=t.length-4,r=t.length-2;e[pr]=w(t.substr(0,n)),e[fr]=w(t.substr(n,2)),e[gr]=w(t.substr(r)),f(i).bigHour=!0}),X("Hmm",function(t,e){var i=t.length-2;e[pr]=w(t.substr(0,i)),e[fr]=w(t.substr(i))}),X("Hmmss",function(t,e){var i=t.length-4,n=t.length-2;e[pr]=w(t.substr(0,i)),e[fr]=w(t.substr(i,2)),e[gr]=w(t.substr(n))});var zr,Ir=/[ap]\.?m?\.?/i,Fr=it("Hours",!0),Gr={calendar:zn,longDateFormat:In,invalidDate:Fn,ordinal:Gn,dayOfMonthOrdinalParse:Yn,relativeTime:Ln,months:Sr,monthsShort:Cr,week:Er,weekdays:Tr,weekdaysMin:Rr,weekdaysShort:kr,meridiemParse:Ir},Yr={},Lr={},Pr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Or=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ar=/Z|[+-]\d\d(?::?\d\d)?/,Wr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Nr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Vr=/^\/?Date\((\-?\d+)/i,Br=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,jr={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};d.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),d.ISO_8601=function(){},d.RFC_2822=function(){};var Ur=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=De.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:n()}),qr=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=De.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:n()}),Zr=function(){return Date.now?Date.now():+new Date},Xr=["year","quarter","month","week","day","hour","minute","second","millisecond"];Fe("Z",":"),Fe("ZZ",""),j("Z",sr),j("ZZ",sr),X(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Ge(sr,t)});var Qr=/([\+\-]|\d\d)/gi;d.updateOffset=function(){};var Jr=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Kr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Xe.fn=Me.prototype,Xe.invalid=He;var ts=ti(1,"add"),es=ti(-1,"subtract");d.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",d.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var is=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===undefined?this.localeData():this.locale(t)});A(0,["gg",2],0,function(){return this.weekYear()%100}),A(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Fi("gggg","weekYear"),Fi("ggggg","weekYear"),Fi("GGGG","isoWeekYear"),Fi("GGGGG","isoWeekYear"),F("weekYear","gg"),F("isoWeekYear","GG"),L("weekYear",1),L("isoWeekYear",1),j("G",nr),j("g",nr),j("GG",Xn,jn),j("gg",Xn,jn),j("GGGG",tr,qn),j("gggg",tr,qn),j("GGGGG",er,Zn),j("ggggg",er,Zn),Q(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=w(t)}),Q(["gg","GG"],function(t,e,i,n){e[n]=d.parseTwoDigitYear(t)}),A("Q",0,"Qo","quarter"),F("quarter","Q"),L("quarter",7),j("Q",Bn),X("Q",function(t,e){e[cr]=3*(w(t)-1)}),A("D",["DD",2],"Do","date"),F("date","D"),L("date",9),j("D",Xn),j("DD",Xn,jn),j("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),X(["D","DD"],ur),X("Do",function(t,e){e[ur]=w(t.match(Xn)[0])});var ns=it("Date",!0);A("DDD",["DDDD",3],"DDDo","dayOfYear"),F("dayOfYear","DDD"),L("dayOfYear",4),j("DDD",Kn),j("DDDD",Un),X(["DDD","DDDD"],function(t,e,i){i._dayOfYear=w(t)}),A("m",["mm",2],0,"minute"),F("minute","m"),L("minute",14),j("m",Xn),j("mm",Xn,jn),X(["m","mm"],fr);var rs=it("Minutes",!1);A("s",["ss",2],0,"second"),F("second","s"),L("second",15),j("s",Xn),j("ss",Xn,jn),X(["s","ss"],gr);var ss,os=it("Seconds",!1);for(A("S",0,0,function(){return~~(this.millisecond()/100)}),A(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),A(0,["SSS",3],0,"millisecond"),A(0,["SSSS",4],0,function(){return 10*this.millisecond()}),A(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),A(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),A(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),A(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),A(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),F("millisecond","ms"),L("millisecond",16),j("S",Kn,Bn),j("SS",Kn,jn),j("SSS",Kn,Un),ss="SSSS";ss.length<=9;ss+="S")j(ss,ir);for(ss="S";ss.length<=9;ss+="S")X(ss,Vi);var as=it("Milliseconds",!1);A("z",0,0,"zoneAbbr"),A("zz",0,0,"zoneName");var ls=_.prototype;ls.add=ts,ls.calendar=ni,ls.clone=ri,ls.diff=ci,ls.endOf=xi,ls.format=mi,ls.from=_i,ls.fromNow=vi,ls.to=yi,ls.toNow=wi,ls.get=st,ls.invalidAt=zi,ls.isAfter=si,ls.isBefore=oi,ls.isBetween=ai,ls.isSame=li,ls.isSameOrAfter=di,ls.isSameOrBefore=hi,ls.isValid=Hi,ls.lang=is,ls.locale=bi,ls.localeData=Si,ls.max=qr,ls.min=Ur,ls.parsingFlags=Mi,ls.set=ot,ls.startOf=Ci,ls.subtract=es,ls.toArray=ki,ls.toObject=Ri,ls.toDate=Ti,ls.toISOString=fi,ls.inspect=gi,ls.toJSON=$i,ls.toString=pi,ls.unix=Ei,ls.valueOf=Di,ls.creationData=Ii,ls.year=wr,ls.isLeapYear=et,ls.weekYear=Gi,ls.isoWeekYear=Yi,ls.quarter=ls.quarters=Wi,ls.month=ft,ls.daysInMonth=gt,ls.week=ls.weeks=kt,ls.isoWeek=ls.isoWeeks=Rt,ls.weeksInYear=Pi,ls.isoWeeksInYear=Li,ls.date=ns,ls.day=ls.days=Yt,ls.weekday=Lt,ls.isoWeekday=Pt,ls.dayOfYear=Ni,ls.hour=ls.hours=Fr,ls.minute=ls.minutes=rs,ls.second=ls.seconds=os,ls.millisecond=ls.milliseconds=as,ls.utcOffset=Pe,ls.utc=Ae,ls.local=We,ls.parseZone=Ne,ls.hasAlignedHourOffset=Ve,ls.isDST=Be,ls.isLocal=Ue,ls.isUtcOffset=qe,ls.isUtc=Ze,ls.isUTC=Ze,ls.zoneAbbr=Bi,ls.zoneName=ji,ls.dates=C("dates accessor is deprecated. Use date instead.",ns),ls.months=C("months accessor is deprecated. Use month instead",ft),ls.years=C("years accessor is deprecated. Use year instead",wr),ls.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Oe),ls.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",je);var ds=k.prototype;ds.calendar=R,ds.longDateFormat=$,ds.invalidDate=H,ds.ordinal=M,ds.preparse=Zi,ds.postformat=Zi,ds.relativeTime=z,ds.pastFuture=I,ds.set=E,ds.months=dt,ds.monthsShort=ht,ds.monthsParse=ut,ds.monthsRegex=_t,ds.monthsShortRegex=mt,ds.week=Dt,ds.firstDayOfYear=Tt,ds.firstDayOfWeek=Et,ds.weekdays=Mt,ds.weekdaysMin=It,ds.weekdaysShort=zt,ds.weekdaysParse=Gt,ds.weekdaysRegex=Ot,ds.weekdaysShortRegex=At,ds.weekdaysMinRegex=Wt,ds.isPM=qt,ds.meridiem=Zt,Kt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===w(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),d.lang=C("moment.lang is deprecated. Use moment.locale instead.",Kt),d.langData=C("moment.langData is deprecated. Use moment.localeData instead.",ie);var hs=Math.abs,cs=gn("ms"),us=gn("s"),ps=gn("m"),fs=gn("h"),gs=gn("d"),ms=gn("w"),_s=gn("M"),vs=gn("y"),ys=vn("milliseconds"),ws=vn("seconds"),bs=vn("minutes"),Ss=vn("hours"),Cs=vn("days"),xs=vn("months"),Ds=vn("years"),Es=Math.round,Ts={ss:44,s:45,m:45,h:22,d:26,M:11},ks=Math.abs,Rs=Me.prototype;return Rs.isValid=$e,Rs.abs=sn,Rs.add=an,Rs.subtract=ln,Rs.as=pn,Rs.asMilliseconds=cs,Rs.asSeconds=us,Rs.asMinutes=ps,Rs.asHours=fs,Rs.asDays=gs,Rs.asWeeks=ms,Rs.asMonths=_s,Rs.asYears=vs,Rs.valueOf=fn,Rs._bubble=hn,Rs.clone=mn,Rs.get=_n,Rs.milliseconds=ys,Rs.seconds=ws,Rs.minutes=bs,Rs.hours=Ss,Rs.days=Cs,Rs.weeks=yn,Rs.months=xs,Rs.years=Ds,Rs.humanize=xn,Rs.toISOString=En,Rs.toString=En,Rs.toJSON=En,Rs.locale=bi,Rs.localeData=Si,Rs.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",En),Rs.lang=is,A("X",0,0,"unix"),A("x",0,0,"valueOf"),j("x",nr),j("X",or),X("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),X("x",function(t,e,i){i._d=new Date(w(t))}),d.version="2.20.1",t(De),d.fn=ls,d.min=Te,d.max=ke,d.now=Zr,d.utc=p,d.unix=Ui,d.months=Ki,d.isDate=r,d.locale=Kt,d.invalid=n,d.duration=Xe,d.isMoment=v,d.weekdays=en,d.parseZone=qi,d.localeData=ie,d.isDuration=ze,d.monthsShort=tn,d.weekdaysMin=rn,d.defineLocale=te,d.updateLocale=ee,d.locales=ne,d.weekdaysShort=nn,d.normalizeUnits=G,d.relativeTimeRounding=Sn,d.relativeTimeThreshold=Cn,d.calendarFormat=ii,d.prototype=ls,d.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},d}),function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("moment")):t(jQuery,moment)}(function(et,it){function h(t){return G(t,Nt)}function r(t){var n,r={views:t.views||{}};return et.each(t,function(i,t){"views"!=i&&(et.isPlainObject(t)&&!/(time|duration|interval)$/i.test(i)&&-1==et.inArray(i,Nt)?(n=null,et.each(t,function(t,e){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(t)?(r.views[t]||(r.views[t]={}),r.views[t][i]=e):(n||(n={}),n[t]=e)}),n&&(r[i]=n)):r[i]=t)}),r}function s(t,e){e.left&&t.css({"border-left-width":1,"margin-left":e.left-1}),e.right&&t.css({"border-right-width":1,"margin-right":e.right-1})}function o(t){t.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function p(){et("body").addClass("fc-not-allowed")}function f(){et("body").removeClass("fc-not-allowed")}function i(r,t,e){var s=Math.floor(t/r.length),o=Math.floor(t-s*(r.length-1)),a=[],l=[],d=[],h=0;n(r),r.each(function(t,e){var i=t===r.length-1?o:s,n=et(e).outerHeight(!0);n<i?(a.push(e),l.push(n),d.push(et(e).height())):h+=n}),e&&(t-=h,s=Math.floor(t/a.length),o=Math.floor(t-s*(a.length-1))),et(a).each(function(t,e){var i=t===a.length-1?o:s,n=l[t],r=i-(n-d[t]);n<i&&et(e).height(r)})}function n(t){t.height("")}function t(t){var n=0;return t.find("> span").each(function(t,e){var i=et(e).outerWidth();n<i&&(n=i)}),n++,t.width(n),n}function a(t,e){return t.height(e).addClass("fc-scroller"),t[0].scrollHeight-1>t[0].clientHeight||(l(t),!1)}function l(t){t.height("").removeClass("fc-scroller")}function c(t){var e=t.css("position"),i=t.parents().filter(function(){var t=et(this);return/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&i.length?i:et(t[0].ownerDocument||document)}function d(t){var e=t.offset();return{left:e.left,right:e.left+t.outerWidth(),top:e.top,bottom:e.top+t.outerHeight()}}function e(t){var e=t.offset(),i=g(t),n=e.left+v(t,"border-left-width")+i.left,r=e.top+v(t,"border-top-width")+i.top;return{left:n,right:n+t[0].clientWidth,top:r,bottom:r+t[0].clientHeight}}function u(t){var e=t.offset(),i=e.left+v(t,"border-left-width")+v(t,"padding-left"),n=e.top+v(t,"border-top-width")+v(t,"padding-top");return{left:i,right:i+t.width(),top:n,bottom:n+t.height()}}function g(t){var e=t.innerWidth()-t[0].clientWidth,i={left:0,right:0,top:0,bottom:t.innerHeight()-t[0].clientHeight};return m()&&"rtl"==t.css("direction")?i.left=e:i.right=e,i}function m(){return null===Vt&&(Vt=_()),Vt}function _(){var t=et("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),e=t.children().offset().left>t.offset().left;return t.remove(),e}function v(t,e){return parseFloat(t.css(e))||0}function y(t){return 1==t.which&&!t.ctrlKey}function w(t,e){var i={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return i.left<i.right&&i.top<i.bottom&&i}function b(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function S(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function C(t,e){return{left:t.left-e.left,top:t.top-e.top}}function x(t){var e,i,n=[],r=[];for("string"==typeof t?r=t.split(/\s*,\s*/):"function"==typeof t?r=[t]:et.isArray(t)&&(r=t),e=0;e<r.length;e++)"string"==typeof(i=r[e])?n.push("-"==i.charAt(0)?{field:i.substring(1),order:-1}:{field:i,order:1}):"function"==typeof i&&n.push({func:i});return n}function D(t,e,i){var n,r;for(n=0;n<i.length;n++)if(r=E(t,e,i[n]))return r;return 0}function E(t,e,i){return i.func?i.func(t,e):T(t[i.field],e[i.field])*(i.order||1)}function T(t,e){return t||e?null==e?-1:null==t?1:"string"===et.type(t)||"string"===et.type(e)?String(t).localeCompare(String(e)):t-e:0}function k(t,e){var i,n,r,s,o=t.start,a=t.end,l=e.start,d=e.end;if(l<a&&o<d)return l<=o?(i=o.clone(),r=!0):(i=l.clone(),r=!1),a<=d?(n=a.clone(),s=!0):(n=d.clone(),s=!1),{start:i,end:n,isStart:r,isEnd:s}}function O(t,e){return it.duration({days:t.clone().stripTime().diff(e.clone().stripTime(),"days"),ms:t.time()-e.time()})}function A(t,e){return it.duration({days:t.clone().stripTime().diff(e.clone().stripTime(),"days")})}function W(t,e,i){return it.duration(Math.round(t.diff(e,i,!0)),i)}function R(t,e){var i,n,r;for(i=0;i<jt.length&&!(1<=(r=$(n=jt[i],t,e))&&J(r));i++);return n}function $(t,e,i){return null!=i?i.diff(e,t,!0):it.isDuration(e)?e.as(t):e.end.diff(e.start,t,!0)}function H(t,e,i){var n;return I(i)?(e-t)/i:(n=i.asMonths(),1<=Math.abs(n)&&J(n)?e.diff(t,"months",!0)/n:e.diff(t,"days",!0)/i.asDays())}function M(t,e){var i,n;return I(t)||I(e)?t/e:(i=t.asMonths(),n=e.asMonths(),1<=Math.abs(i)&&J(i)&&1<=Math.abs(n)&&J(n)?i/n:t.asDays()/e.asDays())}function z(t,e){var i;return I(t)?it.duration(t*e):(i=t.asMonths(),1<=Math.abs(i)&&J(i)?it.duration({months:i*e}):it.duration({days:t.asDays()*e}))}function I(t){return Boolean(t.hours()||t.minutes()||t.seconds()||t.milliseconds())}function F(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function N(t){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(t)}function G(t,e){var i,n,r,s,o,a,l={};if(e)for(i=0;i<e.length;i++){for(n=e[i],r=[],s=t.length-1;0<=s;s--)if("object"==typeof(o=t[s][n]))r.unshift(o);else if(o!==undefined){l[n]=o;break}r.length&&(l[n]=G(r))}for(i=t.length-1;0<=i;i--)for(n in a=t[i])n in l||(l[n]=a[n]);return l}function nt(t){var e=function(){};return e.prototype=t,new e}function Y(t,e){for(var i in t)P(t,i)&&(e[i]=t[i])}function L(t,e){var i,n,r=["constructor","toString","valueOf"];for(i=0;i<r.length;i++)t[n=r[i]]!==Object.prototype[n]&&(e[n]=t[n])}function P(t,e){return Xt.call(t,e)}function V(t){return/undefined|null|boolean|number|string/.test(et.type(t))}function B(t,e,i){if(et.isFunction(t)&&(t=[t]),t){var n,r;for(n=0;n<t.length;n++)r=t[n].apply(e,i)||r;return r}}function j(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==undefined)return arguments[t]}function U(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function q(t){return t.replace(/&.*?;/g,"")}function Z(t){var i=[];return et.each(t,function(t,e){null!=e&&i.push(t+":"+e)}),i.join(";")}function X(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Q(t,e){return t-e}function J(t){return t%1==0}function K(t,e){var i=t[e];return function(){return i.apply(t,arguments)}}function rt(e,i){var n,r,s,o,a=function(){var t=+new Date-o;t<i&&0<t?n=setTimeout(a,i-t):(n=null,e.apply(s,r),n||(s=r=null))};return function(){s=this,r=arguments,o=+new Date,n||(n=setTimeout(a,i))}}function tt(t,e,i){var n,r,s,o,a=t[0],l=1==t.length&&"string"==typeof a;return it.isMoment(a)?ot(a,o=it.apply(null,t)):F(a)||a===undefined?o=it.apply(null,t):(r=n=!1,l?Qt.test(a)?(t=[a+="-01"],r=n=!0):(s=Jt.exec(a))&&(n=!s[5],r=!0):et.isArray(a)&&(r=!0),o=e||n?it.utc.apply(it,t):it.apply(null,t),n?(o._ambigTime=!0,o._ambigZone=!0):i&&(r?o._ambigZone=!0:l&&(o.utcOffset?o.utcOffset(a):o.zone(a)))),o._fullCalendar=!0,o}function st(t,e){var i,
n,r=!1,s=!1,o=t.length,a=[];for(i=0;i<o;i++)n=t[i],it.isMoment(n)||(n=At.moment.parseZone(n)),r=r||n._ambigTime,s=s||n._ambigZone,a.push(n);for(i=0;i<o;i++)n=a[i],e||!r||n._ambigTime?s&&!n._ambigZone&&(a[i]=n.clone().stripZone()):a[i]=n.clone().stripTime();return a}function ot(t,e){t._ambigTime?e._ambigTime=!0:e._ambigTime&&(e._ambigTime=!1),t._ambigZone?e._ambigZone=!0:e._ambigZone&&(e._ambigZone=!1)}function at(t,e){t.year(e[0]||0).month(e[1]||0).date(e[2]||0).hours(e[3]||0).minutes(e[4]||0).seconds(e[5]||0).milliseconds(e[6]||0)}function lt(t,e){return te.format.call(t,e)}function dt(t,e){return ht(t,gt(e))}function ht(t,e){var i,n="";for(i=0;i<e.length;i++)n+=ct(t,e[i]);return n}function ct(t,e){var i,n;return"string"==typeof e?e:(i=e.token)?ee[i]?ee[i](t):lt(t,i):e.maybe&&(n=ht(t,e.maybe)).match(/[1-9]/)?n:""}function ut(t,e,i,n,r){return n=n||" - ",pt(t=At.moment.parseZone(t),e=At.moment.parseZone(e),gt(i=(t.localeData||t.lang).call(t).longDateFormat(i)||i),n,r)}function pt(t,e,i,n,r){var s,o,a,l,d=t.clone().stripZone(),h=e.clone().stripZone(),c="",u="",p="",f="",g="";for(o=0;o<i.length&&!1!==(s=ft(t,e,d,h,i[o]));o++)c+=s;for(a=i.length-1;o<a&&!1!==(s=ft(t,e,d,h,i[a]));a--)u=s+u;for(l=o;l<=a;l++)p+=ct(t,i[l]),f+=ct(e,i[l]);return(p||f)&&(g=r?f+n+p:p+n+f),c+g+u}function ft(t,e,i,n,r){var s,o;return"string"==typeof r?r:!!((s=r.token)&&(o=ie[s.charAt(0)])&&i.isSame(n,o))&&lt(t,s)}function gt(t){return t in ne?ne[t]:ne[t]=mt(t)}function mt(t){for(var e,i=[],n=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;e=n.exec(t);)e[1]?i.push(e[1]):e[2]?i.push({maybe:mt(e[2])}):e[3]?i.push({token:e[3]}):e[5]&&i.push(e[5]);return i}function _t(){}function vt(t,e){var i;return P(e,"constructor")&&(i=e.constructor),"function"!=typeof i&&(i=e.constructor=function(){t.apply(this,arguments)}),i.prototype=nt(t.prototype),Y(e,i.prototype),L(e,i.prototype),Y(t,i),i}function yt(t,e){Y(e.prototype||e,t.prototype)}function wt(t,e){return!t&&!e||!(!t||!e)&&(t.component===e.component&&bt(t,e)&&bt(e,t))}function bt(t,e){for(var i in t)if(!/^(component|left|right|top|bottom)$/.test(i)&&t[i]!==e[i])return!1;return!0}function St(t){var e=xt(t);return"background"===e||"inverse-background"===e}function Ct(t){return"inverse-background"===xt(t)}function xt(t){return j((t.source||{}).rendering,t.rendering)}function Dt(t){var e,i,n={};for(e=0;e<t.length;e++)(n[(i=t[e])._id]||(n[i._id]=[])).push(i);return n}function Et(t,e){return t.start-e.start}function Tt(t){var e,i,n,r,s=At.dataAttrPrefix;return s&&(s+="-"),(e=t.data(s+"event")||null)&&(null==(i=(e="object"==typeof e?et.extend({},e):{}).start)&&(i=e.time),n=e.duration,r=e.stick,delete e.start,delete e.time,delete e.duration,delete e.stick),null==i&&(i=t.data(s+"start")),null==i&&(i=t.data(s+"time")),null==n&&(n=t.data(s+"duration")),null==r&&(r=t.data(s+"stick")),{eventProps:e,startTime:i=null!=i?it.duration(i):null,duration:n=null!=n?it.duration(n):null,stick:r=Boolean(r)}}function kt(t,e){var i,n;for(i=0;i<e.length;i++)if((n=e[i]).leftCol<=t.rightCol&&n.rightCol>=t.leftCol)return!0;return!1}function Rt(t,e){return t.leftCol-e.leftCol}function $t(t){var e,i,n,r=[];for(e=0;e<t.length;e++){for(i=t[e],n=0;n<r.length&&zt(i,r[n]).length;n++);(r[i.level=n]||(r[n]=[])).push(i)}return r}function Ht(t){var e,i,n,r,s;for(e=0;e<t.length;e++)for(i=t[e],n=0;n<i.length;n++)for((r=i[n]).forwardSegs=[],s=e+1;s<t.length;s++)zt(r,t[s],r.forwardSegs)}function Mt(t){var e,i,n=t.forwardSegs,r=0;if(t.forwardPressure===undefined){for(e=0;e<n.length;e++)Mt(i=n[e]),r=Math.max(r,1+i.forwardPressure);t.forwardPressure=r}}function zt(t,e,i){i=i||[];for(var n=0;n<e.length;n++)It(t,e[n])&&i.push(e[n]);return i}function It(t,e){return t.bottom>e.top&&t.top<e.bottom}function Ft(t,e){function i(){V?s()&&(l(),o()):n()}function n(){L.theme?"ui":"fc",t.addClass("fc"),L.isRTL?t.addClass("fc-rtl"):t.addClass("fc-ltr"),L.theme?t.addClass("ui-widget"):t.addClass("fc-unthemed"),V=et("<div class='fc-view-container'/>").prependTo(t),W=Y.header=new Lt(Y,L),(N=W.render())&&t.prepend(N),o(L.defaultView),L.handleWindowResize&&(U=rt(h,L.windowResizeDelay),et(window).resize(U))}function r(){B&&B.removeElement(),W.removeElement(),V.remove(),t.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),U&&et(window).unbind("resize",U)}function s(){return t.is(":visible")}function o(t){K++,B&&t&&B.type!==t&&(W.deactivateButton(B.type),H(),B.removeElement(),B=Y.view=null),!B&&t&&((B=Y.view=J[t]||(J[t]=Y.instantiateView(t))).setElement(et("<div class='fc-view fc-"+t+"-view' />").appendTo(V)),W.activateButton(t)),B&&(q=B.massageCurrentDate(q),B.displaying&&q.isWithin(B.intervalStart,B.intervalEnd)||s()&&(B.display(q),M(),v(),y(),f())),M(),K--}function a(t){if(s())return t&&d(),K++,B.updateSize(!0),K--,!0}function l(){s()&&d()}function d(){j="number"==typeof L.contentHeight?L.contentHeight:"number"==typeof L.height?L.height-(N?N.outerHeight(!0):0):Math.round(V.width()/Math.max(L.aspectRatio,.5))}function h(t){!K&&t.target===window&&B.start&&a(!0)&&B.trigger("windowResize",Q)}function c(){p(),g()}function u(){s()&&(H(),B.displayEvents(tt),M())}function p(){H(),B.clearEvents(),M()}function f(){!L.lazyFetching||Z(B.start,B.end)?g():u()}function g(){X(B.start,B.end)}function m(t){tt=t,u()}function _(){u()}function v(){W.updateTitle(B.title)}function y(){Y.getNow().isWithin(B.intervalStart,B.intervalEnd)?W.disableButton("today"):W.enableButton("today")}function w(){B.select(Y.buildSelectSpan.apply(Y,arguments))}function b(){B&&B.unselect()}function S(){q=B.computePrevDate(q),o()}function C(){q=B.computeNextDate(q),o()}function x(){q.add(-1,"years"),o()}function D(){q.add(1,"years"),o()}function E(){q=Y.getNow(),o()}function T(t){q=Y.moment(t).stripZone(),o()}function k(t){q.add(it.duration(t)),o()}function R(t,e){var i;e=e||"day",i=Y.getViewSpec(e)||Y.getUnitViewSpec(e),q=t.clone(),o(i?i.type:null)}function $(){return Y.applyTimezone(q)}function H(){V.css({width:"100%",height:V.height(),overflow:"hidden"})}function M(){V.css({width:"",height:"",overflow:""})}function z(){return Y}function I(){return B}function F(t,e){if(e===undefined)return L[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(L[t]=e,a(!0))}function G(t,e){var i=Array.prototype.slice.call(arguments,2);if(e=e||Q,this.triggerWith(t,e,i),L[t])return L[t].apply(e,i)}var Y=this;Y.initOptions(e||{});var L=this.options;Y.render=i,Y.destroy=r,Y.refetchEvents=c,Y.reportEvents=m,Y.reportEventChange=_,Y.rerenderEvents=u,Y.changeView=o,Y.select=w,Y.unselect=b,Y.prev=S,Y.next=C,Y.prevYear=x,Y.nextYear=D,Y.today=E,Y.gotoDate=T,Y.incrementDate=k,Y.zoomTo=R,Y.getDate=$,Y.getCalendar=z,Y.getView=I,Y.option=F,Y.trigger=G;var P,O=nt(Yt(L.lang));if(L.monthNames&&(O._months=L.monthNames),L.monthNamesShort&&(O._monthsShort=L.monthNamesShort),L.dayNames&&(O._weekdays=L.dayNames),L.dayNamesShort&&(O._weekdaysShort=L.dayNamesShort),null!=L.firstDay){var A=nt(O._week);A.dow=L.firstDay,O._week=A}O._fullCalendar_weekCalc="function"==typeof(P=L.weekNumberCalculation)?P:"local"===P?P:"iso"===P||"ISO"===P?"ISO":void 0,Y.defaultAllDayEventDuration=it.duration(L.defaultAllDayEventDuration),Y.defaultTimedEventDuration=it.duration(L.defaultTimedEventDuration),Y.moment=function(){var t;return"local"===L.timezone?(t=At.moment.apply(null,arguments)).hasTime()&&t.local():t="UTC"===L.timezone?At.moment.utc.apply(null,arguments):At.moment.parseZone.apply(null,arguments),"_locale"in t?t._locale=O:t._lang=O,t},Y.getIsAmbigTimezone=function(){return"local"!==L.timezone&&"UTC"!==L.timezone},Y.applyTimezone=function(t){if(!t.hasTime())return t.clone();var e,i=Y.moment(t.toArray()),n=t.time()-i.time();return n&&(e=i.clone().add(n),t.time()-e.time()==0&&(i=e)),i},Y.getNow=function(){var t=L.now;return"function"==typeof t&&(t=t()),Y.moment(t).stripZone()},Y.getEventEnd=function(t){return t.end?t.end.clone():Y.getDefaultEventEnd(t.allDay,t.start)},Y.getDefaultEventEnd=function(t,e){var i=e.clone();return t?i.stripTime().add(Y.defaultAllDayEventDuration):i.add(Y.defaultTimedEventDuration),Y.getIsAmbigTimezone()&&i.stripZone(),i},Y.humanizeDuration=function(t){return(t.locale||t.lang).call(t,L.lang).humanize()},Pt.call(Y,L);var W,N,V,B,j,U,q,Z=Y.isFetchNeeded,X=Y.fetchEvents,Q=t[0],J={},K=0,tt=[];q=null!=L.defaultDate?Y.moment(L.defaultDate).stripZone():Y.getNow(),Y.getSuggestedViewHeight=function(){return j===undefined&&l(),j},Y.isHeightAuto=function(){return"auto"===L.contentHeight||"auto"===L.height},Y.freezeContentHeight=H,Y.unfreezeContentHeight=M,Y.initialize()}function Gt(i){et.each(ye,function(t,e){null==i[t]&&(i[t]=e(i))})}function Yt(t){var e=it.localeData||it.langData;return e.call(it,t)||e.call(it,"en")}function Lt(p,f){function t(){var t=f.header;if(g=f.theme?"ui":"fc",t)return h=et("<div class='fc-toolbar'/>").append(i("left")).append(i("right")).append(i("center")).append('<div class="fc-clear"/>')}function e(){h.remove(),h=et()}function i(t){var e=et('<div class="fc-'+t+'"/>'),i=f.header[t];return i&&et.each(i.split(" "),function(){var t,c=et(),u=!0;et.each(this.split(","),function(t,e){var i,n,r,s,o,a,l,d,h;"title"==e?(c=c.add(et("<h2>&nbsp;</h2>")),u=!1):((i=(p.options.customButtons||{})[e])?(r=function(t){i.click&&i.click.call(h[0],t)},s="",o=i.text):(n=p.getViewSpec(e))?(r=function(){p.changeView(e)},m.push(e),s=n.buttonTextOverride,o=n.buttonTextDefault):p[e]&&(r=function(){p[e]()},s=(p.overrides.buttonText||{})[e],o=f.buttonText[e]),r&&(a=i?i.themeIcon:f.themeButtonIcons[e],l=i?i.icon:f.buttonIcons[e],d=s?U(s):a&&f.theme?"<span class='ui-icon ui-icon-"+a+"'></span>":l&&!f.theme?"<span class='fc-icon fc-icon-"+l+"'></span>":U(o),h=et('<button type="button" class="'+["fc-"+e+"-button",g+"-button",g+"-state-default"].join(" ")+'">'+d+"</button>").click(function(t){h.hasClass(g+"-state-disabled")||(r(t),(h.hasClass(g+"-state-active")||h.hasClass(g+"-state-disabled"))&&h.removeClass(g+"-state-hover"))}).mousedown(function(){h.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-down")}).mouseup(function(){h.removeClass(g+"-state-down")}).hover(function(){h.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-hover")},function(){h.removeClass(g+"-state-hover").removeClass(g+"-state-down")}),c=c.add(h)))}),u&&c.first().addClass(g+"-corner-left").end().last().addClass(g+"-corner-right").end(),1<c.length?(t=et("<div/>"),u&&t.addClass("fc-button-group"),t.append(c),e.append(t)):e.append(c)}),e}function n(t){h.find("h2").text(t)}function r(t){h.find(".fc-"+t+"-button").addClass(g+"-state-active")}function s(t){h.find(".fc-"+t+"-button").removeClass(g+"-state-active")}function o(t){h.find(".fc-"+t+"-button").attr("disabled","disabled").addClass(g+"-state-disabled")}function a(t){h.find(".fc-"+t+"-button").removeAttr("disabled").removeClass(g+"-state-disabled")}function l(){return m}var d=this;d.render=t,d.removeElement=e,d.updateTitle=n,d.activateButton=r,d.deactivateButton=s,d.disableButton=o,d.enableButton=a,d.getViewsWithButtons=l;var g,h=et(),m=[]}function Pt(f){function t(t,e){return!M||t<M||z<e}function e(t,e){M=t,z=e,P=[];var i=++Y,n=G.length;L=n;for(var r=0;r<n;r++)s(G[r],i)}function s(s,o){g(s,function(t){var e,i,n,r=et.isArray(s.events);if(o==Y){if(t)for(e=0;e<t.length;e++)i=t[e],(n=r?i:m(i,s))&&P.push.apply(P,w(n));--L||I(P)}})}function g(t,i){var e,n,r=At.sourceFetchers;for(e=0;e<r.length;e++){if(!0===(n=r[e].call(H,t,M.clone(),z.clone(),f.timezone,i)))return;if("object"==typeof n)return void g(n,i)}var s=t.events;if(s)et.isFunction(s)?(H.pushLoading(),s.call(H,M.clone(),z.clone(),f.timezone,function(t){i(t),H.popLoading()})):et.isArray(s)?i(s):i();else if(t.url){var o,a=t.success,l=t.error,d=t.complete;o=et.isFunction(t.data)?t.data():t.data;var h=et.extend({},o||{}),c=j(t.startParam,f.startParam),u=j(t.endParam,f.endParam),p=j(t.timezoneParam,f.timezoneParam);c&&(h[c]=M.format()),u&&(h[u]=z.format()),f.timezone&&"local"!=f.timezone&&(h[p]=f.timezone),H.pushLoading(),et.ajax(et.extend({},we,t,{data:h,success:function(t){t=t||[];var e=B(a,this,arguments);et.isArray(e)&&(t=e),i(t)},error:function(){B(l,this,arguments),i()},complete:function(){B(d,this,arguments),H.popLoading()}}))}else i()}function i(t){var e=n(t);e&&(G.push(e),L++,s(e,Y))}function n(t){var e,i,n=At.sourceNormalizers;if(et.isFunction(t)||et.isArray(t)?e={events:t}:"string"==typeof t?e={url:t}:"object"==typeof t&&(e=et.extend({},t)),e){for(e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[],et.isArray(e.events)&&(e.origArray=e.events,e.events=et.map(e.events,function(t){return m(t,e)})),i=0;i<n.length;i++)n[i].call(H,e);return e}}function r(e){G=et.grep(G,function(t){return!o(t,e)}),P=et.grep(P,function(t){return!o(t.source,e)}),I(P)}function o(t,e){return t&&e&&a(t)==a(e)}function a(t){return("object"==typeof t?t.origArray||t.googleCalendarId||t.url||t.events:null)||t}function l(t){t.start=H.moment(t.start),t.end?t.end=H.moment(t.end):t.end=null,b(t,d(t)),I(P)}function d(t){var i={};return et.each(t,function(t,e){h(t)&&e!==undefined&&V(e)&&(i[t]=e)}),i}function h(t){return!/^_|^(id|allDay|start|end)$/.test(t)}function c(t,e){var i,n,r,s=m(t);if(s){for(i=w(s),n=0;n<i.length;n++)(r=i[n]).source||(e&&(F.events.push(r),r.source=F),P.push(r));return I(P),i}return[]}function u(t){var e,i;for(null==t?t=function(){return!0}:et.isFunction(t)||(e=t+"",t=function(t){return t._id==e}),P=et.grep(P,t,!0),i=0;i<G.length;i++)et.isArray(G[i].events)&&(G[i].events=et.grep(G[i].events,t,!0));I(P)}function p(e){return et.isFunction(e)?et.grep(P,e):null!=e?(e+="",et.grep(P,function(t){return t._id==e})):P}function m(t,e){var i,n,r,s={};if(f.eventDataTransform&&(t=f.eventDataTransform(t)),e&&e.eventDataTransform&&(t=e.eventDataTransform(t)),et.extend(s,t),e&&(s.source=e),s._id=t._id||(t.id===undefined?"_fc"+be++:t.id+""),t.className?"string"==typeof t.className?s.className=t.className.split(/\s+/):s.className=t.className:s.className=[],i=t.start||t.date,n=t.end,N(i)&&(i=it.duration(i)),N(n)&&(n=it.duration(n)),t.dow||it.isDuration(i)||it.isDuration(n))s.start=i?it.duration(i):null,s.end=n?it.duration(n):null,s._recurring=!0;else{if(i&&!(i=H.moment(i)).isValid())return!1;n&&((n=H.moment(n)).isValid()||(n=null)),(r=t.allDay)===undefined&&(r=j(e?e.allDayDefault:undefined,f.allDayDefault)),_(i,n,r,s)}return s}function _(t,e,i,n){n.start=t,n.end=e,n.allDay=i,v(n),Ot(n)}function v(t){y(t),t.end&&!t.end.isAfter(t.start)&&(t.end=null),t.end||(f.forceEventDuration?t.end=H.getDefaultEventEnd(t.allDay,t.start):t.end=null)}function y(t){null==t.allDay&&(t.allDay=!(t.start.hasTime()||t.end&&t.end.hasTime())),t.allDay?(t.start.stripTime(),t.end&&t.end.stripTime()):(t.start.hasTime()||(t.start=H.applyTimezone(t.start.time(0))),t.end&&!t.end.hasTime()&&(t.end=H.applyTimezone(t.end.time(0))))}function w(t,e,i){var n,r,s,o,a,l,d,h,c,u=[];if(e=e||M,i=i||z,t)if(t._recurring){if(r=t.dow)for(n={},s=0;s<r.length;s++)n[r[s]]=!0;for(o=e.clone().stripTime();o.isBefore(i);)n&&!n[o.day()]||(a=t.start,l=t.end,d=o.clone(),h=null,a&&(d=d.time(a)),l&&(h=o.clone().time(l)),_(d,h,!a&&!l,c=et.extend({},t)),u.push(c)),o.add(1,"days")}else u.push(t);return u}function b(t,i,n){function e(t,e){return n?W(t,e,n):i.allDay?A(t,e):O(t,e)}var r,s,o,a,l={};return(i=i||{}).start||(i.start=t.start.clone()),i.end===undefined&&(i.end=t.end?t.end.clone():null),null==i.allDay&&(i.allDay=t.allDay),v(i),v(r={start:t._start.clone(),end:t._end?t._end.clone():H.getDefaultEventEnd(t._allDay,t._start),allDay:i.allDay}),s=null!==t._end&&null===i.end,o=e(i.start,r.start),a=i.end?e(i.end,r.end).subtract(o):null,et.each(i,function(t,e){h(t)&&e!==undefined&&(l[t]=e)}),{dateDelta:o,durationDelta:a,undo:S(p(t._id),s,i.allDay,o,a,l)}}function S(t,r,s,o,a,l){var d=H.getIsAmbigTimezone(),h=[];return o&&!o.valueOf()&&(o=null),a&&!a.valueOf()&&(a=null),et.each(t,function(t,e){var i,n;i={start:e.start.clone(),end:e.end?e.end.clone():null,allDay:e.allDay},et.each(l,function(t){i[t]=e[t]}),v(n={start:e._start,end:e._end,allDay:s}),r?n.end=null:a&&!n.end&&(n.end=H.getDefaultEventEnd(n.allDay,n.start)),o&&(n.start.add(o),n.end&&n.end.add(o)),a&&n.end.add(a),d&&!n.allDay&&(o||a)&&(n.start.stripZone(),n.end&&n.end.stripZone()),et.extend(e,l,n),Ot(e),h.push(function(){et.extend(e,i),Ot(e)})}),function(){for(var t=0;t<h.length;t++)h[t]()}}function C(t){var e,i=f.businessHours,n={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},r=H.getView();return i&&(e=et.extend({},n,"object"==typeof i?i:{})),e?(t&&(e.start=null,e.end=null),w(m(e),r.start,r.end)):[]}function x(t,e){var i=e.source||{};return T(t,j(e.constraint,i.constraint,f.eventConstraint),j(e.overlap,i.overlap,f.eventOverlap),e)}function D(t,e,i){var n;return i&&(n=w(m(et.extend({},i,e)))[0]),n?x(t,n):E(t)}function E(t){return T(t,f.selectConstraint,f.selectOverlap)}function T(t,e,i,n){var r,s,o,a,l,d;if(null!=e){for(r=k(e),s=!1,a=0;a<r.length;a++)if(R(r[a],t)){s=!0;break}if(!s)return!1}for(o=H.getPeerEvents(t,n),a=0;a<o.length;a++)if($(l=o[a],t)){if(!1===i)return!1;if("function"==typeof i&&!i(l,n))return!1;if(n){if(!1===(d=j(l.overlap,(l.source||{}).overlap)))return!1;if("function"==typeof d&&!d(n,l))return!1}}return!0}function k(t){return"businessHours"===t?C():"object"==typeof t?w(m(t)):p(t)}function R(t,e){var i=t.start.clone().stripZone(),n=H.getEventEnd(t).stripZone();return e.start>=i&&e.end<=n}function $(t,e){var i=t.start.clone().stripZone(),n=H.getEventEnd(t).stripZone();return e.start<n&&e.end>i}var H=this;H.isFetchNeeded=t,H.fetchEvents=e,H.addEventSource=i,H.removeEventSource=r,H.updateEvent=l,H.renderEvent=c,H.removeEvents=u,H.clientEvents=p,H.mutateEvent=b,H.normalizeEventDates=v,H.normalizeEventTimes=y;var M,z,I=H.reportEvents,F={events:[]},G=[F],Y=0,L=0,P=[];et.each((f.events?[f.events]:[]).concat(f.eventSources||[]),function(t,e){var i=n(e);i&&G.push(i)}),H.getBusinessHoursEvents=C,H.isEventSpanAllowed=x,H.isExternalSpanAllowed=D,H.isSelectionSpanAllowed=E,H.getEventCache=function(){return P}}function Ot(t){t._allDay=t.allDay,t._start=t.start.clone(),t._end=t.end?t.end.clone():null}var At=et.fullCalendar={version:"2.6.1",internalApiVersion:3},Wt=At.views={};et.fn.fullCalendar=function(s){var o=Array.prototype.slice.call(arguments,1),a=this;return this.each(function(t,e){var i,n=et(e),r=n.data("fullCalendar");"string"==typeof s?r&&et.isFunction(r[s])&&(i=r[s].apply(r,o),t||(a=i),"destroy"===s&&n.removeData("fullCalendar")):r||(r=new ge(n,s),n.data("fullCalendar",r),r.render())}),a};var Nt=["header","buttonText","buttonIcons","themeButtonIcons"];At.intersectRanges=k,At.applyAll=B,At.debounce=rt,At.isInt=J,At.htmlEscape=U,At.cssToStr=Z,At.proxy=K,At.capitaliseFirstLetter=X,At.getOuterRect=d,At.getClientRect=e,At.getContentRect=u,At.getScrollbarWidths=g;var Vt=null;At.intersectRects=w,At.parseFieldSpecs=x,At.compareByFieldSpecs=D,At.compareByFieldSpec=E,At.flexibleCompare=T,At.computeIntervalUnit=R,At.divideRangeByDuration=H,At.divideDurationByDuration=M,At.multiplyDuration=z,At.durationHasTime=I;var Bt=["sun","mon","tue","wed","thu","fri","sat"],jt=["year","month","week","day","hour","minute","second","millisecond"];At.log=function(){var t=window.console;if(t&&t.log)return t.log.apply(t,arguments)},At.warn=function(){var t=window.console;return t&&t.warn?t.warn.apply(t,arguments):At.log.apply(At,arguments)};var Ut,qt,Zt,Xt={}.hasOwnProperty,Qt=/^\s*\d{4}-\d\d$/,Jt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,Kt=it.fn,te=et.extend({},Kt);At.moment=function(){return tt(arguments)},At.moment.utc=function(){var t=tt(arguments,!0);return t.hasTime()&&t.utc(),t},At.moment.parseZone=function(){return tt(arguments,!0,!0)},Kt.clone=function(){var t=te.clone.apply(this,arguments);return ot(this,t),this._fullCalendar&&(t._fullCalendar=!0),t},Kt.week=Kt.weeks=function(t){var e=(this._locale||this._lang)._fullCalendar_weekCalc;return null==t&&"function"==typeof e?e(this):"ISO"===e?te.isoWeek.apply(this,arguments):te.week.apply(this,arguments)},Kt.time=function(t){if(!this._fullCalendar)return te.time.apply(this,arguments);if(null==t)return it.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,it.isDuration(t)||it.isMoment(t)||(t=it.duration(t));var e=0;return it.isDuration(t)&&(e=24*Math.floor(t.asDays())),this.hours(e+t.hours()).minutes(t.minutes()).seconds(t.seconds()).milliseconds(t.milliseconds())},Kt.stripTime=function(){var t;return this._ambigTime||(t=this.toArray(),this.utc(),qt(this,t.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},Kt.hasTime=function(){return!this._ambigTime},Kt.stripZone=function(){var t,e;return this._ambigZone||(t=this.toArray(),e=this._ambigTime,this.utc(),qt(this,t),this._ambigTime=e||!1,this._ambigZone=!0),this},Kt.hasZone=function(){return!this._ambigZone},Kt.local=function(){var t=this.toArray(),e=this._ambigZone;return te.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,e&&Zt(this,t),this},Kt.utc=function(){return te.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},et.each(["zone","utcOffset"],function(t,e){te[e]&&(Kt[e]=function(t){return null!=t&&(this._ambigTime=!1,this._ambigZone=!1),te[e].apply(this,arguments)})}),Kt.format=function(t){return this._fullCalendar&&t?dt(this,t):this._ambigTime?lt(this,"YYYY-MM-DD"):this._ambigZone?lt(this,"YYYY-MM-DD[T]HH:mm:ss"):te.format.apply(this,arguments)},Kt.toISOString=function(){return this._ambigTime?lt(this,"YYYY-MM-DD"):this._ambigZone?lt(this,"YYYY-MM-DD[T]HH:mm:ss"):te.toISOString.apply(this,arguments)},Kt.isWithin=function(t,e){var i=st([this,t,e]);return i[0]>=i[1]&&i[0]<i[2]},Kt.isSame=function(t,e){var i;return this._fullCalendar?e?(i=st([this,t],!0),te.isSame.call(i[0],i[1],e)):(t=At.moment.parseZone(t),te.isSame.call(this,t)&&Boolean(this._ambigTime)===Boolean(t._ambigTime)&&Boolean(this._ambigZone)===Boolean(t._ambigZone)):te.isSame.apply(this,arguments)},et.each(["isBefore","isAfter"],function(t,n){Kt[n]=function(t,e){var i;return this._fullCalendar?(i=st([this,t]),te[n].call(i[0],i[1],e)):te[n].apply(this,arguments)}}),Ut="_d"in it()&&"updateOffset"in it,qt=Ut?function(t,e){t._d.setTime(Date.UTC.apply(Date,e)),it.updateOffset(t,!1)}:at,Zt=Ut?function(t,e){t._d.setTime(+new Date(e[0]||0,e[1]||0,e[2]||0,e[3]||0,e[4]||0,e[5]||0,e[6]||0)),it.updateOffset(t,!1)}:at;var ee={t:function(t){return lt(t,"a").charAt(0)},T:function(t){return lt(t,"A").charAt(0)}};At.formatRange=ut;var ie={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},ne={};(At.Class=_t).extend=function(){var t,e,i=arguments.length;for(t=0;t<i;t++)e=arguments[t],t<i-1&&yt(this,e);return vt(this,e||{})},_t.mixin=function(t){yt(this,t)};var re=At.Emitter=_t.extend({callbackHash:null,on:function(t,e){return this.getCallbacks(t).add(e),this},off:function(t,e){return this.getCallbacks(t).remove(e),this},trigger:function(t){var e=Array.prototype.slice.call(arguments,1);return this.triggerWith(t,this,e),this},triggerWith:function(t,e,i){return this.getCallbacks(t).fireWith(e,i),this},getCallbacks:function(t){var e;return this.callbackHash||(this.callbackHash={}),(e=this.callbackHash[t])||(e=this.callbackHash[t]=et.Callbacks()),e}}),se=_t.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(t){this.options=t||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var t=this,e=this.options;this.el=et('<div class="fc-popover"/>').addClass(e.className||"").css({top:0,left:0}).append(e.content).appendTo(e.parentEl),this.el.on("click",".fc-close",function(){t.hide()}),e.autoHide&&et(document).on("mousedown",this.documentMousedownProxy=K(this,"documentMousedown"))},documentMousedown:function(t){this.el&&!et(t.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),et(document).off("mousedown",this.documentMousedownProxy)},position:function(){var t,e,i,n,r,s=this.options,o=this.el.offsetParent().offset(),a=this.el.outerWidth(),l=this.el.outerHeight(),d=et(window),h=c(this.el);n=s.top||0,r=s.left!==undefined?s.left:s.right!==undefined?s.right-a:0,h.is(window)||h.is(document)?(h=d,e=t=0):(t=(i=h.offset()).top,e=i.left),t+=d.scrollTop(),e+=d.scrollLeft(),!1!==s.viewportConstrain&&(n=Math.min(n,t+h.outerHeight()-l-this.margin),n=Math.max(n,t+this.margin),r=Math.min(r,e+h.outerWidth()-a-this.margin),r=Math.max(r,e+this.margin)),this.el.css({top:n-o.top,left:r-o.left})},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))}}),oe=At.CoordCache=_t.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(t){this.els=et(t.els),this.isHorizontal=t.isHorizontal,this.isVertical=t.isVertical,this.forcedOffsetParentEl=t.offsetParent?et(t.offsetParent):null},build:function(){var t=this.forcedOffsetParentEl||this.els.eq(0).offsetParent();this.origin=t.offset(),this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},clear:function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},ensureBuilt:function(){this.origin||this.build()},queryBoundingRect:function(){var t=c(this.els.eq(0));if(!t.is(document))return e(t)},buildElHorizontals:function(){var s=[],o=[];this.els.each(function(t,e){var i=et(e),n=i.offset().left,r=i.outerWidth();s.push(n),o.push(n+r)}),this.lefts=s,this.rights=o},buildElVerticals:function(){var s=[],o=[];this.els.each(function(t,e){var i=et(e),n=i.offset().top,r=i.outerHeight();s.push(n),o.push(n+r)}),this.tops=s,this.bottoms=o},getHorizontalIndex:function(t){this.ensureBuilt();var e,i=this.boundingRect,n=this.lefts,r=this.rights,s=n.length;if(!i||t>=i.left&&t<i.right)for(e=0;e<s;e++)if(t>=n[e]&&t<r[e])return e},getVerticalIndex:function(t){this.ensureBuilt();var e,i=this.boundingRect,n=this.tops,r=this.bottoms,s=n.length;if(!i||t>=i.top&&t<i.bottom)for(e=0;e<s;e++)if(t>=n[e]&&t<r[e])return e},getLeftOffset:function(t){return this.ensureBuilt(),this.lefts[t]},getLeftPosition:function(t){return this.ensureBuilt(),this.lefts[t]-this.origin.left},getRightOffset:function(t){return this.ensureBuilt(),this.rights[t]},getRightPosition:function(t){return this.ensureBuilt(),this.rights[t]-this.origin.left},getWidth:function(t){return this.ensureBuilt(),this.rights[t]-this.lefts[t]},getTopOffset:function(t){return this.ensureBuilt(),this.tops[t]},getTopPosition:function(t){return this.ensureBuilt(),this.tops[t]-this.origin.top},getBottomOffset:function(t){return this.ensureBuilt(),this.bottoms[t]},getBottomPosition:function(t){return this.ensureBuilt(),this.bottoms[t]-this.origin.top},getHeight:function(t){return this.ensureBuilt(),this.bottoms[t]-this.tops[t]}}),ae=At.DragListener=_t.extend({options:null,isListening:!1,isDragging:!1,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(t){t=t||{},this.options=t,this.subjectEl=t.subjectEl},mousedown:function(t){y(t)&&(t.preventDefault(),this.startListening(t),this.options.distance||this.startDrag(t))},startListening:function(t){var e;this.isListening||(t&&this.options.scroll&&((e=c(et(t.target))).is(window)||e.is(document)||(this.scrollEl=e,this.scrollHandlerProxy=rt(K(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),et(document).on("mousemove",this.mousemoveProxy=K(this,"mousemove")).on("mouseup",this.mouseupProxy=K(this,"mouseup")).on("selectstart",this.preventDefault),t?(this.originX=t.pageX,this.originY=t.pageY):(this.originX=0,this.originY=0),this.isListening=!0,this.listenStart(t))},listenStart:function(t){this.trigger("listenStart",t)},mousemove:function(t){var e,i=t.pageX-this.originX,n=t.pageY-this.originY;this.isDragging||(e=this.options.distance||1)*e<=i*i+n*n&&this.startDrag(t),this.isDragging&&this.drag(i,n,t)},startDrag:function(t){this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.dragStart(t))},dragStart:function(t){var e=this.subjectEl;this.trigger("dragStart",t),(this.subjectHref=e?e.attr("href"):null)&&e.removeAttr("href")},drag:function(t,e,i){this.trigger("drag",t,e,i),this.updateScroll(i)},mouseup:function(t){this.stopListening(t)},stopDrag:function(t){this.isDragging&&(this.stopScrolling(),this.dragStop(t),this.isDragging=!1)},dragStop:function(t){var e=this;this.trigger("dragStop",t),setTimeout(function(){e.subjectHref&&e.subjectEl.attr("href",e.subjectHref)},0)},stopListening:function(t){this.stopDrag(t),this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),et(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.listenStop(t))},listenStop:function(t){this.trigger("listenStop",t)},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(t){t.preventDefault()},computeScrollBounds:function(){var t=this.scrollEl;this.scrollBounds=t?d(t):null},updateScroll:function(t){var e,i,n,r,s=this.scrollSensitivity,o=this.scrollBounds,a=0,l=0;o&&(e=(s-(t.pageY-o.top))/s,i=(s-(o.bottom-t.pageY))/s,n=(s-(t.pageX-o.left))/s,r=(s-(o.right-t.pageX))/s,0<=e&&e<=1?a=e*this.scrollSpeed*-1:0<=i&&i<=1&&(a=i*this.scrollSpeed),0<=n&&n<=1?l=n*this.scrollSpeed*-1:0<=r&&r<=1&&(l=r*this.scrollSpeed)),this.setScrollVel(a,l)},setScrollVel:function(t,e){this.scrollTopVel=t,this.scrollLeftVel=e,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(K(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var t=this.scrollEl;this.scrollTopVel<0?t.scrollTop()<=0&&(this.scrollTopVel=0):0<this.scrollTopVel&&t.scrollTop()+t[0].clientHeight>=t[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?t.scrollLeft()<=0&&(this.scrollLeftVel=0):0<this.scrollLeftVel&&t.scrollLeft()+t[0].clientWidth>=t[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var t=this.scrollEl,e=this.scrollIntervalMs/1e3;this.scrollTopVel&&t.scrollTop(t.scrollTop()+this.scrollTopVel*e),this.scrollLeftVel&&t.scrollLeft(t.scrollLeft()+this.scrollLeftVel*e),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.scrollStop())},scrollHandler:function(){this.scrollIntervalId||this.scrollStop()},scrollStop:function(){}}),le=ae.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(t,e){ae.call(this,e),this.component=t},listenStart:function(t){var e,i,n,r=this.subjectEl;ae.prototype.listenStart.apply(this,arguments),this.computeCoords(),t?(n=i={left:t.pageX,top:t.pageY},r&&(n=b(n,e=d(r))),this.origHit=this.queryHit(n.left,n.top),r&&this.options.subjectCenter&&(this.origHit&&(e=w(this.origHit,e)||e),n=S(e)),this.coordAdjust=C(n,i)):(this.origHit=null,this.coordAdjust=null)},computeCoords:function(){this.component.prepareHits(),this.computeScrollBounds()},dragStart:function(t){var e;ae.prototype.dragStart.apply(this,arguments),(e=this.queryHit(t.pageX,t.pageY))&&this.hitOver(e)},drag:function(t,e,i){var n;ae.prototype.drag.apply(this,arguments),wt(n=this.queryHit(i.pageX,i.pageY),this.hit)||(this.hit&&this.hitOut(),n&&this.hitOver(n))},dragStop:function(){this.hitDone(),ae.prototype.dragStop.apply(this,arguments)},hitOver:function(t){var e=wt(t,this.origHit);this.hit=t,this.trigger("hitOver",this.hit,e,this.origHit)},hitOut:function(){this.hit&&(this.trigger("hitOut",this.hit),this.hitDone(),this.hit=null)},hitDone:function(){this.hit&&this.trigger("hitDone",this.hit)},listenStop:function(){ae.prototype.listenStop.apply(this,arguments),this.origHit=null,this.hit=null,this.component.releaseHits()},scrollStop:function(){ae.prototype.scrollStop.apply(this,arguments),this.computeCoords()},queryHit:function(t,e){return this.coordAdjust&&(t+=this.coordAdjust.left,
e+=this.coordAdjust.top),this.component.queryHit(t,e)}}),de=_t.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(t,e){this.options=e=e||{},this.sourceEl=t,this.parentEl=e.parentEl?et(e.parentEl):t.parent()},start:function(t){this.isFollowing||(this.isFollowing=!0,this.mouseY0=t.pageY,this.mouseX0=t.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),et(document).on("mousemove",this.mousemoveProxy=K(this,"mousemove")))},stop:function(t,e){function i(){this.isAnimating=!1,n.removeElement(),this.top0=this.left0=null,e&&e()}var n=this,r=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,et(document).off("mousemove",this.mousemoveProxy),t&&r&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:r,complete:i})):i())},getEl:function(){var t=this.el;return t||(this.sourceEl.width(),t=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),t},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var t,e;this.getEl(),null===this.top0&&(this.sourceEl.width(),t=this.sourceEl.offset(),e=this.el.offsetParent().offset(),this.top0=t.top-e.top,this.left0=t.left-e.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(t){this.topDelta=t.pageY-this.mouseY0,this.leftDelta=t.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),he=At.Grid=_t.extend({view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,externalDragStartProxy:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,constructor:function(t){this.view=t,this.isRTL=t.opt("isRTL"),this.elsByFill={},this.externalDragStartProxy=K(this,"externalDragStart")},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(t){this.start=t.start.clone(),this.end=t.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var t,e,i=this.view;this.eventTimeFormat=i.opt("eventTimeFormat")||i.opt("timeFormat")||this.computeEventTimeFormat(),null==(t=i.opt("displayEventTime"))&&(t=this.computeDisplayEventTime()),null==(e=i.opt("displayEventEnd"))&&(e=this.computeDisplayEventEnd()),this.displayEventTime=t,this.displayEventEnd=e},spanToSegs:function(){},diffDates:function(t,e){return this.largeUnit?W(t,e,this.largeUnit):O(t,e)},prepareHits:function(){},releaseHits:function(){},queryHit:function(){},getHitSpan:function(){},getHitEl:function(){},setElement:function(t){var e=this;(this.el=t).on("mousedown",function(t){et(t.target).is(".fc-event-container *, .fc-more")||et(t.target).closest(".fc-popover").length||e.dayMousedown(t)}),this.bindSegHandlers(),this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){et(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){et(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(t){var n,r,s=this,e=this.view,o=e.opt("selectable");new le(this,{scroll:e.opt("dragScroll"),dragStart:function(){e.unselect()},hitOver:function(t,e,i){i&&(n=e?t:null,o&&((r=s.computeSelection(s.getHitSpan(i),s.getHitSpan(t)))?s.renderSelection(r):!1===r&&p()))},hitOut:function(){r=n=null,s.unrenderSelection(),f()},listenStop:function(t){n&&e.triggerDayClick(s.getHitSpan(n),s.getHitEl(n),t),r&&e.reportSelection(r,t),f()}}).mousedown(t)},renderEventLocationHelper:function(t,e){var i=this.fabricateHelperEvent(t,e);this.renderHelper(i,e)},fabricateHelperEvent:function(t,e){var i=e?nt(e.event):{};return i.start=t.start.clone(),i.end=t.end?t.end.clone():null,i.allDay=null,this.view.calendar.normalizeEventDates(i),i.className=(i.className||[]).concat("fc-helper"),e||(i.editable=!1),i},renderHelper:function(){},unrenderHelper:function(){},renderSelection:function(t){this.renderHighlight(t)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(t,e){var i=this.computeSelectionSpan(t,e);return!(i&&!this.view.calendar.isSelectionSpanAllowed(i))&&i},computeSelectionSpan:function(t,e){var i=[t.start,t.end,e.start,e.end];return i.sort(Q),{start:i[0].clone(),end:i[3].clone()}},renderHighlight:function(t){this.renderFill("highlight",this.spanToSegs(t))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(){},unrenderNowIndicator:function(){},renderFill:function(){},unrenderFill:function(t){var e=this.elsByFill[t];e&&(e.remove(),delete this.elsByFill[t])},renderFillSegEls:function(t,r){var e,s=this,o=this[t+"SegEl"],i="",a=[];if(r.length){for(e=0;e<r.length;e++)i+=this.fillSegHtml(t,r[e]);et(i).each(function(t,e){var i=r[t],n=et(e);o&&(n=o.call(s,i,n)),n&&(n=et(n)).is(s.fillSegTag)&&(i.el=n,a.push(i))})}return a},fillSegTag:"div",fillSegHtml:function(t,e){var i=this[t+"SegClasses"],n=this[t+"SegCss"],r=i?i.call(this,e):[],s=Z(n?n.call(this,e):{});return"<"+this.fillSegTag+(r.length?' class="'+r.join(" ")+'"':"")+(s?' style="'+s+'"':"")+" />"},getDayClasses:function(t){var e=this.view,i=e.calendar.getNow(),n=["fc-"+Bt[t.day()]];return 1==e.intervalDuration.as("months")&&t.month()!=e.intervalStart.month()&&n.push("fc-other-month"),t.isSame(i,"day")?n.push("fc-today",e.highlightStateClass):t<i?n.push("fc-past"):n.push("fc-future"),n}});he.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(t){var e,i=[],n=[];for(e=0;e<t.length;e++)(St(t[e])?i:n).push(t[e]);this.segs=[].concat(this.renderBgEvents(i),this.renderFgEvents(n))},renderBgEvents:function(t){var e=this.eventsToSegs(t);return this.renderBgSegs(e)||e},renderFgEvents:function(t){var e=this.eventsToSegs(t);return this.renderFgSegs(e)||e},unrenderEvents:function(){this.triggerSegMouseout(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(){},unrenderFgSegs:function(){},renderFgSegEls:function(r,t){var e,s=this.view,i="",o=[];if(r.length){for(e=0;e<r.length;e++)i+=this.fgSegHtml(r[e],t);et(i).each(function(t,e){var i=r[t],n=s.resolveEventEl(i.event,et(e));n&&(n.data("fc-seg",i),i.el=n,o.push(i))})}return o},fgSegHtml:function(){},renderBgSegs:function(t){return this.renderFill("bgEvent",t)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(t,e){return this.view.resolveEventEl(t.event,e)},bgEventSegClasses:function(t){var e=t.event,i=e.source||{};return["fc-bgevent"].concat(e.className,i.className||[])},bgEventSegCss:function(t){return{"background-color":this.getSegSkinCss(t)["background-color"]}},businessHoursSegClasses:function(){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var n=this,i=this.view;et.each({mouseenter:function(t,e){n.triggerSegMouseover(t,e)},mouseleave:function(t,e){n.triggerSegMouseout(t,e)},click:function(t,e){return i.trigger("eventClick",this,t.event,e)},mousedown:function(t,e){et(e.target).is(".fc-resizer")&&i.isEventResizable(t.event)?n.segResizeMousedown(t,e,et(e.target).is(".fc-start-resizer")):i.isEventDraggable(t.event)&&n.segDragMousedown(t,e)}},function(t,i){n.el.on(t,".fc-event-container > *",function(t){var e=et(this).data("fc-seg");if(e&&!n.isDraggingSeg&&!n.isResizingSeg)return i.call(this,e,t)})})},triggerSegMouseover:function(t,e){this.mousedOverSeg||(this.mousedOverSeg=t,this.view.trigger("eventMouseover",t.el[0],t.event,e))},triggerSegMouseout:function(t,e){e=e||{},this.mousedOverSeg&&(t=t||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",t.el[0],t.event,e))},segDragMousedown:function(n,t){var r,s=this,o=this.view,a=o.calendar,e=n.el,l=n.event,d=new de(n.el,{parentEl:o.el,opacity:o.opt("dragOpacity"),revertDuration:o.opt("dragRevertDuration"),zIndex:2});new le(o,{distance:5,scroll:o.opt("dragScroll"),subjectEl:e,subjectCenter:!0,listenStart:function(t){d.hide(),d.start(t)},dragStart:function(t){s.triggerSegMouseout(n,t),s.segDragStart(n,t),o.hideEvent(l)},hitOver:function(t,e,i){n.hit&&(i=n.hit),(r=s.computeEventDrop(i.component.getHitSpan(i),t.component.getHitSpan(t),l))&&!a.isEventSpanAllowed(s.eventToSpan(r),l)&&(p(),r=null),r&&o.renderDrag(r,n)?d.hide():d.show(),e&&(r=null)},hitOut:function(){o.unrenderDrag(),d.show(),r=null},hitDone:function(){f()},dragStop:function(t){d.stop(!r,function(){o.unrenderDrag(),o.showEvent(l),s.segDragStop(n,t),r&&o.reportEventDrop(l,r,this.largeUnit,e,t)})},listenStop:function(){d.stop()}}).mousedown(t)},segDragStart:function(t,e){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",t.el[0],t.event,e,{})},segDragStop:function(t,e){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",t.el[0],t.event,e,{})},computeEventDrop:function(t,e,i){var n,r,s=this.view.calendar,o=t.start,a=e.start;return o.hasTime()===a.hasTime()?(n=this.diffDates(a,o),i.allDay&&I(n)?(r={start:i.start.clone(),end:s.getEventEnd(i),allDay:!1},s.normalizeEventTimes(r)):r={start:i.start.clone(),end:i.end?i.end.clone():null,allDay:i.allDay},r.start.add(n),r.end&&r.end.add(n)):r={start:a.clone(),end:null,allDay:!a.hasTime()},r},applyDragOpacity:function(t){var i=this.view.opt("dragOpacity");null!=i&&t.each(function(t,e){e.style.opacity=i})},externalDragStart:function(t,e){var i,n,r=this.view;r.opt("droppable")&&(i=et((e?e.item:null)||t.target),n=r.opt("dropAccept"),(et.isFunction(n)?n.call(i[0],i):i.is(n))&&(this.isDraggingExternal||this.listenToExternalDrag(i,t,e)))},listenToExternalDrag:function(t,e,i){var n,r=this,s=this.view.calendar,o=Tt(t);new le(this,{listenStart:function(){r.isDraggingExternal=!0},hitOver:function(t){(n=r.computeExternalDrop(t.component.getHitSpan(t),o))&&!s.isExternalSpanAllowed(r.eventToSpan(n),n,o.eventProps)&&(p(),n=null),n&&r.renderDrag(n)},hitOut:function(){n=null},hitDone:function(){f(),r.unrenderDrag()},dragStop:function(){n&&r.view.reportExternalDrop(o,n,t,e,i)},listenStop:function(){r.isDraggingExternal=!1}}).startDrag(e)},computeExternalDrop:function(t,e){var i={start:this.view.calendar.applyTimezone(t.start),end:null};return e.startTime&&!i.start.hasTime()&&i.start.time(e.startTime),e.duration&&(i.end=i.start.clone().add(e.duration)),i},renderDrag:function(){},unrenderDrag:function(){},segResizeMousedown:function(s,t,o){var a,l=this,d=this.view,h=d.calendar,e=s.el,c=s.event,u=h.getEventEnd(c);new le(this,{distance:5,scroll:d.opt("dragScroll"),subjectEl:e,dragStart:function(t){l.triggerSegMouseout(s,t),l.segResizeStart(s,t)},hitOver:function(t,e,i){var n=l.getHitSpan(i),r=l.getHitSpan(t);(a=o?l.computeEventStartResize(n,r,c):l.computeEventEndResize(n,r,c))&&(h.isEventSpanAllowed(l.eventToSpan(a),c)?a.start.isSame(c.start)&&a.end.isSame(u)&&(a=null):(p(),a=null)),a&&(d.hideEvent(c),l.renderEventResize(a,s))},hitOut:function(){a=null},hitDone:function(){l.unrenderEventResize(),d.showEvent(c),f()},dragStop:function(t){l.segResizeStop(s,t),a&&d.reportEventResize(c,a,this.largeUnit,e,t)}}).mousedown(t)},segResizeStart:function(t,e){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",t.el[0],t.event,e,{})},segResizeStop:function(t,e){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",t.el[0],t.event,e,{})},computeEventStartResize:function(t,e,i){return this.computeEventResize("start",t,e,i)},computeEventEndResize:function(t,e,i){return this.computeEventResize("end",t,e,i)},computeEventResize:function(t,e,i,n){var r,s,o=this.view.calendar,a=this.diffDates(i[t],e[t]);return(r={start:n.start.clone(),end:o.getEventEnd(n),allDay:n.allDay}).allDay&&I(a)&&(r.allDay=!1,o.normalizeEventTimes(r)),r[t].add(a),r.start.isBefore(r.end)||(s=this.minResizeDuration||(n.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration),"start"==t?r.start=r.end.clone().subtract(s):r.end=r.start.clone().add(s)),r},renderEventResize:function(){},unrenderEventResize:function(){},getEventTimeText:function(t,e,i){return null==e&&(e=this.eventTimeFormat),null==i&&(i=this.displayEventEnd),this.displayEventTime&&t.start.hasTime()?i&&t.end?this.view.formatRange(t,e):t.start.format(e):""},getSegClasses:function(t,e,i){var n=t.event,r=["fc-event",t.isStart?"fc-start":"fc-not-start",t.isEnd?"fc-end":"fc-not-end"].concat(n.className,n.source?n.source.className:[]);return e&&r.push("fc-draggable"),i&&r.push("fc-resizable"),r},getSegSkinCss:function(t){var e=t.event,i=this.view,n=e.source||{},r=e.color,s=n.color,o=i.opt("eventColor");return{"background-color":e.backgroundColor||r||n.backgroundColor||s||i.opt("eventBackgroundColor")||o,"border-color":e.borderColor||r||n.borderColor||s||i.opt("eventBorderColor")||o,color:e.textColor||n.textColor||i.opt("eventTextColor")}},eventToSegs:function(t){return this.eventsToSegs([t])},eventToSpan:function(t){return this.eventToSpans(t)[0]},eventToSpans:function(t){var e=this.eventToRange(t);return this.eventRangeToSpans(e,t)},eventsToSegs:function(t,r){var s=this,e=Dt(t),o=[];return et.each(e,function(t,e){var i,n=[];for(i=0;i<e.length;i++)n.push(s.eventToRange(e[i]));if(Ct(e[0]))for(n=s.invertRanges(n),i=0;i<n.length;i++)o.push.apply(o,s.eventRangeToSegs(n[i],e[0],r));else for(i=0;i<n.length;i++)o.push.apply(o,s.eventRangeToSegs(n[i],e[i],r))}),o},eventToRange:function(t){return{start:t.start.clone().stripZone(),end:(t.end?t.end.clone():this.view.calendar.getDefaultEventEnd(null!=t.allDay?t.allDay:!t.start.hasTime(),t.start)).stripZone()}},eventRangeToSegs:function(t,e,i){var n,r=this.eventRangeToSpans(t,e),s=[];for(n=0;n<r.length;n++)s.push.apply(s,this.eventSpanToSegs(r[n],e,i));return s},eventRangeToSpans:function(t){return[et.extend({},t)]},eventSpanToSegs:function(t,e,i){var n,r,s=i?i(t):this.spanToSegs(t);for(n=0;n<s.length;n++)(r=s[n]).event=e,r.eventStartMS=+t.start,r.eventDurationMS=t.end-t.start;return s},invertRanges:function(t){var e,i,n=this.view,r=n.start.clone(),s=n.end.clone(),o=[],a=r;for(t.sort(Et),e=0;e<t.length;e++)(i=t[e]).start>a&&o.push({start:a,end:i.start}),a=i.end;return a<s&&o.push({start:a,end:s}),o},sortEventSegs:function(t){t.sort(K(this,"compareEventSegs"))},compareEventSegs:function(t,e){return t.eventStartMS-e.eventStartMS||e.eventDurationMS-t.eventDurationMS||e.event.allDay-t.event.allDay||D(t.event,e.event,this.view.eventOrderSpecs)}}),At.isBgEvent=St,At.dataAttrPrefix="";var ce=At.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var t,e,i,n=this.view,r=this.start.clone(),s=-1,o=[],a=[];r.isBefore(this.end);)n.isHiddenDay(r)?o.push(s+.5):(s++,o.push(s),a.push(r.clone())),r.add(1,"days");if(this.breakOnWeeks){for(e=a[0].day(),t=1;t<a.length&&a[t].day()!=e;t++);i=Math.ceil(a.length/t)}else i=1,t=a.length;this.dayDates=a,this.dayIndices=o,this.daysPerRow=t,this.rowCnt=i,this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(t,e){return this.dayDates[this.getCellDayIndex(t,e)].clone()},getCellRange:function(t,e){var i=this.getCellDate(t,e),n=i.clone().add(1,"days");return{start:i,end:n}},getCellDayIndex:function(t,e){return t*this.daysPerRow+this.getColDayIndex(e)},getColDayIndex:function(t){return this.isRTL?this.colCnt-1-t:t},getDateDayIndex:function(t){var e=this.dayIndices,i=t.diff(this.start,"days");return i<0?e[0]-1:i>=e.length?e[e.length-1]+1:e[i]},computeColHeadFormat:function(){return 1<this.rowCnt||10<this.colCnt?"ddd":1<this.colCnt?this.view.opt("dayOfMonthFormat"):"dddd"},sliceRangeByRow:function(t){var e,i,n,r,s,o=this.daysPerRow,a=this.view.computeDayRange(t),l=this.getDateDayIndex(a.start),d=this.getDateDayIndex(a.end.clone().subtract(1,"days")),h=[];for(e=0;e<this.rowCnt;e++)n=(i=e*o)+o-1,r=Math.max(l,i),s=Math.min(d,n),(r=Math.ceil(r))<=(s=Math.floor(s))&&h.push({row:e,firstRowDayIndex:r-i,lastRowDayIndex:s-i,isStart:r===l,isEnd:s===d});return h},sliceRangeByDay:function(t){var e,i,n,r,s,o,a=this.daysPerRow,l=this.view.computeDayRange(t),d=this.getDateDayIndex(l.start),h=this.getDateDayIndex(l.end.clone().subtract(1,"days")),c=[];for(e=0;e<this.rowCnt;e++)for(n=(i=e*a)+a-1,r=i;r<=n;r++)s=Math.max(d,r),o=Math.min(h,r),(s=Math.ceil(s))<=(o=Math.floor(o))&&c.push({row:e,firstRowDayIndex:s-i,lastRowDayIndex:o-i,isStart:s===d,isEnd:o===h});return c},renderHeadHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var t,e,i=[];for(t=0;t<this.colCnt;t++)e=this.getCellDate(0,t),i.push(this.renderHeadDateCellHtml(e));return i.join("")},renderHeadDateCellHtml:function(t,e,i){return'<th class="fc-day-header '+this.view.widgetHeaderClass+" fc-"+Bt[t.day()]+'"'+(1==this.rowCnt?' data-date="'+t.format("YYYY-MM-DD")+'"':"")+(1<e?' colspan="'+e+'"':"")+(i?" "+i:"")+">"+U(t.format(this.colHeadFormat))+"</th>"},renderBgTrHtml:function(t){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(t))+this.renderBgCellsHtml(t)+(this.isRTL?this.renderBgIntroHtml(t):"")+"</tr>"},renderBgIntroHtml:function(){return this.renderIntroHtml()},renderBgCellsHtml:function(t){var e,i,n=[];for(e=0;e<this.colCnt;e++)i=this.getCellDate(t,e),n.push(this.renderBgCellHtml(i));return n.join("")},renderBgCellHtml:function(t,e){var i=this.view,n=this.getDayClasses(t);return n.unshift("fc-day",i.widgetContentClass),'<td class="'+n.join(" ")+'" data-date="'+t.format("YYYY-MM-DD")+'"'+(e?" "+e:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(t){var e=this.renderIntroHtml();e&&(this.isRTL?t.append(e):t.prepend(e))}},ue=At.DayGrid=he.extend(ce,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(t){var e,i,n=this.view,r=this.rowCnt,s=this.colCnt,o="";for(e=0;e<r;e++)o+=this.renderDayRowHtml(e,t);for(this.el.html(o),this.rowEls=this.el.find(".fc-row"),this.cellEls=this.el.find(".fc-day"),this.rowCoordCache=new oe({els:this.rowEls,isVertical:!0}),this.colCoordCache=new oe({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),e=0;e<r;e++)for(i=0;i<s;i++)n.trigger("dayRender",null,this.getCellDate(e,i),this.getCellEl(e,i))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var t=this.view.calendar.getBusinessHoursEvents(!0),e=this.eventsToSegs(t);this.renderFill("businessHours",e,"bgevent")},renderDayRowHtml:function(t,e){var i=["fc-row","fc-week",this.view.widgetContentClass];return e&&i.push("fc-rigid"),'<div class="'+i.join(" ")+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(t)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(t)+"</thead>":"")+"</table></div></div>"},renderNumberTrHtml:function(t){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(t))+this.renderNumberCellsHtml(t)+(this.isRTL?this.renderNumberIntroHtml(t):"")+"</tr>"},renderNumberIntroHtml:function(){return this.renderIntroHtml()},renderNumberCellsHtml:function(t){var e,i,n=[];for(e=0;e<this.colCnt;e++)i=this.getCellDate(t,e),n.push(this.renderNumberCellHtml(i));return n.join("")},renderNumberCellHtml:function(t){var e;return this.view.dayNumbersVisible?((e=this.getDayClasses(t)).unshift("fc-day-number"),'<td class="'+e.join(" ")+'" data-date="'+t.format()+'">'+t.date()+"</td>"):"<td/>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(t){var e,i,n=this.sliceRangeByRow(t);for(e=0;e<n.length;e++)i=n[e],this.isRTL?(i.leftCol=this.daysPerRow-1-i.lastRowDayIndex,i.rightCol=this.daysPerRow-1-i.firstRowDayIndex):(i.leftCol=i.firstRowDayIndex,i.rightCol=i.lastRowDayIndex);return n},prepareHits:function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},queryHit:function(t,e){var i=this.colCoordCache.getHorizontalIndex(t),n=this.rowCoordCache.getVerticalIndex(e);if(null!=n&&null!=i)return this.getCellHit(n,i)},getHitSpan:function(t){return this.getCellRange(t.row,t.col)},getHitEl:function(t){return this.getCellEl(t.row,t.col)},getCellHit:function(t,e){return{row:t,col:e,component:this,left:this.colCoordCache.getLeftOffset(e),right:this.colCoordCache.getRightOffset(e),top:this.rowCoordCache.getTopOffset(t),bottom:this.rowCoordCache.getBottomOffset(t)}},getCellEl:function(t,e){return this.cellEls.eq(t*this.colCnt+e)},renderDrag:function(t,e){if(this.renderHighlight(this.eventToSpan(t)),e&&!e.el.closest(this.el).length)return this.renderEventLocationHelper(t,e),this.applyDragOpacity(this.helperEls),!0},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(t,e){this.renderHighlight(this.eventToSpan(t)),this.renderEventLocationHelper(t,e)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(t,s){var o,a=[],e=this.eventToSegs(t);e=this.renderFgSegEls(e),o=this.renderSegRows(e),this.rowEls.each(function(t,e){var i,n=et(e),r=et('<div class="fc-helper-skeleton"><table/></div>');i=s&&s.row===t?s.el.position().top:n.find(".fc-content-skeleton tbody").position().top,r.css("top",i).find("table").append(o[t].tbodyEl),n.append(r),a.push(r[0])}),this.helperEls=et(a)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(t,e,i){var n,r,s,o=[];for(e=this.renderFillSegEls(t,e),n=0;n<e.length;n++)r=e[n],s=this.renderFillRow(t,r,i),this.rowEls.eq(r.row).append(s),o.push(s[0]);return this.elsByFill[t]=et(o),e},renderFillRow:function(t,e,i){var n,r,s=this.colCnt,o=e.leftCol,a=e.rightCol+1;return i=i||t.toLowerCase(),r=(n=et('<div class="fc-'+i+'-skeleton"><table><tr/></table></div>')).find("tr"),0<o&&r.append('<td colspan="'+o+'"/>'),r.append(e.el.attr("colspan",a-o)),a<s&&r.append('<td colspan="'+(s-a)+'"/>'),this.bookendCells(r),n}});ue.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),he.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return he.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(t){var e=et.grep(t,function(t){return t.event.allDay});return he.prototype.renderBgSegs.call(this,e)},renderFgSegs:function(t){var i;return t=this.renderFgSegEls(t),i=this.rowStructs=this.renderSegRows(t),this.rowEls.each(function(t,e){et(e).find(".fc-content-skeleton > table").append(i[t].tbodyEl)}),t},unrenderFgSegs:function(){for(var t,e=this.rowStructs||[];t=e.pop();)t.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(t){var e,i,n=[];for(e=this.groupSegRows(t),i=0;i<e.length;i++)n.push(this.renderSegRow(i,e[i]));return n},fgSegHtml:function(t,e){var i,n,r=this.view,s=t.event,o=r.isEventDraggable(s),a=!e&&s.allDay&&t.isStart&&r.isEventResizableFromStart(s),l=!e&&s.allDay&&t.isEnd&&r.isEventResizableFromEnd(s),d=this.getSegClasses(t,o,a||l),h=Z(this.getSegSkinCss(t)),c="";return d.unshift("fc-day-grid-event","fc-h-event"),t.isStart&&(i=this.getEventTimeText(s))&&(c='<span class="fc-time">'+U(i)+"</span>"),n='<span class="fc-title">'+(U(s.title||"")||"&nbsp;")+"</span>",'<a class="'+d.join(" ")+'"'+(s.url?' href="'+U(s.url)+'"':"")+(h?' style="'+h+'"':"")+'><div class="fc-content">'+(this.isRTL?n+" "+c:c+" "+n)+"</div>"+(a?'<div class="fc-resizer fc-start-resizer" />':"")+(l?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(t,e){function i(t){for(;s<t;)(d=(m[n-1]||[])[s])?d.attr("rowspan",parseInt(d.attr("rowspan")||1,10)+1):(d=et("<td/>"),o.append(d)),g[n][s]=d,m[n][s]=d,s++}var n,r,s,o,a,l,d,h=this.colCnt,c=this.buildSegLevels(e),u=Math.max(1,c.length),p=et("<tbody/>"),f=[],g=[],m=[];for(n=0;n<u;n++){if(r=c[n],s=0,o=et("<tr/>"),f.push([]),g.push([]),m.push([]),r)for(a=0;a<r.length;a++){for(i((l=r[a]).leftCol),d=et('<td class="fc-event-container"/>').append(l.el),l.leftCol!=l.rightCol?d.attr("colspan",l.rightCol-l.leftCol+1):m[n][s]=d;s<=l.rightCol;)g[n][s]=d,f[n][s]=l,s++;o.append(d)}i(h),this.bookendCells(o),p.append(o)}return{row:t,tbodyEl:p,cellMatrix:g,segMatrix:f,segLevels:c,segs:e}},buildSegLevels:function(t){var e,i,n,r=[];for(this.sortEventSegs(t),e=0;e<t.length;e++){for(i=t[e],n=0;n<r.length&&kt(i,r[n]);n++);(r[i.level=n]||(r[n]=[])).push(i)}for(n=0;n<r.length;n++)r[n].sort(Rt);return r},groupSegRows:function(t){var e,i=[];for(e=0;e<this.rowCnt;e++)i.push([]);for(e=0;e<t.length;e++)i[t[e].row].push(t[e]);return i}}),ue.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(t){var e,i,n=this.rowStructs||[];for(e=0;e<n.length;e++)this.unlimitRow(e),!1!==(i=!!t&&("number"==typeof t?t:this.computeRowLevelLimit(e)))&&this.limitRow(e,i)},computeRowLevelLimit:function(t){function e(t,e){r=Math.max(r,et(e).outerHeight())}var i,n,r,s=this.rowEls.eq(t).height(),o=this.rowStructs[t].tbodyEl.children();for(i=0;i<o.length;i++)if(n=o.eq(i).removeClass("fc-limited"),r=0,n.find("> td > :first-child").each(e),n.position().top+r>s)return i;return!1},limitRow:function(e,i){function t(t){for(;b<t;)(l=v.getCellSegs(e,b,i)).length&&(c=r[i-1][b],_=v.renderMoreLink(e,b,l),m=et("<div/>").append(_),c.append(m),w.push(m[0])),b++}var n,r,s,o,a,l,d,h,c,u,p,f,g,m,_,v=this,y=this.rowStructs[e],w=[],b=0;if(i&&i<y.segLevels.length){for(n=y.segLevels[i-1],r=y.cellMatrix,s=y.tbodyEl.children().slice(i).addClass("fc-limited").get(),o=0;o<n.length;o++){for(t((a=n[o]).leftCol),h=[],d=0;b<=a.rightCol;)l=this.getCellSegs(e,b,i),h.push(l),d+=l.length,b++;if(d){for(u=(c=r[i-1][a.leftCol]).attr("rowspan")||1,p=[],f=0;f<h.length;f++)g=et('<td class="fc-more-cell"/>').attr("rowspan",u),l=h[f],_=this.renderMoreLink(e,a.leftCol+f,[a].concat(l)),m=et("<div/>").append(_),g.append(m),p.push(g[0]),w.push(g[0]);c.addClass("fc-limited").after(et(p)),s.push(c[0])}}t(this.colCnt),y.moreEls=et(w),y.limitedEls=et(s)}},unlimitRow:function(t){var e=this.rowStructs[t];e.moreEls&&(e.moreEls.remove(),e.moreEls=null),e.limitedEls&&(e.limitedEls.removeClass("fc-limited"),e.limitedEls=null)},renderMoreLink:function(l,d,h){var c=this,u=this.view;return et('<a class="fc-more"/>').text(this.getMoreLinkText(h.length)).on("click",function(t){var e=u.opt("eventLimitClick"),i=c.getCellDate(l,d),n=et(this),r=c.getCellEl(l,d),s=c.getCellSegs(l,d),o=c.resliceDaySegs(s,i),a=c.resliceDaySegs(h,i);"function"==typeof e&&(e=u.trigger("eventLimitClick",null,{date:i,dayEl:r,moreEl:n,segs:o,hiddenSegs:a},t)),"popover"===e?c.showSegPopover(l,d,n,o):"string"==typeof e&&u.calendar.zoomTo(i,e)})},showSegPopover:function(t,e,i,n){var r,s,o=this,a=this.view,l=i.parent();r=1==this.rowCnt?a.el:this.rowEls.eq(t),s={className:"fc-more-popover",content:this.renderSegPopoverContent(t,e,n),parentEl:this.el,top:r.offset().top,autoHide:!0,viewportConstrain:a.opt("popoverViewportConstrain"),hide:function(){o.segPopover.removeElement(),o.segPopover=null,o.popoverSegs=null}},this.isRTL?s.right=l.offset().left+l.outerWidth()+1:s.left=l.offset().left-1,this.segPopover=new se(s),this.segPopover.show()},renderSegPopoverContent:function(t,e,i){var n,r=this.view,s=r.opt("theme"),o=this.getCellDate(t,e).format(r.opt("dayPopoverFormat")),a=et('<div class="fc-header '+r.widgetHeaderClass+'"><span class="fc-close '+(s?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+U(o)+'</span><div class="fc-clear"/></div><div class="fc-body '+r.widgetContentClass+'"><div class="fc-event-container"></div></div>'),l=a.find(".fc-event-container");for(i=this.renderFgSegEls(i,!0),this.popoverSegs=i,n=0;n<i.length;n++)this.prepareHits(),i[n].hit=this.getCellHit(t,e),this.releaseHits(),l.append(i[n].el);return a},resliceDaySegs:function(t,e){var i=et.map(t,function(t){return t.event}),n=e.clone(),r=n.clone().add(1,"days"),s={start:n,end:r};return t=this.eventsToSegs(i,function(t){var e=k(t,s);return e?[e]:[]}),this.sortEventSegs(t),t},getMoreLinkText:function(t){var e=this.view.opt("eventLimitText");return"function"==typeof e?e(t):"+"+t+" "+e},getCellSegs:function(t,e,i){for(var n,r=this.rowStructs[t].segMatrix,s=i||0,o=[];s<r.length;)(n=r[s][e])&&o.push(n),s++;return o}});var pe=At.TimeGrid=he.extend(ce,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){he.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.colEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr"),this.colCoordCache=new oe({els:this.colEls,isHorizontal:!0}),this.slatCoordCache=new oe({els:this.slatEls,isVertical:!0}),this.renderContentSkeleton()},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+"</table></div>"},renderSlatRowHtml:function(){for(var t,e,i,n=this.view,r=this.isRTL,s="",o=it.duration(+this.minTime);o<this.maxTime;)t=this.start.clone().time(o),e=J(M(o,this.labelInterval)),i='<td class="fc-axis fc-time '+n.widgetContentClass+'" '+n.axisStyleAttr()+">"+(e?"<span>"+U(t.format(this.labelFormat))+"</span>":"")+"</td>",s+='<tr data-time="'+t.format("HH:mm:ss")+'"'+(e?"":' class="fc-minor"')+">"+(r?"":i)+'<td class="'+n.widgetContentClass+'"/>'+(r?i:"")+"</tr>",o.add(this.slotDuration);return s},processOptions:function(){var t,e=this.view,i=e.opt("slotDuration"),n=e.opt("snapDuration");i=it.duration(i),n=n?it.duration(n):i,this.slotDuration=i,this.snapDuration=n,this.snapsPerSlot=i/n,this.minResizeDuration=n,this.minTime=it.duration(e.opt("minTime")),this.maxTime=it.duration(e.opt("maxTime")),t=e.opt("slotLabelFormat"),et.isArray(t)&&(t=t[t.length-1]),this.labelFormat=t||e.opt("axisFormat")||e.opt("smallTimeFormat"),t=e.opt("slotLabelInterval"),this.labelInterval=t?it.duration(t):this.computeLabelInterval(i)},computeLabelInterval:function(t){var e,i,n;for(e=Re.length-1;0<=e;e--)if(J(n=M(i=it.duration(Re[e]),t))&&1<n)return i;return it.duration(t)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build(),this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(t,e){var i=this.snapsPerSlot,n=this.colCoordCache,r=this.slatCoordCache,s=n.getHorizontalIndex(t),o=r.getVerticalIndex(e);if(null!=s&&null!=o){var a=r.getTopOffset(o),l=r.getHeight(o),d=(e-a)/l,h=Math.floor(d*i),c=a+h/i*l,u=a+(h+1)/i*l;return{col:s,snap:o*i+h,component:this,left:n.getLeftOffset(s),right:n.getRightOffset(s),top:c,bottom:u}}},getHitSpan:function(t){var e,i=this.getCellDate(0,t.col),n=this.computeSnapTime(t.snap);return i.time(n),e=i.clone().add(this.snapDuration),{start:i,end:e}},getHitEl:function(t){return this.colEls.eq(t.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(t){return it.duration(this.minTime+this.snapDuration*t)},spanToSegs:function(t){var e,i=this.sliceRangeByTimes(t);for(e=0;e<i.length;e++)this.isRTL?i[e].col=this.daysPerRow-1-i[e].dayIndex:i[e].col=i[e].dayIndex;return i},sliceRangeByTimes:function(t){var e,i,n,r=[];for(i=0;i<this.daysPerRow;i++)(e=k(t,{start:(n=this.dayDates[i].clone()).clone().time(this.minTime),end:n.clone().time(this.maxTime
)}))&&(e.dayIndex=i,r.push(e));return r},updateSize:function(t){this.slatCoordCache.build(),t&&this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))},computeDateTop:function(t,e){return this.computeTimeTop(it.duration(t-e.clone().stripTime()))},computeTimeTop:function(t){var e,i,n=this.slatEls.length,r=(t-this.minTime)/this.slotDuration;return r=Math.max(0,r),r=Math.min(n,r),e=Math.floor(r),i=r-(e=Math.min(e,n-1)),this.slatCoordCache.getTopPosition(e)+this.slatCoordCache.getHeight(e)*i},renderDrag:function(t,e){if(e){this.renderEventLocationHelper(t,e);for(var i=0;i<this.helperSegs.length;i++)this.applyDragOpacity(this.helperSegs[i].el);return!0}this.renderHighlight(this.eventToSpan(t))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(t,e){this.renderEventLocationHelper(t,e)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(t,e){this.renderHelperSegs(this.eventToSegs(t),e)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){var t=this.view.calendar.getBusinessHoursEvents(),e=this.eventsToSegs(t);this.renderBusinessSegs(e)},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(t){var e,i=this.spanToSegs({start:t,end:t}),n=this.computeDateTop(t,t),r=[];for(e=0;e<i.length;e++)r.push(et('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",n).appendTo(this.colContainerEls.eq(i[e].col))[0]);0<i.length&&r.push(et('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",n).appendTo(this.el.find(".fc-content-skeleton"))[0]),this.nowIndicatorEls=et(r)},unrenderNowIndicator:function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},renderSelection:function(t){this.view.opt("selectHelper")?this.renderEventLocationHelper(t):this.renderHighlight(t)},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderHighlight:function(t){this.renderHighlightSegs(this.spanToSegs(t))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});pe.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var t,e,i="";for(t=0;t<this.colCnt;t++)i+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';e=et('<div class="fc-content-skeleton"><table><tr>'+i+"</tr></table></div>"),this.colContainerEls=e.find(".fc-content-col"),this.helperContainerEls=e.find(".fc-helper-container"),this.fgContainerEls=e.find(".fc-event-container:not(.fc-helper-container)"),this.bgContainerEls=e.find(".fc-bgevent-container"),this.highlightContainerEls=e.find(".fc-highlight-container"),this.businessContainerEls=e.find(".fc-business-container"),this.bookendCells(e.find("tr")),this.el.append(e)},renderFgSegs:function(t){return t=this.renderFgSegsIntoContainers(t,this.fgContainerEls),this.fgSegs=t},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(t,e){var i,n,r;for(t=this.renderFgSegsIntoContainers(t,this.helperContainerEls),i=0;i<t.length;i++)n=t[i],e&&e.col===n.col&&(r=e.el,n.el.css({left:r.css("left"),right:r.css("right"),"margin-left":r.css("margin-left"),"margin-right":r.css("margin-right")}));this.helperSegs=t},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(t){return t=this.renderFillSegEls("bgEvent",t),this.updateSegVerticals(t),this.attachSegsByCol(this.groupSegsByCol(t),this.bgContainerEls),this.bgSegs=t},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(t){t=this.renderFillSegEls("highlight",t),this.updateSegVerticals(t),this.attachSegsByCol(this.groupSegsByCol(t),this.highlightContainerEls),this.highlightSegs=t},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(t){t=this.renderFillSegEls("businessHours",t),this.updateSegVerticals(t),this.attachSegsByCol(this.groupSegsByCol(t),this.businessContainerEls),this.businessSegs=t},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(t){var e,i=[];for(e=0;e<this.colCnt;e++)i.push([]);for(e=0;e<t.length;e++)i[t[e].col].push(t[e]);return i},attachSegsByCol:function(t,e){var i,n,r;for(i=0;i<this.colCnt;i++)for(n=t[i],r=0;r<n.length;r++)e.eq(i).append(n[r].el)},unrenderNamedSegs:function(t){var e,i=this[t];if(i){for(e=0;e<i.length;e++)i[e].el.remove();this[t]=null}},renderFgSegsIntoContainers:function(t,e){var i,n;for(t=this.renderFgSegEls(t),i=this.groupSegsByCol(t),n=0;n<this.colCnt;n++)this.updateFgSegCoords(i[n]);return this.attachSegsByCol(i,e),t},fgSegHtml:function(t,e){var i,n,r,s=this.view,o=t.event,a=s.isEventDraggable(o),l=!e&&t.isStart&&s.isEventResizableFromStart(o),d=!e&&t.isEnd&&s.isEventResizableFromEnd(o),h=this.getSegClasses(t,a,l||d),c=Z(this.getSegSkinCss(t));return h.unshift("fc-time-grid-event","fc-v-event"),s.isMultiDayEvent(o)?(t.isStart||t.isEnd)&&(i=this.getEventTimeText(t),n=this.getEventTimeText(t,"LT"),r=this.getEventTimeText(t,null,!1)):(i=this.getEventTimeText(o),n=this.getEventTimeText(o,"LT"),r=this.getEventTimeText(o,null,!1)),'<a class="'+h.join(" ")+'"'+(o.url?' href="'+U(o.url)+'"':"")+(c?' style="'+c+'"':"")+'><div class="fc-content">'+(i?'<div class="fc-time" data-start="'+U(r)+'" data-full="'+U(n)+'"><span>'+U(i)+"</span></div>":"")+(o.title?'<div class="fc-title">'+U(o.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(d?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(t){this.computeSegVerticals(t),this.assignSegVerticals(t)},computeSegVerticals:function(t){var e,i;for(e=0;e<t.length;e++)(i=t[e]).top=this.computeDateTop(i.start,i.start),i.bottom=this.computeDateTop(i.end,i.start)},assignSegVerticals:function(t){var e,i;for(e=0;e<t.length;e++)(i=t[e]).el.css(this.generateSegVerticalCss(i))},generateSegVerticalCss:function(t){return{top:t.top,bottom:-t.bottom}},updateFgSegCoords:function(t){this.computeSegVerticals(t),this.computeFgSegHorizontals(t),this.assignSegVerticals(t),this.assignFgSegHorizontals(t)},computeFgSegHorizontals:function(t){var e,i,n;if(this.sortEventSegs(t),Ht(e=$t(t)),i=e[0]){for(n=0;n<i.length;n++)Mt(i[n]);for(n=0;n<i.length;n++)this.computeFgSegForwardBack(i[n],0,0)}},computeFgSegForwardBack:function(t,e,i){var n,r=t.forwardSegs;if(t.forwardCoord===undefined)for(r.length?(this.sortForwardSegs(r),this.computeFgSegForwardBack(r[0],e+1,i),t.forwardCoord=r[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-i)/(e+1),n=0;n<r.length;n++)this.computeFgSegForwardBack(r[n],0,t.forwardCoord)},sortForwardSegs:function(t){t.sort(K(this,"compareForwardSegs"))},compareForwardSegs:function(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||this.compareEventSegs(t,e)},assignFgSegHorizontals:function(t){var e,i;for(e=0;e<t.length;e++)(i=t[e]).el.css(this.generateFgSegHorizontalCss(i)),i.bottom-i.top<30&&i.el.addClass("fc-short")},generateFgSegHorizontalCss:function(t){var e,i,n=this.view.opt("slotEventOverlap"),r=t.backwardCoord,s=t.forwardCoord,o=this.generateSegVerticalCss(t);return n&&(s=Math.min(1,r+2*(s-r))),this.isRTL?(e=1-s,i=r):(e=r,i=1-s),o.zIndex=t.level+1,o.left=100*e+"%",o.right=100*i+"%",n&&t.forwardPressure&&(o[this.isRTL?"marginLeft":"marginRight"]=20),o}});var fe=At.View=_t.extend({type:null,name:null,title:null,calendar:null,options:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,eventOrderSpecs:null,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(t,e,i,n){this.calendar=t,this.type=this.name=e,this.options=i,this.intervalDuration=n||it.duration(1,"day"),this.nextDayThreshold=it.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=x(this.opt("eventOrder")),this.documentMousedownProxy=K(this,"documentMousedown"),this.initialize()},initialize:function(){},opt:function(t){return this.options[t]},trigger:function(t,e){var i=this.calendar;return i.trigger.apply(i,[t,e||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(t){this.setRange(this.computeRange(t))},setRange:function(t){et.extend(this,t),this.updateTitle()},computeRange:function(t){var e,i,n=R(this.intervalDuration),r=t.clone().startOf(n),s=r.clone().add(this.intervalDuration);return/year|month|week|day/.test(n)?(r.stripTime(),s.stripTime()):(r.hasTime()||(r=this.calendar.time(0)),s.hasTime()||(s=this.calendar.time(0))),e=r.clone(),e=this.skipHiddenDays(e),i=s.clone(),{intervalUnit:n,intervalStart:r,intervalEnd:s,start:e,end:i=this.skipHiddenDays(i,-1,!0)}},computePrevDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(t,e){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(t)&&(t=this.skipHiddenDays(t,e)).startOf("day"),t},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.calendar.applyTimezone(this.intervalStart),end:this.calendar.applyTimezone(this.intervalEnd)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):1<this.intervalDuration.as("days")?"ll":"LL"},formatRange:function(t,e,i){var n=t.end;return n.hasTime()||(n=n.clone().subtract(1)),ut(t.start,n,e,i,this.opt("isRTL"))},setElement:function(t){this.el=t,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(t){var e=this,i=null;return this.displaying&&(i=this.queryScroll()),this.calendar.freezeContentHeight(),this.clear().then(function(){return e.displaying=et.when(e.displayView(t)).then(function(){e.forceScroll(e.computeInitialScroll(i)),e.calendar.unfreezeContentHeight(),e.triggerRender()})})},clear:function(){var t=this,e=this.displaying;return e?e.then(function(){return t.displaying=null,t.clearEvents(),t.clearView()}):et.when()},displayView:function(t){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),t&&this.setDate(t),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours(),this.startNowIndicator()},clearView:function(){this.unselect(),this.stopNowIndicator(),this.triggerUnrender(),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){et(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){et(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var t=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=t+"-widget-header",this.widgetContentClass=t+"-widget-content",this.highlightStateClass=t+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var t,e,i,n=this;this.opt("nowIndicator")&&(t=this.getNowIndicatorUnit())&&(e=K(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=+new Date,this.renderNowIndicator(this.initialNowDate),this.isNowIndicatorRendered=!0,i=this.initialNowDate.clone().startOf(t).add(1,t)-this.initialNowDate,this.nowIndicatorTimeoutID=setTimeout(function(){n.nowIndicatorTimeoutID=null,e(),i=+it.duration(1,t),i=Math.max(100,i),n.nowIndicatorIntervalID=setInterval(e,i)},i))},updateNowIndicator:function(){this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs)))},stopNowIndicator:function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearTimeout(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},getNowIndicatorUnit:function(){},renderNowIndicator:function(){},unrenderNowIndicator:function(){},updateSize:function(t){var e;t&&(e=this.queryScroll()),this.updateHeight(t),this.updateWidth(t),this.updateNowIndicator(),t&&this.setScroll(e)},updateWidth:function(){},updateHeight:function(){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(){},computeScrollerHeight:function(t){var e,i,n=this.scrollerEl;return(e=this.el.add(n)).css({position:"relative",left:-1}),i=this.el.outerHeight()-n.height(),e.css({position:"",left:""}),t-i},computeInitialScroll:function(){return 0},queryScroll:function(){if(this.scrollerEl)return this.scrollerEl.scrollTop()},setScroll:function(t){if(this.scrollerEl)return this.scrollerEl.scrollTop(t)},forceScroll:function(t){var e=this;this.setScroll(t),setTimeout(function(){e.setScroll(t)},0)},displayEvents:function(t){var e=this.queryScroll();this.clearEvents(),this.renderEvents(t),this.isEventsRendered=!0,this.setScroll(e),this.triggerEventRender()},clearEvents:function(){var t;this.isEventsRendered&&(t=this.queryScroll(),this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.setScroll(t),this.isEventsRendered=!1)},renderEvents:function(){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(t){this.trigger("eventAfterRender",t.event,t.event,t.el)}),this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(t){this.trigger("eventDestroy",t.event,t.event,t.el)})},resolveEventEl:function(t,e){var i=this.trigger("eventRender",t,t,e);return!1===i?e=null:i&&!0!==i&&(e=et(i)),e},showEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","")},t)},hideEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","hidden")},t)},renderedEventSegEach:function(t,e){var i,n=this.getEventSegs();for(i=0;i<n.length;i++)e&&n[i].event._id!==e._id||n[i].el&&t.call(this,n[i])},getEventSegs:function(){return[]},isEventDraggable:function(t){var e=t.source||{};return j(t.startEditable,e.startEditable,this.opt("eventStartEditable"),t.editable,e.editable,this.opt("editable"))},reportEventDrop:function(t,e,i,n,r){var s=this.calendar,o=s.mutateEvent(t,e,i),a=function(){o.undo(),s.reportEventChange()};this.triggerEventDrop(t,o.dateDelta,a,n,r),s.reportEventChange()},triggerEventDrop:function(t,e,i,n,r){this.trigger("eventDrop",n[0],t,e,i,r,{})},reportExternalDrop:function(t,e,i,n,r){var s,o,a=t.eventProps;a&&(s=et.extend({},a,e),o=this.calendar.renderEvent(s,t.stick)[0]),this.triggerExternalDrop(o,e,i,n,r)},triggerExternalDrop:function(t,e,i,n,r){this.trigger("drop",i[0],e.start,n,r),t&&this.trigger("eventReceive",null,t)},renderDrag:function(){},unrenderDrag:function(){},isEventResizableFromStart:function(t){return this.opt("eventResizableFromStart")&&this.isEventResizable(t)},isEventResizableFromEnd:function(t){return this.isEventResizable(t)},isEventResizable:function(t){var e=t.source||{};return j(t.durationEditable,e.durationEditable,this.opt("eventDurationEditable"),t.editable,e.editable,this.opt("editable"))},reportEventResize:function(t,e,i,n,r){var s=this.calendar,o=s.mutateEvent(t,e,i),a=function(){o.undo(),s.reportEventChange()};this.triggerEventResize(t,o.durationDelta,a,n,r),s.reportEventChange()},triggerEventResize:function(t,e,i,n,r){this.trigger("eventResize",n[0],t,e,i,r,{})},select:function(t,e){this.unselect(e),this.renderSelection(t),this.reportSelection(t,e)},renderSelection:function(){},reportSelection:function(t,e){this.isSelected=!0,this.triggerSelect(t,e)},triggerSelect:function(t,e){this.trigger("select",null,this.calendar.applyTimezone(t.start),this.calendar.applyTimezone(t.end),e)},unselect:function(t){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger("unselect",null,t))},unrenderSelection:function(){},documentMousedown:function(t){var e;this.isSelected&&this.opt("unselectAuto")&&y(t)&&((e=this.opt("unselectCancel"))&&et(t.target).closest(e).length||this.unselect(t))},triggerDayClick:function(t,e,i){this.trigger("dayClick",e,this.calendar.applyTimezone(t.start),i)},initHiddenDays:function(){var t,e=this.opt("hiddenDays")||[],i=[],n=0;for(!1===this.opt("weekends")&&e.push(0,6),t=0;t<7;t++)(i[t]=-1!==et.inArray(t,e))||n++;if(!n)throw"invalid hiddenDays";this.isHiddenDayHash=i},isHiddenDay:function(t){return it.isMoment(t)&&(t=t.day()),this.isHiddenDayHash[t]},skipHiddenDays:function(t,e,i){var n=t.clone();for(e=e||1;this.isHiddenDayHash[(n.day()+(i?e:0)+7)%7];)n.add(e,"days");return n},computeDayRange:function(t){var e,i=t.start.clone().stripTime(),n=t.end,r=null;return n&&(r=n.clone().stripTime(),(e=+n.time())&&e>=this.nextDayThreshold&&r.add(1,"days")),(!n||r<=i)&&(r=i.clone().add(1,"days")),{start:i,end:r}},isMultiDayEvent:function(t){var e=this.computeDayRange(t);return 1<e.end.diff(e.start,"days")}}),ge=At.Calendar=_t.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:Ft,initialize:function(){},initOptions:function(t){var e,i,n;e=(t=r(t)).lang,(i=me[e])||(e=ge.defaults.lang,i=me[e]||{}),n=j(t.isRTL,i.isRTL,ge.defaults.isRTL)?ge.rtlDefaults:{},this.dirDefaults=n,this.langDefaults=i,this.overrides=t,this.options=h([ge.defaults,n,i,t]),Gt(this.options),this.viewSpecCache={}},getViewSpec:function(t){var e=this.viewSpecCache;return e[t]||(e[t]=this.buildViewSpec(t))},getUnitViewSpec:function(t){var e,i,n;if(-1!=et.inArray(t,jt))for(e=this.header.getViewsWithButtons(),et.each(At.views,function(t){e.push(t)}),i=0;i<e.length;i++)if((n=this.getViewSpec(e[i]))&&n.singleUnit==t)return n},buildViewSpec:function(t){for(var e,i,n,r,s=this.overrides.views||{},o=[],a=[],l=[],d=t;d;)e=Wt[d],i=s[d],d=null,"function"==typeof e&&(e={"class":e}),e&&(o.unshift(e),a.unshift(e.defaults||{}),n=n||e.duration,d=d||e.type),i&&(l.unshift(i),n=n||i.duration,d=d||i.type);return(e=G(o)).type=t,!!e["class"]&&(n&&(n=it.duration(n)).valueOf()&&(r=R(e.duration=n),1===n.as(r)&&(e.singleUnit=r,l.unshift(s[r]||{}))),e.defaults=h(a),e.overrides=h(l),this.buildViewSpecOptions(e),this.buildViewSpecButtonText(e,t),e)},buildViewSpecOptions:function(t){t.options=h([ge.defaults,t.defaults,this.dirDefaults,this.langDefaults,this.overrides,t.overrides]),Gt(t.options)},buildViewSpecButtonText:function(i,n){function t(t){var e=t.buttonText||{};return e[n]||(i.singleUnit?e[i.singleUnit]:null)}i.buttonTextOverride=t(this.overrides)||i.overrides.buttonText,i.buttonTextDefault=t(this.langDefaults)||t(this.dirDefaults)||i.defaults.buttonText||t(ge.defaults)||(i.duration?this.humanizeDuration(i.duration):null)||n},instantiateView:function(t){var e=this.getViewSpec(t);return new e["class"](this,t,e.options,e.duration)},isValidViewType:function(t){return Boolean(this.getViewSpec(t))},pushLoading:function(){this.loadingLevel++||this.trigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.trigger("loading",null,!1,this.view)},buildSelectSpan:function(t,e){var i,n=this.moment(t).stripZone();return i=e?this.moment(e).stripZone():n.hasTime()?n.clone().add(this.defaultTimedEventDuration):n.clone().add(this.defaultAllDayEventDuration),{start:n,end:i}}});ge.mixin(re),ge.defaults={titleRangeSeparator:" \u2014 ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},ge.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},ge.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var me=At.langs={};At.datepickerLang=function(t,e,i){var n=me[t]||(me[t]={});n.isRTL=i.isRTL,n.weekNumberTitle=i.weekHeader,et.each(_e,function(t,e){n[t]=e(i)}),et.datepicker&&(et.datepicker.regional[e]=et.datepicker.regional[t]=i,et.datepicker.regional.en=et.datepicker.regional[""],et.datepicker.setDefaults(i))},At.lang=function(t,e){var i,n;i=me[t]||(me[t]={}),e&&(i=me[t]=h([i,e])),n=Yt(t),et.each(ve,function(t,e){null==i[t]&&(i[t]=e(n,i))}),ge.defaults.lang=t};var _e={buttonText:function(t){return{prev:q(t.prevText),next:q(t.nextText),today:q(t.currentText)}},monthYearFormat:function(t){return t.showMonthAfterYear?"YYYY["+t.yearSuffix+"] MMMM":"MMMM YYYY["+t.yearSuffix+"]"}},ve={dayOfMonthFormat:function(t,e){var i=t.longDateFormat("l");return i=i.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),e.isRTL?i+=" ddd":i="ddd "+i,i},mediumTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(t){return t.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"")}},ye={smallDayDateFormat:function(t){return t.isRTL?"D dd":"dd D"},weekFormat:function(t){return t.isRTL?"w[ "+t.weekNumberTitle+"]":"["+t.weekNumberTitle+" ]w"},smallWeekFormat:function(t){return t.isRTL?"w["+t.weekNumberTitle+"]":"["+t.weekNumberTitle+"]w"}};At.lang("en",ge.englishDefaults),At.sourceNormalizers=[];var we={dataType:"json",cache:!(At.sourceFetchers=[])},be=1;ge.prototype.getPeerEvents=function(t,e){var i,n,r=this.getEventCache(),s=[];for(i=0;i<r.length;i++)n=r[i],e&&e._id===n._id||s.push(n);return s};var Se=At.BasicView=fe.extend({dayGridClass:ue,dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid()},instantiateDayGrid:function(){return new(this.dayGridClass.extend(Ce))(this)},setRange:function(t){fe.prototype.setRange.call(this,t),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(t)},computeRange:function(t){var e=fe.prototype.computeRange.call(this,t);return/year|month/.test(e.intervalUnit)&&(e.start.startOf("week"),e.start=this.skipHiddenDays(e.start),e.end.weekday()&&(e.end.add(1,"week").startOf("week"),e.end=this.skipHiddenDays(e.end,-1,!0))),e},renderDates:function(){this.dayNumbersVisible=1<this.dayGrid.rowCnt,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml()),this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var t=this.opt("eventLimit");return t&&"number"!=typeof t},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=t(this.el.find(".fc-week-number")))},setHeight:function(t,e){var i,n=this.opt("eventLimit");l(this.scrollerEl),o(this.headRowEl),this.dayGrid.removeSegPopover(),n&&"number"==typeof n&&this.dayGrid.limitRows(n),i=this.computeScrollerHeight(t),this.setGridHeight(i,e),n&&"number"!=typeof n&&this.dayGrid.limitRows(n),!e&&a(this.scrollerEl,i)&&(s(this.headRowEl,g(this.scrollerEl)),i=this.computeScrollerHeight(t),this.scrollerEl.height(i))},setGridHeight:function(t,e){e?n(this.dayGrid.rowEls):i(this.dayGrid.rowEls,t,!0)},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(t,e){return this.dayGrid.queryHit(t,e)},getHitSpan:function(t){return this.dayGrid.getHitSpan(t)},getHitEl:function(t){return this.dayGrid.getHitEl(t)},renderEvents:function(t){this.dayGrid.renderEvents(t),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(t,e){return this.dayGrid.renderDrag(t,e)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(t){this.dayGrid.renderSelection(t)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),Ce={renderHeadIntroHtml:function(){var t=this.view;return t.weekNumbersVisible?'<th class="fc-week-number '+t.widgetHeaderClass+'" '+t.weekNumberStyleAttr()+"><span>"+U(t.opt("weekNumberTitle"))+"</span></th>":""},renderNumberIntroHtml:function(t){var e=this.view;return e.weekNumbersVisible?'<td class="fc-week-number" '+e.weekNumberStyleAttr()+"><span>"+this.getCellDate(t,0).format("w")+"</span></td>":""},renderBgIntroHtml:function(){var t=this.view;return t.weekNumbersVisible?'<td class="fc-week-number '+t.widgetContentClass+'" '+t.weekNumberStyleAttr()+"></td>":""},renderIntroHtml:function(){var t=this.view;return t.weekNumbersVisible?'<td class="fc-week-number" '+t.weekNumberStyleAttr()+"></td>":""}},xe=At.MonthView=Se.extend({computeRange:function(t){var e,i=Se.prototype.computeRange.call(this,t);return this.isFixedWeeks()&&(e=Math.ceil(i.end.diff(i.start,"weeks",!0)),i.end.add(6-e,"weeks")),i},setGridHeight:function(t,e){(e=e||"variable"===this.opt("weekMode"))&&(t*=this.rowCnt/6),i(this.dayGrid.rowEls,t,!e)},isFixedWeeks:function(){var t=this.opt("weekMode");return t?"fixed"===t:this.opt("fixedWeekCount")}});Wt.basic={"class":Se},Wt.basicDay={type:"basic",duration:{days:1}},Wt.basicWeek={type:"basic",duration:{weeks:1}},Wt.month={"class":xe,duration:{months:1},defaults:{fixedWeekCount:!0}};var De=At.AgendaView=fe.extend({timeGridClass:pe,timeGrid:null,dayGridClass:ue,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid(),this.opt("allDaySlot")&&(this.dayGrid=this.instantiateDayGrid())},instantiateTimeGrid:function(){return new(this.timeGridClass.extend(Ee))(this)},instantiateDayGrid:function(){return new(this.dayGridClass.extend(Te))(this)},setRange:function(t){fe.prototype.setRange.call(this,t),this.timeGrid.setRange(t),this.dayGrid&&this.dayGrid.setRange(t)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.setElement(this.el.find(".fc-time-grid")),this.timeGrid.renderDates(),this.bottomRuleEl=et('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement())},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours(),this.dayGrid&&this.dayGrid.unrenderBusinessHours()},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(t){this.timeGrid.renderNowIndicator(t)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(t){this.timeGrid.updateSize(t),fe.prototype.updateSize.call(this,t)},updateWidth:function(){this.axisWidth=t(this.el.find(".fc-axis"))},setHeight:function(t,e){var i,n;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),l(this.scrollerEl),o(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),(i=this.opt("eventLimit"))&&"number"!=typeof i&&(i=ke),i&&this.dayGrid.limitRows(i)),e||(n=this.computeScrollerHeight(t),a(this.scrollerEl,n)?(s(this.noScrollRowEls,g(this.scrollerEl)),n=this.computeScrollerHeight(t),this.scrollerEl.height(n)):(this.scrollerEl.height(n).css("overflow","hidden"),this.bottomRuleEl.show()))},computeInitialScroll:function(){var t=it.duration(this.opt("scrollTime")),e=this.timeGrid.computeTimeTop(t);return(e=Math.ceil(e))&&e++,e},prepareHits:function(){this.timeGrid.prepareHits(),this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){this.timeGrid.releaseHits(),this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(t,e){var i=this.timeGrid.queryHit(t,e);return!i&&this.dayGrid&&(i=this.dayGrid.queryHit(t,e)),i},getHitSpan:function(t){return t.component.getHitSpan(t)},getHitEl:function(t){return t.component.getHitEl(t)},renderEvents:function(t){var e,i=[],n=[];for(e=0;e<t.length;e++)t[e].allDay?i.push(t[e]):n.push(t[e]);this.timeGrid.renderEvents(n),this.dayGrid&&this.dayGrid.renderEvents(i),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(t,e){
return t.start.hasTime()?this.timeGrid.renderDrag(t,e):this.dayGrid?this.dayGrid.renderDrag(t,e):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(t){t.start.hasTime()||t.end.hasTime()?this.timeGrid.renderSelection(t):this.dayGrid&&this.dayGrid.renderSelection(t)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),Ee={renderHeadIntroHtml:function(){var t,e=this.view;return e.opt("weekNumbers")?(t=this.start.format(e.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+"><span>"+U(t)+"</span></th>"):'<th class="fc-axis '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var t=this.view;return'<td class="fc-axis '+t.widgetContentClass+'" '+t.axisStyleAttr()+"></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},Te={renderBgIntroHtml:function(){var t=this.view;return'<td class="fc-axis '+t.widgetContentClass+'" '+t.axisStyleAttr()+"><span>"+(t.opt("allDayHtml")||U(t.opt("allDayText")))+"</span></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},ke=5,Re=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];return Wt.agenda={"class":De,defaults:{allDaySlot:!0,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}},Wt.agendaDay={type:"agenda",duration:{days:1}},Wt.agendaWeek={type:"agenda",duration:{weeks:1}},At}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(c){function r(n,t,e,i,r){function s(t,e){var i=e||[{message:t}];(n.googleCalendarError||c.noop).apply(r,i),(r.options.googleCalendarError||c.noop).apply(r,i),f.warn.apply(null,[t].concat(e||[]))}var o,a,l=p+"/"+encodeURIComponent(n.googleCalendarId)+"/events?callback=?",d=n.googleCalendarApiKey||r.options.googleCalendarApiKey,h=n.success;return d?(t.hasZone()||(t=t.clone().utc().add(-1,"day")),e.hasZone()||(e=e.clone().utc().add(1,"day")),i&&"local"!=i&&(a=i.replace(" ","_")),o=c.extend({},n.data||{},{key:d,timeMin:t.format(),timeMax:e.format(),timeZone:a,singleEvents:!0,maxResults:9999}),c.extend({},n,{googleCalendarId:null,url:l,data:o,startParam:!1,endParam:!1,timezoneParam:!1,success:function(t){var e,i,n=[];if(t.error)s("Google Calendar API: "+t.error.message,t.error.errors);else if(t.items&&(c.each(t.items,function(t,e){var i=e.htmlLink;a&&(i=u(i,"ctz="+a)),n.push({id:e.id,title:e.summary,start:e.start.dateTime||e.start.date,end:e.end.dateTime||e.end.date,url:i,location:e.location,description:e.description})}),e=[n].concat(Array.prototype.slice.call(arguments,1)),i=g(h,this,e),c.isArray(i)))return i;return n}})):(s("Specify a googleCalendarApiKey. See http://fullcalendar.io/docs/google_calendar/"),{})}function u(t,n){return t.replace(/(\?.*?)?(#|$)/,function(t,e,i){return(e?e+"&":"?")+n+i})}var p="https://www.googleapis.com/calendar/v3/calendars",f=c.fullCalendar,g=f.applyAll;f.sourceNormalizers.push(function(t){var e,i=t.googleCalendarId,n=t.url;!i&&n&&(/^[^\/]+@([^\/\.]+\.)*(google|googlemail|gmail)\.com$/.test(n)?i=n:((e=/^https:\/\/www.googleapis.com\/calendar\/v3\/calendars\/([^\/]*)/.exec(n))||(e=/^https?:\/\/www.google.com\/calendar\/feeds\/([^\/]*)/.exec(n)))&&(i=decodeURIComponent(e[1])),i&&(t.googleCalendarId=i)),i&&(null==t.editable&&(t.editable=!1),t.url=i)}),f.sourceFetchers.push(function(t,e,i,n){if(t.googleCalendarId)return r(t,e,i,n,this)})}),function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("moment")):t(jQuery,moment)}(function(t,e){!function(){"use strict";(e.defineLocale||e.lang).call(e,"ja",{months:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),weekdaysShort:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),weekdaysMin:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),longDateFormat:{LT:"Ah\u6642m\u5206",LTS:"Ah\u6642m\u5206s\u79d2",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5Ah\u6642m\u5206",LLLL:"YYYY\u5e74M\u6708D\u65e5Ah\u6642m\u5206 dddd"},meridiemParse:/\u5348\u524d|\u5348\u5f8c/i,isPM:function(t){return"\u5348\u5f8c"===t},meridiem:function(t){return t<12?"\u5348\u524d":"\u5348\u5f8c"},calendar:{sameDay:"[\u4eca\u65e5] LT",nextDay:"[\u660e\u65e5] LT",nextWeek:"[\u6765\u9031]dddd LT",lastDay:"[\u6628\u65e5] LT",lastWeek:"[\u524d\u9031]dddd LT",sameElse:"L"},relativeTime:{future:"%s\u5f8c",past:"%s\u524d",s:"\u6570\u79d2",m:"1\u5206",mm:"%d\u5206",h:"1\u6642\u9593",hh:"%d\u6642\u9593",d:"1\u65e5",dd:"%d\u65e5",M:"1\u30f6\u6708",MM:"%d\u30f6\u6708",y:"1\u5e74",yy:"%d\u5e74"}})}(),t.fullCalendar.datepickerLang("ja","ja",{closeText:"\u9589\u3058\u308b",prevText:"&#x3C;\u524d",nextText:"\u6b21&#x3E;",currentText:"\u4eca\u65e5",monthNames:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],monthNamesShort:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayNames:["\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"],dayNamesShort:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],dayNamesMin:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],weekHeader:"\u9031",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"\u5e74"}),t.fullCalendar.lang("ja",{buttonText:{month:"\u6708",week:"\u9031",day:"\u65e5",list:"\u4e88\u5b9a\u30ea\u30b9\u30c8"},allDayText:"\u7d42\u65e5",eventLimitText:function(t){return"\u4ed6 "+t+" \u4ef6"}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):t(jQuery,moment)}(function(y,d){var a,t,e,i,s,o,l,r,h,c,n,f,u,p,g,m,_,v,w,b,S,C,x,D,E,T,k,R,$,H,M,z,I,F,G,Y,L,P,O,A,W,N,V,B,j,U,q,Z,X,Q,J,K,tt,et,it,nt,rt,st,ot,at,lt,dt,ht,ct,ut,pt,ft,gt,mt,_t,vt,yt,wt,bt,St,Ct,xt,Dt,Et,Tt,kt,Rt,$t,Ht,Mt,zt,It,Ft,Gt=[].slice,Yt=function(t,e){function i(){this.constructor=t}for(var n in e)Lt.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},Lt={}.hasOwnProperty;return(c=y.fullCalendar).schedulerVersion="1.2.1",3!==c.internalApiVersion?void c.warn("v"+c.schedulerVersion+" of FullCalendar Scheduler is incompatible with v"+c.version+" of the core.\nPlease see http://fullcalendar.io/support/ for more information."):(t=c.Calendar,i=c.Class,B=c.View,n=c.Grid,ft=c.intersectRanges,K=c.debounce,_t=c.isInt,ht=c.getScrollbarWidths,l=c.DragListener,pt=c.htmlEscape,q=c.computeIntervalUnit,kt=c.proxy,j=c.capitaliseFirstLetter,c.applyAll,r=c.Emitter,rt=c.durationHasTime,nt=c.divideRangeByDuration,it=c.divideDurationByDuration,wt=c.multiplyDuration,Et=c.parseFieldSpecs,U=c.compareByFieldSpecs,st=c.flexibleCompare,gt=c.intersectRects,s=c.CoordCache,ot=function(t){return t.find("> td").filter(function(t,e){return e.rowSpan<=1})},$t=null,bt=function(t,e){var i,n;if(i=t.css("direction"),n=t[0],null!=e){if("rtl"===i)switch($t){case"positive":e=e-n.clientWidth+n.scrollWidth;break;case"reverse":e=-e}return n.scrollLeft=e,t}if(e=n.scrollLeft,"rtl"===i)switch($t){case"positive":e=e+n.clientWidth-n.scrollWidth;break;case"reverse":e=-e}return e},dt=function(t){var e,i,n;if(e=t.css("direction"),n=(i=t[0]).scrollLeft,"rtl"===e)switch($t){case"negative":n=n-i.clientWidth+i.scrollWidth;break;case"reverse":n=-n-i.clientWidth+i.scrollWidth}return n},tt=function(){var t,e,i;return i=0<(e=(t=y('<div style=" position: absolute top: -1000px; width: 1px; height: 1px; overflow: scroll; direction: rtl; font-size: 14px; ">A</div>').appendTo("body"))[0]).scrollLeft?"positive":(e.scrollLeft=1,0<t.scrollLeft?"reverse":"negative"),t.remove(),i},y(function(){return $t=tt()}),P=function(){function t(t,e){this.overflowX=null!=t?t:"auto",this.overflowY=null!=e?e:"auto",this.el=y('<div class="fc-scrollpane"> <div> <div class="fc-scrollpane-inner"> <div class="fc-content"/> <div class="fc-bg"/> </div> </div> </div>'),this.scrollEl=this.el.children(),this.innerEl=this.scrollEl.children(),this.contentEl=this.innerEl.find(".fc-content"),this.bgEl=this.innerEl.find(".fc-bg"),this.scrollEl.on("scroll",kt(this,"handleScroll")).on("scroll",K(kt(this,"handleScrollStop"),100)),this.handlers={},this.gutters={}}return t.prototype.el=null,t.prototype.innerEl=null,t.prototype.contentEl=null,t.prototype.bgEl=null,t.prototype.overflowX=null,t.prototype.overflowY=null,t.prototype.isScrolling=!1,t.prototype.handlers=null,t.prototype.height=null,t.prototype.contentWidth=null,t.prototype.contentMinWidth=null,t.prototype.gutters=null,t.prototype.update=function(){var t,e,i,n,r,s,o;return s=this.scrollEl,e="invisible-scroll"===(n=this.overflowX),i="invisible-scroll"===(r=this.overflowY),s.toggleClass("fc-no-scrollbars",(e||"hidden"===n)&&(i||"hidden"===r)&&!ut(s)),s.css({overflowX:e?"scroll":n,overflowY:i?"scroll":r}),t={marginLeft:0,marginRight:0,marginTop:0,marginBottom:0},(e||i)&&(o=ht(s),e&&(t.marginTop=-o.top,t.marginBottom=-o.bottom),i&&(t.marginLeft=-o.left,t.marginRight=-o.right)),s.css(t)},t.prototype.getScrollbarWidths=function(){var t;return t=ht(this.scrollEl),"invisible-scroll"===this.overflowX&&(t.top=0,t.bottom=0),"invisible-scroll"===this.overflowY&&(t.left=0,t.right=0),t},t.prototype.handleScroll=function(){return this.isScrolling||(this.isScrolling=!0,this.trigger("scrollStart")),this.trigger("scroll",this.scrollEl.scrollTop(),this.scrollEl.scrollLeft())},t.prototype.handleScrollStop=function(){return this.isScrolling=!1,this.trigger("scrollStop")},t.prototype.setHeight=function(t){return this.height=t,this.updateCss()},t.prototype.getHeight=function(){var t;return null!=(t=this.height)?t:this.scrollEl.height()},t.prototype.setContentWidth=function(t){return this.contentWidth=t,this.updateCss()},t.prototype.setContentMinWidth=function(t){return this.contentMinWidth=t,this.updateCss()},t.prototype.setGutters=function(t){return t?y.extend(this.gutters,t):this.gutters={},this.updateCss()},t.prototype.updateCss=function(){var t;return this.scrollEl.height(this.height),t=this.gutters,this.innerEl.css({width:this.contentWidth?this.contentWidth+(t.left||0)+(t.right||0):"",minWidth:this.contentMinWidth?this.contentMinWidth+(t.left||0)+(t.right||0):void 0,paddingLeft:t.left||"",paddingRight:t.right||"",paddingTop:t.top||"",paddingBottom:t.bottom||""}),this.bgEl.css({left:t.left||"",right:t.right||"",top:t.top||"",bottom:t.bottom||""})},t.prototype.append=function(t){return this.contentEl.append(t)},t.prototype.scrollTop=function(t){return this.scrollEl.scrollTop(t)},t.prototype.scrollLeft=function(t){return this.scrollEl.scrollLeft(t)},t.prototype.on=function(t,e){var i;return((i=this.handlers)[t]||(i[t]=[])).push(e),this},t.prototype.trigger=function(t){var e,i,n,r,s;for(i=t,e=2<=arguments.length?Gt.call(arguments,1):[],n=0,r=(s=this.handlers[i]||[]).length;n<r;n++)s[n].apply(this,e)},t}(),ut=function(t){var e;return(e=ht(t)).left||e.right||e.top||e.bottom},L=function(){function t(t,e){var i,n,r,s;for(this.axis=t,this.scrollers=e,i=0,n=(r=this.scrollers).length;i<n;i++)s=r[i],this.initScroller(s)}return t.prototype.axis=null,t.prototype.scrollers=null,t.prototype.masterScroller=null,t.prototype.enabled=!0,t.prototype.enable=function(){return this.enabled=!0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.initScroller=function(o){return o.on("scrollStart",(e=this,function(){e.masterScroller||(e.masterScroller=o)})).on("scroll",(a=this,function(t,e){var i,n,r,s;if(o===a.masterScroller)for(i=0,n=(s=a.scrollers).length;i<n;i++)if((r=s[i])!==a.masterScroller)switch(a.axis){case"horizontal":r.scrollLeft(e);break;case"vertical":r.scrollTop(t)}})).on("scrollStop",(t=this,function(){o===t.masterScroller&&(t.masterScroller=null)}));var t,a,e},t.prototype.update=function(){var t,e,i,n,r,s,o,a,l,d,h,c,u;for(a=l=d=o=0,i=0,r=(t=function(){var t,e,i,n;for(n=[],t=0,e=(i=this.scrollers).length;t<e;t++)c=i[t],n.push(c.getScrollbarWidths());return n}.call(this)).length;i<r;i++)u=t[i],a=Math.max(a,u.left),l=Math.max(l,u.right),d=Math.max(d,u.top),o=Math.max(o,u.bottom);for(e=n=0,s=(h=this.scrollers).length;n<s;e=++n)c=h[e],u=t[e],c.setGutters("horizontal"===this.axis?{left:a-u.left,right:l-u.right}:{top:d-u.top,bottom:o-u.bottom})},t}(),G=function(){function t(t){var n,e;this.scroller=t,this.sprites=[],this.scroller.on("scrollStart",(e=this,function(){return e.shouldRequeryDimensions?e.cacheDimensions():void 0})),this.scroller.on("scroll",(n=this,function(){var t,e,i;return e=n.scroller.scrollEl,t=dt(e),i=e.scrollTop(),n.viewportRect={left:t,right:t+e[0].clientWidth,top:i,bottom:i+e[0].clientHeight},n.updatePositions()}))}return t.prototype.scroller=null,t.prototype.scrollbarWidths=null,t.prototype.sprites=null,t.prototype.viewportRect=null,t.prototype.contentOffset=null,t.prototype.isHFollowing=!0,t.prototype.isVFollowing=!1,t.prototype.containOnNaturalLeft=!1,t.prototype.containOnNaturalRight=!1,t.prototype.shouldRequeryDimensions=!1,t.prototype.minTravel=0,t.prototype.isForcedAbsolute=!1,t.prototype.isForcedRelative=!1,t.prototype.setSprites=function(n){var t,e,r;if(this.clearSprites(),n instanceof y)return this.sprites=function(){var t,e,i;for(i=[],t=0,e=n.length;t<e;t++)r=n[t],i.push(new Y(y(r),this));return i}.call(this);for(t=0,e=n.length;t<e;t++)(r=n[t]).follower=this;return this.sprites=n},t.prototype.clearSprites=function(){var t,e,i;for(t=0,e=(i=this.sprites).length;t<e;t++)i[t].clear();return this.sprites=[]},t.prototype.cacheDimensions=function(){var t,e,i,n,r,s;for(r=this.scroller.scrollEl,e=dt(r),s=r.scrollTop(),this.viewportRect={left:e,right:e+r[0].clientWidth,top:s,bottom:s+r[0].clientHeight},this.scrollbarWidths=this.scroller.getScrollbarWidths(),this.contentOffset=this.scroller.innerEl.offset(),t=0,i=(n=this.sprites).length;t<i;t++)n[t].cacheDimensions()},t.prototype.forceAbsolute=function(){var t,e,i,n,r;for(this.isForcedAbsolute=!0,n=[],t=0,e=(i=this.sprites).length;t<e;t++)r=i[t],n.push(r.doAbsolute?void 0:r.assignPosition());return n},t.prototype.forceRelative=function(){var t,e,i,n,r;for(this.isForcedRelative=!0,n=[],t=0,e=(i=this.sprites).length;t<e;t++)r=i[t],n.push(r.doAbsolute?r.assignPosition():void 0);return n},t.prototype.clearForce=function(){var t,e,i,n,r;for(this.isForcedRelative=!1,this.isForcedAbsolute=!1,n=[],t=0,e=(i=this.sprites).length;t<e;t++)r=i[t],n.push(r.assignPosition());return n},t.prototype.update=function(){return this.cacheDimensions(),this.updatePositions()},t.prototype.updatePositions=function(){var t,e,i;for(t=0,e=(i=this.sprites).length;t<e;t++)i[t].updatePosition()},t.prototype.getContentRect=function(t){var e,i,n;return e=(i=t.offset()).left+parseFloat(t.css("border-left-width"))+parseFloat(t.css("padding-left"))-this.contentOffset.left,n=i.top+parseFloat(t.css("border-left-width"))+parseFloat(t.css("padding-left"))-this.contentOffset.top,{left:e,right:e+t.width(),top:n,bottom:n+t.height()}},t.prototype.getBoundingRect=function(t){var e,i,n;return e=(i=t.offset()).left-this.contentOffset.left,n=i.top-this.contentOffset.top,{left:e,right:e+t.outerWidth(),top:n,bottom:n+t.outerHeight()}},t}(),Y=function(){function t(t,e){this.el=t,this.follower=null!=e?e:null,this.isBlock="block"===this.el.css("display"),this.el.css("position","relative")}return t.prototype.follower=null,t.prototype.el=null,t.prototype.absoluteEl=null,t.prototype.naturalRect=null,t.prototype.parentRect=null,t.prototype.containerRect=null,t.prototype.isEnabled=!0,t.prototype.isHFollowing=!1,t.prototype.isVFollowing=!1,t.prototype.doAbsolute=!1,t.prototype.isAbsolute=!1,t.prototype.isCentered=!1,t.prototype.rect=null,t.prototype.isBlock=!1,t.prototype.naturalWidth=null,t.prototype.disable=function(){return this.isEnabled?(this.isEnabled=!1,this.resetPosition(),this.unabsolutize()):void 0},t.prototype.enable=function(){return this.isEnabled?void 0:(this.isEnabled=!0,this.assignPosition())},t.prototype.clear=function(){return this.disable(),this.follower=null,this.absoluteEl=null},t.prototype.cacheDimensions=function(){var t,e,i,n,r,s,o,a;return i=r=n=!1,this.naturalWidth=this.el.width(),this.resetPosition(),e=this.follower,o=this.naturalRect=e.getBoundingRect(this.el),a=this.el.parent(),this.parentRect=e.getBoundingRect(a),t=this.containerRect=yt(e.getContentRect(a),o),s=e.minTravel,e.containOnNaturalLeft&&(t.left=o.left),e.containOnNaturalRight&&(t.right=o.right),e.isHFollowing&&lt(t)-lt(o)>=s&&(i="center"===this.el.css("text-align"),n=!0),e.isVFollowing&&at(t)-at(o)>=s&&(r=!0),this.isHFollowing=n,this.isVFollowing=r,this.isCentered=i},t.prototype.updatePosition=function(){return this.computePosition(),this.assignPosition()},t.prototype.resetPosition=function(){return this.el.css({top:"",left:""})},t.prototype.computePosition=function(){var t,e,i,n,r,s,o,a;return o=this.follower.viewportRect,i=this.parentRect,t=this.containerRect,n=null,e=!1,(a=gt(o,i))&&(n=Q(this.naturalRect),s=gt(n,i),(this.isCentered&&!Ht(o,i)||s&&!Ht(o,s))&&(e=!0,this.isHFollowing&&(this.isCentered?(r=lt(n),n.left=(a.left+a.right)/2-r/2,n.right=n.left+r):ct(n,o)||(e=!1),ct(n,t)&&(e=!1)),this.isVFollowing&&(Ft(n,o)||(e=!1),Ft(n,t)&&(e=!1)),Ht(o,n)||(e=!1))),this.rect=n,this.doAbsolute=e},t.prototype.assignPosition=function(){var t,e;return this.isEnabled?this.rect?!this.doAbsolute&&!this.follower.isForcedAbsolute||this.follower.isForcedRelative?(e=this.rect.top-this.naturalRect.top,t=this.rect.left-this.naturalRect.left,this.unabsolutize(),this.el.toggleClass("fc-following",Boolean(e||t)).css({top:e,left:t})):(this.absolutize(),this.absoluteEl.css({top:this.rect.top-this.follower.viewportRect.top+this.follower.scrollbarWidths.top,left:this.rect.left-this.follower.viewportRect.left+this.follower.scrollbarWidths.left,width:this.isBlock?this.naturalWidth:""})):this.unabsolutize():void 0},t.prototype.absolutize=function(){return this.isAbsolute?void 0:(this.absoluteEl||(this.absoluteEl=this.buildAbsoluteEl()),this.absoluteEl.appendTo(this.follower.scroller.el),this.el.css("visibility","hidden"),this.isAbsolute=!0)},t.prototype.unabsolutize=function(){return this.isAbsolute?(this.absoluteEl.detach(),this.el.css("visibility",""),this.isAbsolute=!1):void 0},t.prototype.buildAbsoluteEl=function(){return this.el.clone().addClass("fc-following").css({position:"absolute","z-index":1e3,"font-weight":this.el.css("font-weight"),"font-size":this.el.css("font-size"),"font-family":this.el.css("font-family"),color:this.el.css("color"),"padding-top":this.el.css("padding-top"),"padding-bottom":this.el.css("padding-bottom"),"padding-left":this.el.css("padding-left"),"padding-right":this.el.css("padding-right"),"pointer-events":"none"})},t}(),Q=function(t){return{left:t.left,right:t.right,top:t.top,bottom:t.bottom}},lt=function(t){return t.right-t.left},at=function(t){return t.bottom-t.top},Ht=function(t,e){return Mt(t,e)&&zt(t,e)},Mt=function(t,e){return e.left>=t.left&&e.right<=t.right},zt=function(t,e){return e.top>=t.top&&e.bottom<=t.bottom},ct=function(t,e){return t.left<e.left?(t.right=e.left+lt(t),t.left=e.left,!0):t.right>e.right&&(t.left=e.right-lt(t),t.right=e.right,!0)},Ft=function(t,e){return t.top<e.top?(t.bottom=e.top+at(t),t.top=e.top,!0):t.bottom>e.bottom&&(t.top=e.bottom-at(t),t.bottom=e.bottom,!0)},yt=function(t,e){return{left:Math.min(t.left,e.left),right:Math.max(t.right,e.right),top:Math.min(t.top,e.top),bottom:Math.max(t.bottom,e.bottom)}},e=function(){function g(){return g.__super__.constructor.apply(this,arguments)}return Yt(g,t),g.prototype.resourceManager=null,g.prototype.initialize=function(){return this.resourceManager=new E(this)},g.prototype.instantiateView=function(t){var e,i;return i=(e=this.getViewSpec(t))["class"],this.options.resources&&!1!==e.options.resources&&(e.queryResourceClass?i=e.queryResourceClass(e)||i:e.resourceClass&&(i=e.resourceClass)),new i(this,t,e.options,e.duration)},g.prototype.getResources=function(){return this.resourceManager.topLevelResources},g.prototype.addResource=function(t,e){var i,n;null==e&&(e=!1),i=this.resourceManager.addResource(t),e&&this.view.scrollToResource&&i.done((n=this,function(t){return n.view.scrollToResource(t)}))},g.prototype.removeResource=function(t){return this.resourceManager.removeResource(t)},g.prototype.refetchResources=function(){this.resourceManager.fetchResources()},g.prototype.rerenderResources=function(){this.resourceManager.resetResources()},g.prototype.getPeerEvents=function(t,e){var i,n,r,s,o,a,l,d,h,c,u,p,f;for(u=g.__super__.getPeerEvents.apply(this,arguments),h=t.resourceId?[t.resourceId]:e?this.getEventResourceIds(e):[],i=[],r=0,a=u.length;r<a;r++){if(c=u[r],n=!1,(f=this.getEventResourceIds(c)).length&&h.length){for(s=0,l=f.length;s<l;s++)for(p=f[s],o=0,d=h.length;o<d;o++)if(h[o]===p){n=!0;break}}else n=!0;n&&i.push(c)}return i},g.prototype.buildSelectSpan=function(t,e,i){var n;return n=g.__super__.buildSelectSpan.apply(this,arguments),i&&(n.resourceId=i),n},g.prototype.getResourceById=function(t){return this.resourceManager.getResourceById(t)},g.prototype.getEventResourceId=function(t){return this.getEventResourceIds(t)[0]},g.prototype.getEventResourceIds=function(t){var e,i,n,r,s,o,a,l;if(l=String(null!=(s=null!=(o=t[this.getEventResourceField()])?o:t.resourceId)?s:""))return[l];if(t.resourceIds){for(r=[],e=0,i=(a=t.resourceIds).length;e<i;e++)l=a[e],(n=String(null!=l?l:""))&&r.push(n);return r}return[]},g.prototype.setEventResourceId=function(t,e){return t[this.getEventResourceField()]=String(null!=e?e:"")},g.prototype.getEventResourceField=function(){return this.options.eventResourceField||"resourceId"},g.prototype.getResourceEvents=function(t){var e,i;return(e="object"==typeof t?t:this.getResourceById(t))?this.clientEvents((i=this,function(t){return-1!==y.inArray(e.id,i.getEventResourceIds(t))})):[]},g.prototype.getEventResource=function(t){return this.getEventResources(t)[0]},g.prototype.getEventResources=function(t){var e,i,n,r,s,o,a;if(a=[],e="object"==typeof t?t:this.clientEvents(t)[0])for(i=0,n=(r=this.getEventResourceIds(e)).length;i<n;i++)o=r[i],(s=this.getResourceById(o))&&a.push(s);return a},g}(),t.prototype=e.prototype,Ct=B.prototype.displayView,B.prototype.renderSkeleton,Dt=B.prototype.unrenderSkeleton,St=B.prototype.displayEvents,B.prototype.isResourcesBound=!1,B.prototype.settingResources=null,B.prototype.displayView=function(){return Ct.apply(this,arguments),Tt(this.calendar.options.schedulerLicenseKey,this.el),this.bindResources(),this.whenResources()},B.prototype.unrenderSkeleton=function(){return Dt.apply(this,arguments),this.unbindResources()},B.prototype.displayEvents=function(t){return this.whenResources((e=this,function(){return St.call(e,t)}));var e},B.prototype.bindResources=function(){var t,e;return this.isResourcesBound?void 0:(this.isResourcesBound=!0,this.settingResources=y.Deferred(),t=function(t){return e.setResources(t),e.settingResources.resolve()},(e=this).calendar.resourceManager.on("set",this._setResources=t).on("unset",this._unsetResources=kt(this,"unsetResources")).on("reset",this._resetResources=kt(this,"resetResources")).on("add",this._addResource=kt(this,"addResource")).on("remove",this._removeResource=kt(this,"removeResource")),this.calendar.resourceManager.hasFetched()?t(this.calendar.resourceManager.topLevelResources):this.calendar.resourceManager.getResources())},B.prototype.unbindResources=function(){return this.isResourcesBound?(this.calendar.resourceManager.off("set",this._setResources).off("unset",this._unsetResources).off("reset",this._resetResources).off("add",this._addResource).off("remove",this._removeResource),"resolved"===this.settingResources.state()&&this.unsetResources(),this.settingResources=null,this.isResourcesBound=!1):void 0},B.prototype.whenResources=function(t){return"resolved"===this.settingResources.state()?y.when(t?t():void 0):t?this.settingResources.then(t):this.settingResources.promise()},B.prototype.setResources=function(){},B.prototype.unsetResources=function(){},B.prototype.resetResources=function(){return this.calendar.rerenderEvents()},B.prototype.addResource=function(){return this.resetResources(this.calendar.resourceManager.topLevelResources)},B.prototype.removeResource=function(){return this.resetResources(this.calendar.resourceManager.topLevelResources)},xt=n.prototype.getSegClasses,n.prototype.getSegClasses=function(t){var e,i,n,r,s;for(e=xt.apply(this,arguments),i=0,n=(r=this.getSegResources(t)).length;i<n;i++)s=r[i],e=e.concat(s.eventClassName||[]);return e},n.prototype.getSegSkinCss=function(t){var e,i,n,r,s,o,a,l,d,h;return h=this.view,l=(e=t.event).source||{},i=e.color,d=l.color,o=h.opt("eventColor"),a=this.getSegResources(t),n=function(){var t,e,i,n;for(n=null,e=0,i=a.length;e<i;e++)for(t=a[e];t&&!n;)n=t.eventBackgroundColor||t.eventColor,t=t._parent;return n},r=function(){var t,e,i,n;for(n=null,e=0,i=a.length;e<i;e++)for(t=a[e];t&&!n;)n=t.eventBorderColor||t.eventColor,t=t._parent;return n},s=function(){var t,e,i,n;for(n=null,e=0,i=a.length;e<i;e++)for(t=a[e];t&&!n;)n=t.eventTextColor,t=t._parent;return n},{"background-color":e.backgroundColor||i||n()||l.backgroundColor||d||h.opt("eventBackgroundColor")||o,"border-color":e.borderColor||i||r()||l.borderColor||d||h.opt("eventBorderColor")||o,color:e.textColor||s()||l.textColor||h.opt("eventTextColor")}},n.prototype.getSegResources=function(t){return t.resource?[t.resource]:this.view.calendar.getEventResources(t.event)},E=function(){function n(t){this.calendar=t,this.initializeCache()}return Yt(n,i),n.mixin(r),n.resourceGuid=1,n.ajaxDefaults={dataType:"json",cache:!1},n.prototype.calendar=null,n.prototype.topLevelResources=null,n.prototype.resourcesById=null,n.prototype.fetching=null,n.prototype.hasFetched=function(){return this.fetching&&"resolved"===this.fetching.state()},n.prototype.getResources=function(){var e;return this.fetching?y.Deferred().resolve(this.topLevelResources).promise():(e=y.Deferred(),this.fetchResources().done(function(t){return e.resolve(t)}).fail(function(){return e.resolve([])}),e)},n.prototype.fetchResources=function(){var e,i;return e=this.fetching,y.when(e).then((i=this,function(){return i.fetching=i.fetchResourceInputs().then(function(t){return i.setResources(t,Boolean(e)),i.topLevelResources})}))},n.prototype.fetchResourceInputs=function(){var e,t,i;switch(e=y.Deferred(),i=this.calendar.options.resources,"string"===y.type(i)&&(i={url:i}),y.type(i)){case"function":i(function(t){return e.resolve(t)});break;case"object":t=y.ajax(y.extend({},n.ajaxDefaults,i));break;case"array":e.resolve(i);break;default:e.resolve([])}return t||(t=e.promise()),"pending"===!t.state()&&(this.calendar.pushLoading(),t.always(function(){return this.calendar.popLoading()})),t},n.prototype.resetResources=function(){return this.getResources().then((t=this,function(){return t.trigger("reset",t.topLevelResources)}));var t},n.prototype.getResourceById=function(t){return this.resourcesById[t]},n.prototype.initializeCache=function(){return this.topLevelResources=[],this.resourcesById={}},n.prototype.setResources=function(n,t){var e,i,r,s,o,a;for(this.initializeCache(),o=function(){var t,e,i;for(i=[],t=0,e=n.length;t<e;t++)s=n[t],i.push(this.buildResource(s));return i}.call(this),e=0,i=(a=function(){var t,e,i;for(i=[],t=0,e=o.length;t<e;t++)r=o[t],this.addResourceToIndex(r)&&i.push(r);return i}.call(this)).length;e<i;e++)r=a[e],this.addResourceToTree(r);return t?this.trigger("reset",this.topLevelResources):this.trigger("set",this.topLevelResources),this.calendar.trigger("resourcesSet",null,this.topLevelResources)},n.prototype.addResource=function(e){return y.when(this.fetching).then((i=this,function(){var t;return t=i.buildResource(e),!!i.addResourceToIndex(t)&&(i.addResourceToTree(t),i.trigger("add",t),t)}));var i},n.prototype.addResourceToIndex=function(t){var e,i,n,r;if(this.resourcesById[t.id])return!1;for(i=0,n=(r=(this.resourcesById[t.id]=t).children).length;i<n;i++)e=r[i],this.addResourceToIndex(e);return!0},n.prototype.addResourceToTree=function(t){var e,i,n,r;if(!t.parent){if(i=String(null!=(n=t.parentId)?n:"")){if(!(e=this.resourcesById[i]))return!1;r=(t.parent=e).children}else r=this.topLevelResources;r.push(t)}return!0},n.prototype.removeResource=function(t){var e,i;return e="object"==typeof t?t.id:t,y.when(this.fetching).then((i=this,function(){var t;return(t=i.removeResourceFromIndex(e))&&(i.removeResourceFromTree(t),i.trigger("remove",t)),t}))},n.prototype.removeResourceFromIndex=function(t){var e,i,n,r,s;if(s=this.resourcesById[t]){for(delete this.resourcesById[t],i=0,n=(r=s.children).length;i<n;i++)e=r[i],this.removeResourceFromIndex(e.id);return s}return!1},n.prototype.removeResourceFromTree=function(t,e){var i,n,r,s;for(null==e&&(e=this.topLevelResources),i=n=0,r=e.length;n<r;i=++n){if((s=e[i])===t)return t.parent=null,e.splice(i,1),!0;if(this.removeResourceFromTree(t,s.children))return!0}return!1},n.prototype.buildResource=function(s){var o,a,t,e,l;return(l=y.extend({},s)).id=String(null!=(e=s.id)?e:"_fc"+n.resourceGuid++),t=s.eventClassName,l.eventClassName=function(){switch(y.type(t)){case"string":return t.split(/\s+/);case"array":return t;default:return[]}}(),l.children=function(){var t,e,i,n,r;for(r=[],t=0,e=(n=null!=(i=s.children)?i:[]).length;t<e;t++)a=n[t],(o=this.buildResource(a)).parent=l,r.push(o);return r}.call(this),l},n}(),M=function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Yt(s,B),s.prototype.resourceTextFunc=null,s.prototype.unsetResources=function(){return this.clearEvents()},s.prototype.resetResources=function(t){var e;return e=this.queryScroll(),this.unsetResources(),this.setResources(t),this.setScroll(e),this.calendar.rerenderEvents()},s.prototype.getResourceText=function(t){return this.getResourceTextFunc()(t)},s.prototype.getResourceTextFunc=function(){var t;return this.resourceTextFunc?this.resourceTextFunc:("function"!=typeof(t=this.opt("resourceText"))&&(t=function(t){return t.title||t.id}),this.resourceTextFunc=t)},s.prototype.triggerDayClick=function(t,e,i){var n;return n=this.calendar.resourceManager,this.trigger("dayClick",e,this.calendar.applyTimezone(t.start),i,this,n.getResourceById(t.resourceId))},s.prototype.triggerSelect=function(t,e){var i;return i=this.calendar.resourceManager,this.trigger("select",null,this.calendar.applyTimezone(t.start),this.calendar.applyTimezone(t.end),e,this,i.getResourceById(t.resourceId))},s.prototype.triggerExternalDrop=function(t,e,i,n,r){return this.trigger("drop",i[0],e.start,n,r,e.resourceId),t?this.trigger("eventReceive",null,t):void 0},s.prototype.reportEventDrop=function(t,e){var i,n,r;return n=t,i=e,r=3<=arguments.length?Gt.call(arguments,2):[],(i=this.normalizeDropLocation(i)).resourceId&&n.resourceIds&&(i.resourceIds=null),s.__super__.reportEventDrop.apply(this,[n,i].concat(Gt.call(r)))},s.prototype.reportExternalDrop=function(t,e){var i,n,r;return n=t,i=e,r=3<=arguments.length?Gt.call(arguments,2):[],i=this.normalizeDropLocation(i),s.__super__.reportExternalDrop.apply(this,[n,i].concat(Gt.call(r)))},s.prototype.normalizeDropLocation=function(t){var e;return delete(e=y.extend({},t)).resourceId,this.calendar.setEventResourceId(e,t.resourceId),e},s}(),D=function(){function a(){return a.__super__.constructor.apply(this,arguments)}return Yt(a,n),a.prototype.allowCrossResource=!0,a.prototype.eventRangeToSpans=function(t,e){var i,n,r,s,o;if((s=this.view.calendar.getEventResourceIds(e)).length){for(o=[],i=0,n=s.length;i<n;i++)r=s[i],o.push(y.extend({},t,{resourceId:r}));return o}return c.isBgEvent(e)?a.__super__.eventRangeToSpans.apply(this,arguments):[]},a.prototype.fabricateHelperEvent=function(t){var e;return e=a.__super__.fabricateHelperEvent.apply(this,arguments),this.view.calendar.setEventResourceId(e,t.resourceId),e},a.prototype.computeEventDrop=function(t,e){var i;return!0||t.resourceId===e.resourceId?((i=a.__super__.computeEventDrop.apply(this,arguments))&&(i.resourceId=e.resourceId),i):null},a.prototype.computeExternalDrop=function(t){var e;return(e=a.__super__.computeExternalDrop.apply(this,arguments))&&(e.resourceId=t.resourceId),e},
a.prototype.computeEventResize=function(t,e,i){var n;if(this.allowCrossResource||e.resourceId===i.resourceId)return(n=a.__super__.computeEventResize.apply(this,arguments))&&(n.resourceId=e.resourceId),n},a.prototype.computeSelectionSpan=function(t,e){var i;if(this.allowCrossResource||t.resourceId===e.resourceId)return(i=a.__super__.computeSelectionSpan.apply(this,arguments))&&(i.resourceId=t.resourceId),i},a}(),x={flattenedResources:null,resourceCnt:0,datesAboveResources:!1,allowCrossResource:!1,setResources:function(t){return this.flattenedResources=this.flattenResources(t),this.resourceCnt=this.flattenedResources.length,this.updateDayTableCols()},unsetResources:function(){return this.flattenedResources=null,this.resourceCnt=0,this.updateDayTableCols()},flattenResources:function(t){var i,e,n,r;return(e=this.view.opt("resourceOrder"))?(i=Et(e),r=function(t,e){return U(t,e,i)}):r=null,n=[],this.accumulateResources(t,r,n),n},accumulateResources:function(t,e,i){var n,r,s,o,a;for(e?(a=t.slice(0)).sort(e):a=t,o=[],n=0,r=a.length;n<r;n++)s=a[n],i.push(s),o.push(this.accumulateResources(s.children,e,i));return o},updateDayTableCols:function(){return this.datesAboveResources=this.view.opt("groupByDateAndResource"),c.DayTableMixin.updateDayTableCols.call(this)},computeColCnt:function(){return(this.resourceCnt||1)*this.daysPerRow},getColDayIndex:function(t){return this.isRTL&&(t=this.colCnt-1-t),this.datesAboveResources?Math.floor(t/(this.resourceCnt||1)):t%this.daysPerRow},getColResource:function(t){return this.flattenedResources[this.getColResourceIndex(t)]},getColResourceIndex:function(t){return this.isRTL&&(t=this.colCnt-1-t),this.datesAboveResources?t%(this.resourceCnt||1):Math.floor(t/this.daysPerRow)},indicesToCol:function(t,e){var i;return i=this.datesAboveResources?e*(this.resourceCnt||1)+t:t*this.daysPerRow+e,this.isRTL&&(i=this.colCnt-1-i),i},renderHeadTrHtml:function(){return this.resourceCnt?1<this.daysPerRow?this.datesAboveResources?this.renderHeadDateAndResourceHtml():this.renderHeadResourceAndDateHtml():this.renderHeadResourceHtml():c.DayTableMixin.renderHeadTrHtml.call(this)},renderHeadResourceHtml:function(){var t,e,i,n,r;for(r=[],t=0,e=(i=this.flattenedResources).length;t<e;t++)n=i[t],r.push(this.renderHeadResourceCellHtml(n));return this.wrapTr(r,"renderHeadIntroHtml")},renderHeadResourceAndDateHtml:function(){var t,e,i,n,r,s,o,a,l,d;for(d=[],e=[],n=0,s=(o=this.flattenedResources).length;n<s;n++)for(l=o[n],d.push(this.renderHeadResourceCellHtml(l,null,this.daysPerRow)),i=r=0,a=this.daysPerRow;r<a;i=r+=1)t=this.dayDates[i].clone(),e.push(this.renderHeadResourceDateCellHtml(t,l));return this.wrapTr(d,"renderHeadIntroHtml")+this.wrapTr(e,"renderHeadIntroHtml")},renderHeadDateAndResourceHtml:function(){var t,e,i,n,r,s,o,a,l,d;for(e=[],d=[],i=n=0,o=this.daysPerRow;n<o;i=n+=1)for(t=this.dayDates[i].clone(),e.push(this.renderHeadDateCellHtml(t,this.resourceCnt)),r=0,s=(a=this.flattenedResources).length;r<s;r++)l=a[r],d.push(this.renderHeadResourceCellHtml(l,t));return this.wrapTr(e,"renderHeadIntroHtml")+this.wrapTr(d,"renderHeadIntroHtml")},renderHeadResourceCellHtml:function(t,e,i){return'<th class="fc-resource-cell" data-resource-id="'+t.id+'"'+(e?' data-date="'+e.format("YYYY-MM-DD")+'"':"")+(1<i?' colspan="'+i+'"':"")+">"+pt(this.view.getResourceText(t))+"</th>"},renderHeadResourceDateCellHtml:function(t,e,i){return this.renderHeadDateCellHtml(t,i,'data-resource-id="'+e.id+'"')},processHeadResourceEls:function(t){return t.find(".fc-resource-cell").each((n=this,function(t,e){var i;return i=n.datesAboveResources?n.getColResource(t):n.flattenedResources[n.isRTL?n.flattenedResources.length-1-t:t],n.view.trigger("resourceRender",i,i,y(e),y())}));var n},renderBgCellsHtml:function(t){var e,i,n,r,s,o;if(this.resourceCnt){for(n=[],e=r=0,s=this.colCnt;r<s;e=r+=1)i=this.getCellDate(t,e),o=this.getColResource(e),n.push(this.renderResourceBgCellHtml(i,o));return n.join("")}return c.DayTableMixin.renderBgCellsHtml.call(this,t)},renderResourceBgCellHtml:function(t,e){return this.renderBgCellHtml(t,'data-resource-id="'+e.id+'"')},wrapTr:function(t,e){return this.isRTL?(t.reverse(),"<tr>"+t.join("")+this[e]()+"</tr>"):"<tr>"+this[e]()+t.join("")+"</tr>"}},C=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return Yt(i,t),i.mixin(D),i.mixin(x),i.prototype.getHitSpan=function(t){var e;return e=i.__super__.getHitSpan.apply(this,arguments),this.resourceCnt&&(e.resourceId=this.getColResource(t.col).id),e},i.prototype.spanToSegs=function(t){var e,i,n,r,s,o,a,l,d,h,c,u,p;if(d=this.resourceCnt,i=this.datesAboveResources?this.sliceRangeByDay(t):this.sliceRangeByRow(t),d){for(u=[],r=0,a=i.length;r<a;r++)for(p=i[r],h=s=0,l=d;s<l;h=s+=1)c=this.flattenedResources[h],t.resourceId&&t.resourceId!==c.id||((e=y.extend({},p)).resource=c,this.isRTL?(e.leftCol=this.indicesToCol(h,p.lastRowDayIndex),e.rightCol=this.indicesToCol(h,p.firstRowDayIndex)):(e.leftCol=this.indicesToCol(h,p.firstRowDayIndex),e.rightCol=this.indicesToCol(h,p.lastRowDayIndex)),u.push(e));return u}for(n=0,o=i.length;n<o;n++)p=i[n],this.isRTL?(p.leftCol=p.lastRowDayIndex,p.rightCol=p.firstRowDayIndex):(p.leftCol=p.firstRowDayIndex,p.rightCol=p.lastRowDayIndex);return i},i}(c.DayGrid),R=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return Yt(i,t),i.mixin(D),i.mixin(x),i.prototype.getHitSpan=function(t){var e;return e=i.__super__.getHitSpan.apply(this,arguments),this.resourceCnt&&(e.resourceId=this.getColResource(t.col).id),e},i.prototype.spanToSegs=function(t){var e,i,n,r,s,o,a,l,d,h,c,u,p;if(d=this.resourceCnt,i=this.sliceRangeByTimes(t),d){for(u=[],r=0,a=i.length;r<a;r++)for(p=i[r],h=s=0,l=d;s<l;h=s+=1)c=this.flattenedResources[h],t.resourceId&&t.resourceId!==c.id||((e=y.extend({},p)).resource=c,e.col=this.indicesToCol(h,p.dayIndex),u.push(e));return u}for(n=0,o=i.length;n<o;n++)(p=i[n]).col=p.dayIndex;return i},i}(c.TimeGrid),W=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,B),e.prototype.timeGrid=null,e.prototype.isScrolled=!1,e.prototype.initialize=function(){return this.timeGrid=this.instantiateGrid(),this.intervalDuration=this.timeGrid.duration},e.prototype.instantiateGrid=function(){return new A(this)},e.prototype.setRange=function(t){return e.__super__.setRange.apply(this,arguments),this.timeGrid.setRange(t)},e.prototype.renderSkeleton=function(){return this.el.addClass("fc-timeline"),!1===this.opt("eventOverlap")&&this.el.addClass("fc-no-overlap"),this.el.html(this.renderSkeletonHtml()),this.renderTimeGridSkeleton()},e.prototype.renderSkeletonHtml=function(){return'<table> <thead class="fc-head"> <tr> <td class="fc-time-area '+this.widgetHeaderClass+'"></td> </tr> </thead> <tbody class="fc-body"> <tr> <td class="fc-time-area '+this.widgetContentClass+'"></td> </tr> </tbody> </table>'},e.prototype.renderTimeGridSkeleton=function(){return this.timeGrid.setElement(this.el.find("tbody .fc-time-area")),this.timeGrid.headEl=this.el.find("thead .fc-time-area"),this.timeGrid.renderSkeleton(),this.isScrolled=!1,this.timeGrid.bodyScroller.on("scroll",kt(this,"handleBodyScroll"))},e.prototype.handleBodyScroll=function(t){if(t){if(!this.isScrolled)return this.isScrolled=!0,this.el.addClass("fc-scrolled")}else if(this.isScrolled)return this.isScrolled=!1,this.el.removeClass("fc-scrolled")},e.prototype.unrenderSkeleton=function(){return this.timeGrid.removeElement(),this.handleBodyScroll(0),e.__super__.unrenderSkeleton.apply(this,arguments)},e.prototype.renderDates=function(){return this.timeGrid.renderDates()},e.prototype.unrenderDates=function(){return this.timeGrid.unrenderDates()},e.prototype.renderBusinessHours=function(){return this.timeGrid.renderBusinessHours()},e.prototype.unrenderBusinessHours=function(){return this.timeGrid.unrenderBusinessHours()},e.prototype.getNowIndicatorUnit=function(){return this.timeGrid.getNowIndicatorUnit()},e.prototype.renderNowIndicator=function(t){return this.timeGrid.renderNowIndicator(t)},e.prototype.unrenderNowIndicator=function(){return this.timeGrid.unrenderNowIndicator()},e.prototype.prepareHits=function(){return this.timeGrid.prepareHits()},e.prototype.releaseHits=function(){return this.timeGrid.releaseHits()},e.prototype.queryHit=function(t,e){return this.timeGrid.queryHit(t,e)},e.prototype.getHitSpan=function(t){return this.timeGrid.getHitSpan(t)},e.prototype.getHitEl=function(t){return this.timeGrid.getHitEl(t)},e.prototype.updateWidth=function(){return this.timeGrid.updateWidth()},e.prototype.setHeight=function(t,e){var i;return i=e?"auto":t-this.timeGrid.headHeight()-this.queryMiscHeight(),this.timeGrid.bodyScroller.setHeight(i)},e.prototype.queryMiscHeight=function(){return this.el.outerHeight()-this.timeGrid.headScroller.el.outerHeight()-this.timeGrid.bodyScroller.el.outerHeight()},e.prototype.computeInitialScroll=function(t){return this.timeGrid.computeInitialScroll(t)},e.prototype.queryScroll=function(){return this.timeGrid.queryScroll()},e.prototype.setScroll=function(t){return this.timeGrid.setScroll(t)},e.prototype.renderEvents=function(t){return this.timeGrid.renderEvents(t),this.updateWidth()},e.prototype.unrenderEvents=function(){return this.timeGrid.unrenderEvents(),this.updateWidth()},e.prototype.renderDrag=function(t,e){return this.timeGrid.renderDrag(t,e)},e.prototype.unrenderDrag=function(){return this.timeGrid.unrenderDrag()},e.prototype.getEventSegs=function(){return this.timeGrid.getEventSegs()},e.prototype.renderSelection=function(t){return this.timeGrid.renderSelection(t)},e.prototype.unrenderSelection=function(){return this.timeGrid.unrenderSelection()},e}(),J=c.cssToStr,A=function(){function e(){var t;e.__super__.constructor.apply(this,arguments),this.initScaleProps(),this.minTime=d.duration(this.opt("minTime")||"00:00"),this.maxTime=d.duration(this.opt("maxTime")||"24:00"),this.timeWindowMs=this.maxTime-this.minTime,this.snapDuration=(t=this.opt("snapDuration"))?d.duration(t):this.slotDuration,this.minResizeDuration=this.snapDuration,this.snapsPerSlot=it(this.slotDuration,this.snapDuration),this.slotWidth=this.opt("slotWidth")}return Yt(e,n),e.prototype.slotDates=null,e.prototype.slotCnt=null,e.prototype.snapCnt=null,e.prototype.snapsPerSlot=null,e.prototype.snapDiffToIndex=null,e.prototype.snapIndexToDiff=null,e.prototype.headEl=null,e.prototype.slatContainerEl=null,e.prototype.slatEls=null,e.prototype.containerCoordCache=null,e.prototype.slatCoordCache=null,e.prototype.slatInnerCoordCache=null,e.prototype.headScroller=null,e.prototype.bodyScroller=null,e.prototype.joiner=null,e.prototype.follower=null,e.prototype.eventTitleFollower=null,e.prototype.minTime=null,e.prototype.maxTime=null,e.prototype.timeWindowMs=null,e.prototype.slotDuration=null,e.prototype.snapDuration=null,e.prototype.duration=null,e.prototype.labelInterval=null,e.prototype.headerFormats=null,e.prototype.isTimeScale=null,e.prototype.largeUnit=null,e.prototype.emphasizeWeeks=!1,e.prototype.titleFollower=null,e.prototype.segContainerEl=null,e.prototype.segContainerHeight=null,e.prototype.bgSegContainerEl=null,e.prototype.helperEls=null,e.prototype.innerEl=null,e.prototype.opt=function(t){return this.view.opt(t)},e.prototype.isValidDate=function(t){return!this.view.isHiddenDay(t)&&(!this.isTimeScale||((t.time()-this.minTime)%864e5+864e5)%864e5<this.timeWindowMs)},e.prototype.computeDisplayEventTime=function(){return!this.isTimeScale},e.prototype.computeDisplayEventEnd=function(){return!1},e.prototype.computeEventTimeFormat=function(){return this.opt("extraSmallTimeFormat")},e.prototype.normalizeGridDate=function(t){var e;return this.isTimeScale?(e=t.clone()).hasTime()||e.time(0):(e=t.clone().stripTime(),this.largeUnit&&e.startOf(this.largeUnit)),e},e.prototype.normalizeGridRange=function(t){var e,i;return this.isTimeScale?i={start:this.normalizeGridDate(t.start),end:this.normalizeGridDate(t.end)}:(i=this.view.computeDayRange(t),this.largeUnit&&(i.start.startOf(this.largeUnit),(e=i.end.clone().startOf(this.largeUnit)).isSame(i.end)&&e.isAfter(i.start)||e.add(this.slotDuration),i.end=e)),i},e.prototype.rangeUpdated=function(){var t,e;for(this.start=this.normalizeGridDate(this.start).add(this.minTime),this.end=this.normalizeGridDate(this.end).subtract(1,"day").add(this.maxTime),e=[],t=this.start.clone();t<this.end;)this.isValidDate(t)&&e.push(t.clone()),t.add(this.slotDuration);return this.slotDates=e,this.updateGridDates()},e.prototype.updateGridDates=function(){var t,e,i,n,r;for(n=-1,e=0,i=[],r=[],t=this.start.clone();t<this.end;)this.isValidDate(t)?(n++,i.push(n),r.push(e)):i.push(n+.5),t.add(this.snapDuration),e++;return this.snapDiffToIndex=i,this.snapIndexToDiff=r,this.snapCnt=n+1,this.slotCnt=this.snapCnt/this.snapsPerSlot},e.prototype.spanToSegs=function(t){var e,i;return e=this.normalizeGridRange(t),this.computeDateSnapCoverage(t.start)<this.computeDateSnapCoverage(t.end)&&(i=ft(e,this))?(i.isStart&&!this.isValidDate(i.start)&&(i.isStart=!1),i.isEnd&&i.end&&!this.isValidDate(i.end.clone().subtract(1))&&(i.isEnd=!1),[i]):[]},e.prototype.prepareHits=function(){return this.buildCoords()},e.prototype.queryHit=function(t,e){var i,n,r,s,o,a,l,d,h,c,u,p;return p=this.snapsPerSlot,s=this.slatCoordCache,null!=(i=this.containerCoordCache).getVerticalIndex(e)&&null!=(o=s.getHorizontalIndex(t))?(d=s.getWidth(o),this.isRTL?(r=((l=s.getRightOffset(o))-t)/d,h=o*p+(n=Math.floor(r*p)),c=(u=l-n/p*d)-(n+1)/p*d):(r=(t-(a=s.getLeftOffset(o)))/d,h=o*p+(n=Math.floor(r*p)),c=a+n/p*d,u=a+(n+1)/p*d),{snap:h,component:this,left:c,right:u,top:i.getTopOffset(0),bottom:i.getBottomOffset(0)}):void 0},e.prototype.getHitSpan=function(t){return this.getSnapRange(t.snap)},e.prototype.getHitEl=function(t){return this.getSnapEl(t.snap)},e.prototype.getSnapRange=function(t){var e,i;return(i=this.start.clone()).add(wt(this.snapDuration,this.snapIndexToDiff[t])),e=i.clone().add(this.snapDuration),{start:i,end:e}},e.prototype.getSnapEl=function(t){return this.slatEls.eq(Math.floor(t/this.snapsPerSlot))},e.prototype.renderSkeleton=function(){return this.headScroller=new P("invisible-scroll","hidden"),this.headEl.append(this.headScroller.el),this.bodyScroller=new P,this.el.append(this.bodyScroller.el),this.innerEl=this.bodyScroller.contentEl,this.slatContainerEl=y('<div class="fc-slats"/>').appendTo(this.bodyScroller.bgEl),this.segContainerEl=y('<div class="fc-event-container"/>').appendTo(this.bodyScroller.contentEl),this.bgSegContainerEl=this.bodyScroller.bgEl,this.containerCoordCache=new s({els:this.bodyScroller.innerEl,isHorizontal:!0,isVertical:!0}),this.joiner=new L("horizontal",[this.headScroller,this.bodyScroller]),this.follower=new G(this.headScroller),this.eventTitleFollower=new G(this.bodyScroller),this.eventTitleFollower.minTravel=50,this.isRTL?this.eventTitleFollower.containOnNaturalRight=!0:this.eventTitleFollower.containOnNaturalLeft=!0,e.__super__.renderSkeleton.apply(this,arguments)},e.prototype.headColEls=null,e.prototype.slatColEls=null,e.prototype.renderDates=function(){var t,e,i,n,r;for(this.headScroller.contentEl.html(this.renderHeadHtml()),this.headColEls=this.headScroller.contentEl.find("col"),this.slatContainerEl.html(this.renderSlatHtml()),this.slatColEls=this.slatContainerEl.find("col"),this.slatEls=this.slatContainerEl.find("td"),this.slatCoordCache=new s({els:this.slatEls,isHorizontal:!0}),this.slatInnerCoordCache=new s({els:this.slatEls.find("> div"),isHorizontal:!0,offsetParent:this.bodyScroller.innerEl}),e=i=0,n=(r=this.slotDates).length;i<n;e=++i)t=r[e],this.view.trigger("dayRender",null,t,this.slatEls.eq(e));return this.follower?this.follower.setSprites(this.headEl.find("tr:not(:last-child) span")):void 0},e.prototype.unrenderDates=function(){return this.follower&&this.follower.clearSprites(),this.headScroller.contentEl.empty(),this.slatContainerEl.empty(),this.headScroller.contentEl.add(this.bodyScroller.contentEl).css({minWidth:"",width:""})},e.prototype.renderHeadHtml=function(){var t,e,i,n,r,s,o,a,l,d,h,c,u,p,f,g,m,_,v,y,w,b,S,C,x,D,E,T,k,R,$,H,M,z,I,F;for(f=this.labelInterval,s=this.headerFormats,e=function(){var t,e,i;for(i=[],t=0,e=s.length;t<e;t++)r=s[t],i.push([]);return i}(),T=g=null,M=[],c=0,m=(z=this.slotDates).length;c<m;c++){for(F=(i=z[c]).week(),h=this.emphasizeWeeks&&null!==T&&T!==F,R=u=0,_=s.length;u<_;R=++u)r=s[R],g=($=e[R])[$.length-1],D=null,1<s.length&&R<s.length-1?(I=i.format(r),n=i.format(),g&&g.text===I?g.colspan+=1:D={text:I,dateData:n,colspan:1}):!g||_t(nt(this.start,i,f))?D={text:I=i.format(r),dateData:n=i.format(),colspan:1}:g.colspan+=1,D&&(D.weekStart=h,$.push(D));M.push({weekStart:h}),T=F}for(l=f>this.slotDuration,o="<table>",o+="<colgroup>",p=0,v=z.length;p<v;p++)i=z[p],o+="<col/>";for(o+="</colgroup>",o+="<tbody>",a=C=0,y=e.length;C<y;a=++C){for($=e[a],d=a===e.length-1,o+="<tr"+(l&&d?' class="fc-chrono"':"")+">",x=0,w=$.length;x<w;x++)t=$[x],o+='<th class="'+this.view.widgetHeaderClass+" "+(t.weekStart?"fc-em-cell":"")+'" data-date="'+t.dateData+'"'+(1<t.colspan?' colspan="'+t.colspan+'"':"")+'><div class="fc-cell-content"><span class="fc-cell-text">'+pt(t.text)+"</span></div></th>";o+="</tr>"}for(o+="</tbody></table>",H="<table>",H+="<colgroup>",E=0,b=M.length;E<b;E++)t=M[E],H+="<col/>";for(H+="</colgroup>",H+="<tbody><tr>",a=k=0,S=M.length;k<S;a=++k)t=M[a],i=z[a],H+=this.slatCellHtml(i,t.weekStart);return H+="</tr></tbody></table>",this._slatHtml=H,o},e.prototype.renderSlatHtml=function(){return this._slatHtml},e.prototype.slatCellHtml=function(t,e){var i;return this.isTimeScale?(i=[]).push(_t(nt(this.start,t,this.labelInterval))?"fc-major":"fc-minor"):(i=this.getDayClasses(t)).push("fc-day"),i.unshift(this.view.widgetContentClass),e&&i.push("fc-em-cell"),'<td class="'+i.join(" ")+'" data-date="'+t.format()+'"><div /></td>'},e.prototype.businessHourSegs=null,e.prototype.renderBusinessHours=function(){var t,e;return this.largeUnit?void 0:(t=this.view.calendar.getBusinessHoursEvents(!this.isTimeScale),e=this.businessHourSegs=this.eventsToSegs(t),this.renderFill("businessHours",e,"bgevent"))},e.prototype.unrenderBusinessHours=function(){return this.unrenderFill("businessHours")},e.prototype.nowIndicatorEls=null,e.prototype.getNowIndicatorUnit=function(){return this.isTimeScale?q(this.slotDuration):void 0},e.prototype.renderNowIndicator=function(t){var e,i,n;return n=[],(t=this.normalizeGridDate(t))>=this.start&&t<this.end&&(e=this.dateToCoord(t),i=this.isRTL?{right:-e}:{left:e},n.push(y("<div class='fc-now-indicator fc-now-indicator-arrow'></div>").css(i).appendTo(this.headScroller.innerEl)[0]),n.push(y("<div class='fc-now-indicator fc-now-indicator-line'></div>").css(i).appendTo(this.bodyScroller.innerEl)[0])),this.nowIndicatorEls=y(n)},e.prototype.unrenderNowIndicator=function(){return this.nowIndicatorEls?(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null):void 0},e.prototype.explicitSlotWidth=null,e.prototype.defaultSlotWidth=null,e.prototype.updateWidth=function(){var t,e,i,n,r;return e="",n=r=Math.round(this.slotWidth||(this.slotWidth=this.computeSlotWidth())),(i=r*this.slotDates.length)<(t=this.bodyScroller.scrollEl[0].clientWidth)&&(e=t,i="",n=Math.floor(t/this.slotDates.length)),this.headScroller.setContentWidth(i),this.headScroller.setContentMinWidth(e),this.bodyScroller.setContentWidth(i),this.bodyScroller.setContentMinWidth(e),this.headColEls.slice(0,-1).add(this.slatColEls.slice(0,-1)).width(n),this.headScroller.update(),this.bodyScroller.update(),this.joiner.update(),this.buildCoords(),this.updateSegPositions(),this.follower&&this.follower.update(),this.eventTitleFollower?this.eventTitleFollower.update():void 0},e.prototype.computeSlotWidth=function(){var t,n,e,i,r;return n=0,this.headEl.find("tr:last-child th span").each(function(t,e){var i;return i=y(e).outerWidth(),n=Math.max(n,i)}),t=n+1,r=it(this.labelInterval,this.slotDuration),i=Math.ceil(t/r),(e=this.headColEls.eq(0).css("min-width"))&&((e=parseInt(e,10))&&(i=Math.max(i,e))),i},e.prototype.buildCoords=function(){return this.containerCoordCache.build(),this.slatCoordCache.build(),this.slatInnerCoordCache.build()},e.prototype.computeDateSnapCoverage=function(t){var e,i,n;return(i=nt(this.start,t,this.snapDuration))<0?0:i>=this.snapDiffToIndex.length?this.snapCnt:(n=Math.floor(i),e=this.snapDiffToIndex[n],_t(e)?e+=i-n:e=Math.ceil(e),e)},e.prototype.dateToCoord=function(t){var e,i,n,r;return n=this.computeDateSnapCoverage(t)/this.snapsPerSlot,r=Math.floor(n),i=n-(r=Math.min(r,this.slotCnt-1)),e=this.slatInnerCoordCache,this.isRTL?e.getRightPosition(r)-e.getWidth(r)*i-this.containerCoordCache.getWidth(0):e.getLeftPosition(r)+e.getWidth(r)*i},e.prototype.rangeToCoords=function(t){return this.isRTL?{right:this.dateToCoord(t.start),left:this.dateToCoord(t.end)}:{left:this.dateToCoord(t.start),right:this.dateToCoord(t.end)}},e.prototype.headHeight=function(){var t;return(t=this.headScroller.contentEl.find("table")).height.apply(t,arguments)},e.prototype.updateSegPositions=function(){var t,e,i,n,r;for(e=0,i=(r=(this.segs||[]).concat(this.businessHourSegs||[])).length;e<i;e++)n=r[e],t=this.rangeToCoords(n),n.el.css({left:n.left=t.left,right:-(n.right=t.right)})},e.prototype.computeInitialScroll=function(){var t,e;return t=0,this.isTimeScale&&((e=this.opt("scrollTime"))&&(e=d.duration(e),t=this.dateToCoord(this.start.clone().time(e)))),{left:t,top:0}},e.prototype.queryScroll=function(){return{left:bt(this.bodyScroller.scrollEl),top:this.bodyScroller.scrollEl.scrollTop()}},e.prototype.setScroll=function(t){return bt(this.headScroller.scrollEl,t.left),bt(this.bodyScroller.scrollEl,t.left),this.bodyScroller.scrollEl.scrollTop(t.top)},e.prototype.renderFgSegs=function(t){return t=this.renderFgSegEls(t),this.renderFgSegsInContainers([[this,t]]),this.updateSegFollowers(t),t},e.prototype.unrenderFgSegs=function(){return this.clearSegFollowers(),this.unrenderFgContainers([this])},e.prototype.renderFgSegsInContainers=function(t){var e,i,n,r,s,o,a,l,d,h,c,u,p,f,g,m,_,v,y,w,b,S,C,x,D;for(n=0,o=t.length;n<o;n++)for(e=(y=t[n])[0],r=0,a=(D=y[1]).length;r<a;r++)x=D[r],i=this.rangeToCoords(x),x.el.css({left:x.left=i.left,right:-(x.right=i.right)});for(s=0,l=t.length;s<l;s++)for(e=(w=t[s])[0],f=0,d=(D=w[1]).length;f<d;f++)(x=D[f]).el.appendTo(e.segContainerEl);for(g=0,h=t.length;g<h;g++){for(e=(b=t[g])[0],m=0,c=(D=b[1]).length;m<c;m++)(x=D[m]).height=x.el.outerHeight(!0);this.buildSegLevels(D),e.segContainerHeight=X(D)}for(C=[],_=0,u=t.length;_<u;_++){for(e=(S=t[_])[0],v=0,p=(D=S[1]).length;v<p;v++)(x=D[v]).el.css("top",x.top);C.push(e.segContainerEl.height(e.segContainerHeight))}return C},e.prototype.buildSegLevels=function(t){var e,i,n,r,s,o,a,l,d,h,c,u,p,f;for(p=[],this.sortEventSegs(t),n=0,o=t.length;n<o;n++){for((f=t[n]).above=[],d=0;d<p.length;){for(i=!1,r=0,a=(c=p[d]).length;r<a;r++)h=c[r],It(f,h)&&(f.above.push(h),i=!0);if(!i)break;d+=1}for((p[d]||(p[d]=[])).push(f),d+=1;d<p.length;){for(s=0,l=(u=p[d]).length;s<l;s++)e=u[s],It(f,e)&&e.above.push(f);d+=1}}return p},e.prototype.unrenderFgContainers=function(t){var e,i,n,r;for(r=[],i=0,n=t.length;i<n;i++)(e=t[i]).segContainerEl.empty(),e.segContainerEl.height(""),r.push(e.segContainerHeight=null);return r},e.prototype.fgSegHtml=function(t){var e,i,n,r,s,o;return i=t.event,n=this.view.isEventDraggable(i),s=t.isStart&&this.view.isEventResizableFromStart(i),r=t.isEnd&&this.view.isEventResizableFromEnd(i),(e=this.getSegClasses(t,n,s||r)).unshift("fc-timeline-event","fc-h-event"),o=this.getEventTimeText(i),'<a class="'+e.join(" ")+'" style="'+J(this.getSegSkinCss(t))+'"'+(i.url?' href="'+pt(i.url)+'"':"")+'><div class="fc-content">'+(o?'<span class="fc-time">'+pt(o)+"</span>":"")+'<span class="fc-title">'+(i.title?pt(i.title):"&nbsp;")+'</span></div><div class="fc-bg" />'+(s?'<div class="fc-resizer fc-start-resizer"></div>':"")+(r?'<div class="fc-resizer fc-end-resizer"></div>':"")+"</a>"},e.prototype.updateSegFollowers=function(t){var e,i,n,r;if(this.eventTitleFollower){for(n=[],e=0,i=t.length;e<i;e++)(r=t[e].el.find(".fc-title")).length&&n.push(new Y(r));return this.eventTitleFollower.setSprites(n)}},e.prototype.clearSegFollowers=function(){return this.eventTitleFollower?this.eventTitleFollower.clearSprites():void 0},e.prototype.segDragStart=function(){return e.__super__.segDragStart.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.forceRelative():void 0},e.prototype.segDragEnd=function(){return e.__super__.segDragEnd.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.clearForce():void 0},e.prototype.segResizeStart=function(){return e.__super__.segResizeStart.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.forceRelative():void 0},e.prototype.segResizeEnd=function(){return e.__super__.segResizeEnd.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.clearForce():void 0},e.prototype.renderHelper=function(t,e){var i;return i=this.eventToSegs(t),i=this.renderFgSegEls(i),this.renderHelperSegsInContainers([[this,i]],e)},e.prototype.renderHelperSegsInContainers=function(t,e){var i,n,r,s,o,a,l,d,h,c,u,p,f,g,m,_,v;for(s=[],o=0,d=t.length;o<d;o++)for(i=(f=t[o])[0],a=0,h=(v=f[1]).length;a<h;a++)_=v[a],n=this.rangeToCoords(_),_.el.css({left:_.left=n.left,right:-(_.right=n.right)}),e&&e.resourceId===(null!=(g=i.resource)?g.id:void 0)?_.el.css("top",e.el.css("top")):_.el.css("top",0);for(l=0,c=t.length;l<c;l++)for(i=(m=t[l])[0],v=m[1],r=y('<div class="fc-event-container fc-helper-container"/>').appendTo(i.innerEl),s.push(r[0]),p=0,u=v.length;p<u;p++)_=v[p],r.append(_.el);return this.helperEls=this.helperEls?this.helperEls.add(y(s)):y(s)},e.prototype.unrenderHelper=function(){return this.helperEls?(this.helperEls.remove(),this.helperEls=null):void 0},e.prototype.renderEventResize=function(t,e){return this.renderHighlight(this.eventToSpan(t)),this.renderEventLocationHelper(t,e)},e.prototype.unrenderEventResize=function(){return this.unrenderHighlight(),this.unrenderHelper()},e.prototype.renderFill=function(t,e,i){return e=this.renderFillSegEls(t,e),this.renderFillInContainers(t,[[this,e]],i),e},e.prototype.renderFillInContainers=function(t,e,i){var n,r,s,o,a,l;for(a=[],r=0,s=e.length;r<s;r++)n=(o=e[r])[0],l=o[1],a.push(this.renderFillInContainer(t,n,l,i));return a},e.prototype.renderFillInContainer=function(t,e,i,n){var r,s,o,a,l;if(i.length){for(n||(n=t.toLowerCase()),r=y('<div class="fc-'+n+'-container" />').appendTo(e.bgSegContainerEl),o=0,a=i.length;o<a;o++)l=i[o],s=this.rangeToCoords(l),l.el.css({left:l.left=s.left,right:-(l.right=s.right)}),l.el.appendTo(r);return this.elsByFill[t]=this.elsByFill[t]?this.elsByFill[t].add(r):r}},e.prototype.renderDrag=function(t,e){return e?(this.renderEventLocationHelper(t,e),this.applyDragOpacity(this.helperEls),!0):(this.renderHighlight(this.eventToSpan(t)),!1)},e.prototype.unrenderDrag=function(){return this.unrenderHelper(),this.unrenderHighlight()},e}(),X=function(t){var e,i,n,r;for(e=n=0,i=t.length;e<i;e++)r=t[e],n=Math.max(n,Z(r));return n},Z=function(t){return null==t.top&&(t.top=X(t.above)),t.top+t.height},It=function(t,e){return t.left<e.right&&t.right>e.left},_=18,g=6,p=200,m=1e3,o={months:1},F=[{years:1},{months:1},{days:1},{hours:1},{minutes:30},{minutes:15},{minutes:10},{minutes:5},{minutes:1},{seconds:30},{seconds:15},{seconds:10},{seconds:5},{seconds:1},{milliseconds:500},{milliseconds:100},{milliseconds:10},{milliseconds:1}],A.prototype.initScaleProps=function(){var t,e,i;return this.labelInterval=this.queryDurationOption("slotLabelInterval"),this.slotDuration=this.queryDurationOption("slotDuration"),this.ensureGridDuration(),this.validateLabelAndSlot(),this.ensureLabelInterval(),this.ensureSlotDuration(),t=this.opt("slotLabelFormat"),i=y.type(t),this.headerFormats="array"===i?t:"string"===i?[t]:this.computeHeaderFormats(),this.isTimeScale=rt(this.slotDuration),this.largeUnit=this.isTimeScale?void 0:(e=q(this.slotDuration),/year|month|week/.test(e)?e:void 0),this.emphasizeWeeks=1===this.slotDuration.as("days")&&2<=this.duration.as("weeks")&&!this.opt("businessHours")},A.prototype.queryDurationOption=function(t){var e,i;return null!=(i=this.opt(t))&&+(e=d.duration(i))?e:void 0},A.prototype.validateLabelAndSlot=function(){var t,e,i;return this.labelInterval&&(t=it(this.duration,this.labelInterval),m<t&&(c.warn("slotLabelInterval results in too many cells"),this.labelInterval=null)),this.slotDuration&&(e=it(this.duration,this.slotDuration),m<e&&(c.warn("slotDuration results in too many cells"),this.slotDuration=null)),this.labelInterval&&this.slotDuration&&(i=it(this.labelInterval,this.slotDuration),!_t(i)||i<1)?(c.warn("slotLabelInterval must be a multiple of slotDuration"),this.slotDuration=null):void 0},A.prototype.ensureGridDuration=function(){var t,e,i,n,r;if(!(t=this.duration)){if(!(t=this.view.intervalDuration))if(this.labelInterval||this.slotDuration)for(r=this.ensureLabelInterval(),i=F.length-1;0<=i&&(e=F[i],t=d.duration(e),n=it(t,r),!(_<=n));i+=-1);else t=d.duration(o);this.duration=t}return t},A.prototype.ensureLabelInterval=function(){var t,e,i,n,r,s,o,a,l;if(!(r=this.labelInterval)){if(this.duration||this.slotDuration||this.ensureGridDuration(),this.slotDuration){for(e=0,s=F.length;e<s;e++)if(t=F[e],l=d.duration(t),a=it(l,this.slotDuration),_t(a)&&a<=g){r=l;break}r||(r=this.slotDuration)}else for(i=0,o=F.length;i<o&&(t=F[i],r=d.duration(t),n=it(this.duration,r),!(_<=n));i++);this.labelInterval=r}return r},A.prototype.ensureSlotDuration=function(){var t,e,i,n,r,s,o,a;if(!(s=this.slotDuration)){for(i=this.ensureLabelInterval(),e=0,n=F.length;e<n;e++)if(t=F[e],a=d.duration(t),o=it(i,a),_t(o)&&1<o&&o<=g){s=a;break}s&&this.duration&&(r=it(this.duration,s),p<r&&(s=null)),s||(s=i),this.slotDuration=s}return s},A.prototype.computeHeaderFormats=function(){var t,e,i,n,r,s,o;switch(this.view,n=this.duration,r=this.labelInterval,s=q(r),o=this.opt("weekNumbers"),t=e=i=null,"week"!==s||o||(s="day"),s){case"year":t="YYYY";break;case"month":1<n.asYears()&&(t="YYYY"),e="MMM";break;case"week":1<n.asYears()&&(t="YYYY"),e=this.opt("shortWeekFormat");break;case"day":1<n.asYears()?t=this.opt("monthYearFormat"):1<n.asMonths()&&(t="MMMM"),o&&(e=this.opt("weekFormat")),i="dd D";break;case"hour":o&&(t=this.opt("weekFormat")),1<n.asDays()&&(e=this.opt("dayOfMonthFormat")),i=this.opt("smallTimeFormat");break;case"minute":r.asMinutes()/60>=g?(t=this.opt("hourFormat"),e="[:]mm"):t=this.opt("mediumTimeFormat");break;case"second":r.asSeconds()/60>=g?(t="LT",e="[:]ss"):t="LTS";break;case"millisecond":t="LTS",e="[.]SSS"}return[].concat(t||[],e||[],i||[])},c.views.timeline={"class":W,defaults:{eventResizableFromStart:!0}},c.views.timelineDay={type:"timeline",duration:{days:1}},c.views.timelineWeek={type:"timeline",duration:{weeks:1}},c.views.timelineMonth={type:"timeline",duration:{months:1}},c.views.timelineYear={type:"timeline",duration:{years:1}},H=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,W),e.mixin(M),e.prototype.resourceGrid=null,e.prototype.tbodyHash=null,e.prototype.joiner=null,e.prototype.dividerEls=null,e.prototype.superHeaderText=null,e.prototype.isVGrouping=null,e.prototype.isHGrouping=null,e.prototype.groupSpecs=null,e.prototype.colSpecs=null,e.prototype.orderSpecs=null,e.prototype.rowHierarchy=null,e.prototype.resourceRowHash=null,e.prototype.nestingCnt=0,e.prototype.isNesting=null,e.prototype.dividerWidth=null,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.processResourceOptions(),this.resourceGrid=new O(this),this.rowHierarchy=new I(this),this.resourceRowHash={}},e.prototype.instantiateGrid=function(){return new $(this)},e.prototype.processResourceOptions=function(){var t,e,i,n,r,s,o,a,l,d,h,c,u,p,f,g,m,_,v,y,w,b;for(t=this.opt("resourceColumns")||[],f=this.opt("resourceLabelText"),n="Resources",b=null,t.length?b=f:t.push({labelText:f||n,text:this.getResourceTextFunc()}),y=[],r=[],d=h=!(o=[]),c=0,g=t.length;c<g;c++)(i=t[c]).group?r.push(i):y.push(i);for(y[0].isMain=!0,r.length?(o=r,h=!0):(a=this.opt("resourceGroupField"))&&(d=!0,o.push({field:a,text:this.opt("resourceGroupText"),render:this.opt("resourceGroupRender")})),w=[],u=0,m=(e=Et(this.opt("resourceOrder"))).length;u<m;u++){for(v=e[u],l=!1,p=0,_=o.length;p<_;p++)if((s=o[p]).field===v.field){s.order=v.order,l=!0;break}l||w.push(v)}return this.superHeaderText=b,this.isVGrouping=h,this.isHGrouping=d,this.groupSpecs=o,this.colSpecs=r.concat(y),this.orderSpecs=w},e.prototype.renderSkeleton=function(){return e.__super__.renderSkeleton.apply(this,arguments),this.renderResourceGridSkeleton(),this.tbodyHash={spreadsheet:this.resourceGrid.tbodyEl,event:this.timeGrid.tbodyEl},this.joiner=new L("vertical",[this.resourceGrid.bodyScroller,this.timeGrid.bodyScroller]),
this.initDividerMoving()},e.prototype.renderSkeletonHtml=function(){return'<table> <thead class="fc-head"> <tr> <td class="fc-resource-area '+this.widgetHeaderClass+'"></td> <td class="fc-divider fc-col-resizer '+this.widgetHeaderClass+'"></td> <td class="fc-time-area '+this.widgetHeaderClass+'"></td> </tr> </thead> <tbody class="fc-body"> <tr> <td class="fc-resource-area '+this.widgetContentClass+'"></td> <td class="fc-divider fc-col-resizer '+this.widgetHeaderClass+'"></td> <td class="fc-time-area '+this.widgetContentClass+'"></td> </tr> </tbody> </table>'},e.prototype.renderResourceGridSkeleton=function(){return this.resourceGrid.el=this.el.find("tbody .fc-resource-area"),this.resourceGrid.headEl=this.el.find("thead .fc-resource-area"),this.resourceGrid.renderSkeleton()},e.prototype.initDividerMoving=function(){var t,e;return this.dividerEls=this.el.find(".fc-divider"),this.dividerWidth=null!=(t=this.opt("resourceAreaWidth"))?t:this.resourceGrid.tableWidth,null!=this.dividerWidth&&this.positionDivider(this.dividerWidth),this.dividerEls.on("mousedown",(e=this,function(t){return e.dividerMousedown(t)}))},e.prototype.dividerMousedown=function(t){var i,n,r,s,e,o,a;return i=this.opt("isRTL"),r=30,n=this.el.width()-30,s=this.getNaturalDividerWidth(),new l({dragStart:(a=this,function(){return a.dividerEls.addClass("fc-active")}),drag:(o=this,function(t){var e;return e=i?s-t:s+t,e=Math.max(e,r),e=Math.min(e,n),o.dividerWidth=e,o.positionDivider(e),o.updateWidth()}),dragStop:(e=this,function(){return e.dividerEls.removeClass("fc-active")})}).mousedown(t)},e.prototype.getNaturalDividerWidth=function(){return this.el.find(".fc-resource-area").width()},e.prototype.positionDivider=function(t){return this.el.find(".fc-resource-area").width(t)},e.prototype.renderEvents=function(t){return this.timeGrid.renderEvents(t),this.syncRowHeights(),this.updateWidth()},e.prototype.unrenderEvents=function(){return this.timeGrid.unrenderEvents(),this.syncRowHeights(),this.updateWidth()},e.prototype.updateWidth=function(){return e.__super__.updateWidth.apply(this,arguments),this.resourceGrid.updateWidth(),this.joiner.update(),this.cellFollower?this.cellFollower.update():void 0},e.prototype.updateHeight=function(t){return e.__super__.updateHeight.apply(this,arguments),t?this.syncRowHeights():void 0},e.prototype.setHeight=function(t,e){var i,n;return n=this.syncHeadHeights(),i=e?"auto":t-n-this.queryMiscHeight(),this.timeGrid.bodyScroller.setHeight(i),this.resourceGrid.bodyScroller.setHeight(i)},e.prototype.queryMiscHeight=function(){return this.el.outerHeight()-Math.max(this.resourceGrid.headScroller.el.outerHeight(),this.timeGrid.headScroller.el.outerHeight())-Math.max(this.resourceGrid.bodyScroller.el.outerHeight(),this.timeGrid.bodyScroller.el.outerHeight())},e.prototype.syncHeadHeights=function(){var t;return this.resourceGrid.headHeight("auto"),this.timeGrid.headHeight("auto"),t=Math.max(this.resourceGrid.headHeight(),this.timeGrid.headHeight()),this.resourceGrid.headHeight(t),this.timeGrid.headHeight(t),t},e.prototype.scrollToResource=function(t){return this.timeGrid.scrollToResource(t)},e.prototype.setResources=function(t){var e,i,n;for(this.batchRows(),e=0,i=t.length;e<i;e++)n=t[e],this.insertResource(n);return this.rowHierarchy.show(),this.unbatchRows(),this.reinitializeCellFollowers()},e.prototype.unsetResources=function(){return this.clearEvents(),this.batchRows(),this.rowHierarchy.removeChildren(),this.unbatchRows(),this.reinitializeCellFollowers()},e.prototype.addResource=function(t){return this.insertResource(t),this.reinitializeCellFollowers()},e.prototype.removeResource=function(t){var e;return(e=this.getResourceRow(t.id))?(this.batchRows(),e.remove(),this.unbatchRows(),this.reinitializeCellFollowers()):void 0},e.prototype.cellFollower=null,e.prototype.reinitializeCellFollowers=function(){var t,e,i,n,r,s;for(this.cellFollower&&this.cellFollower.clearSprites(),this.cellFollower=new G(this.resourceGrid.bodyScroller),this.cellFollower.isHFollowing=!1,this.cellFollower.isVFollowing=!0,n=[],e=0,i=(r=this.rowHierarchy.getNodes()).length;e<i;e++)(s=r[e])instanceof V&&s.groupTd&&((t=s.groupTd.find(".fc-cell-content")).length&&n.push(t[0]));return this.cellFollower.setSprites(y(n))},e.prototype.insertResource=function(t,e){var i,n,r,s,o,a,l;for(l=new k(this,t),null==e&&((s=t.parentId)&&(e=this.getResourceRow(s))),e?this.insertRowAsChild(l,e):this.insertRow(l),a=[],n=0,r=(o=t.children).length;n<r;n++)i=o[n],a.push(this.insertResource(i,l));return a},e.prototype.insertRow=function(t,e,i){var n;return null==e&&(e=this.rowHierarchy),null==i&&(i=this.groupSpecs),i.length?(n=this.ensureResourceGroup(t,e,i[0]))instanceof f?this.insertRowAsChild(t,n):this.insertRow(t,n,i.slice(1)):this.insertRowAsChild(t,e)},e.prototype.insertRowAsChild=function(t,e){return e.addChild(t,this.computeChildRowPosition(t,e))},e.prototype.computeChildRowPosition=function(t,e){var i,n,r,s,o;if(this.orderSpecs.length)for(i=n=0,r=(s=e.children).length;n<r;i=++n)if(o=s[i],0<this.compareResources(o.resource||{},t.resource||{}))return i;return null},e.prototype.compareResources=function(t,e){return U(t,e,this.orderSpecs)},e.prototype.ensureResourceGroup=function(t,e,i){var n,r,s,o,a,l,d,h,c,u,p;if(s=(t.resource||{})[i.field],r=null,i.order)for(o=a=0,d=(c=e.children).length;a<d;o=++a){if(p=c[o],0===(n=st(p.groupValue,s)*i.order)){r=p;break}if(0<n)break}else for(o=l=0,h=(u=e.children).length;l<h;o=++l)if((p=u[o]).groupValue===s){r=p;break}return r||(r=this.isVGrouping?new V(this,i,s):new f(this,i,s),e.addChild(r,o)),r},e.prototype.pairSegsWithRows=function(t){var e,i,n,r,s,o,a,l;for(r=[],s={},e=0,i=t.length;e<i;e++)(o=(l=t[e]).resourceId)&&((a=this.getResourceRow(o))&&((n=s[o])||(n=[a,[]],r.push(n),s[o]=n),n[1].push(l)));return r},e.prototype.rowAdded=function(t){var e;return t instanceof k&&(this.resourceRowHash[t.resource.id]=t),this.isNesting!==(e=Boolean(this.nestingCnt+=t.depth?1:0))&&(this.el.toggleClass("fc-nested",e),this.el.toggleClass("fc-flat",!e)),this.isNesting=e},e.prototype.rowRemoved=function(t){var e;return t instanceof k&&delete this.resourceRowHash[t.resource.id],this.isNesting!==(e=Boolean(this.nestingCnt-=t.depth?1:0))&&(this.el.toggleClass("fc-nested",e),this.el.toggleClass("fc-flat",!e)),this.isNesting=e},e.prototype.batchRowDepth=0,e.prototype.shownRowBatch=null,e.prototype.hiddenRowBatch=null,e.prototype.batchRows=function(){return this.batchRowDepth++?void 0:(this.shownRowBatch=[],this.hiddenRowBatch=[])},e.prototype.unbatchRows=function(){return--this.batchRowDepth?void 0:(this.hiddenRowBatch.length&&this.rowsHidden(this.hiddenRowBatch),this.shownRowBatch.length&&this.rowsShown(this.shownRowBatch),this.hiddenRowBatch=null,this.shownRowBatch=null)},e.prototype.rowShown=function(t){return this.shownRowBatch?this.shownRowBatch.push(t):this.rowsShown([t])},e.prototype.rowHidden=function(t){return this.hiddenRowBatch?this.hiddenRowBatch.push(t):this.rowsHidden([t])},e.prototype.rowsShown=function(t){return this.syncRowHeights(t),this.updateWidth()},e.prototype.rowsHidden=function(){return this.updateWidth()},e.prototype.syncRowHeights=function(n,r){var s,t,e,i,o,a,l,d,h,c;for(null==r&&(r=!1),null==n&&(n=this.getVisibleRows()),a=0,d=n.length;a<d;a++)(c=n[a]).setTrInnerHeight("");for(o=function(){var t,e,i;for(i=[],t=0,e=n.length;t<e;t++)c=n[t],s=c.getMaxTrInnerHeight(),r&&(s+=s%2),i.push(s);return i}(),i=l=0,h=n.length;l<h;i=++l)(c=n[i]).setTrInnerHeight(o[i]);return!r&&(t=this.resourceGrid.tbodyEl.height(),e=this.timeGrid.tbodyEl.height(),1<Math.abs(t-e))?this.syncRowHeights(n,!0):void 0},e.prototype.getVisibleRows=function(){var t,e,i,n,r;for(n=[],t=0,e=(i=this.rowHierarchy.getRows()).length;t<e;t++)(r=i[t]).isShown&&n.push(r);return n},e.prototype.getEventRows=function(){var t,e,i,n,r;for(n=[],t=0,e=(i=this.rowHierarchy.getRows()).length;t<e;t++)(r=i[t])instanceof h&&n.push(r);return n},e.prototype.getResourceRow=function(t){return this.resourceRowHash[t]},e.prototype.setScroll=function(t){return e.__super__.setScroll.apply(this,arguments),this.resourceGrid.bodyScroller.scrollTop(t.top)},e}(),$=function(){function l(){return l.__super__.constructor.apply(this,arguments)}return Yt(l,A),l.mixin(D),l.prototype.eventRows=null,l.prototype.shownEventRows=null,l.prototype.tbodyEl=null,l.prototype.rowCoordCache=null,l.prototype.spanToSegs=function(t){var e,i,n,r,s,o;if(o=l.__super__.spanToSegs.apply(this,arguments),e=this.view.calendar,r=t.resourceId)for(i=0,n=o.length;i<n;i++)(s=o[i]).resource=e.getResourceById(r),s.resourceId=r;return o},l.prototype.prepareHits=function(){var r,t;return l.__super__.prepareHits.apply(this,arguments),this.eventRows=this.view.getEventRows(),this.shownEventRows=function(){var t,e,i,n;for(n=[],t=0,e=(i=this.eventRows).length;t<e;t++)(r=i[t]).isShown&&n.push(r);return n}.call(this),t=function(){var t,e,i,n;for(n=[],t=0,e=(i=this.shownEventRows).length;t<e;t++)r=i[t],n.push(r.getTr("event")[0]);return n}.call(this),this.rowCoordCache=new s({els:t,isVertical:!0}),this.rowCoordCache.build()},l.prototype.releaseHits=function(){return l.__super__.releaseHits.apply(this,arguments),this.eventRows=null,this.shownEventRows=null,this.rowCoordCache.clear()},l.prototype.queryHit=function(t,e){var i,n;return(n=l.__super__.queryHit.apply(this,arguments))&&null!=(i=this.rowCoordCache.getVerticalIndex(e))?{resourceId:this.shownEventRows[i].resource.id,snap:n.snap,component:this,left:n.left,right:n.right,top:this.rowCoordCache.getTopOffset(i),bottom:this.rowCoordCache.getBottomOffset(i)}:void 0},l.prototype.getHitSpan=function(t){var e;return(e=this.getSnapRange(t.snap)).resourceId=t.resourceId,e},l.prototype.getHitEl=function(t){return this.getSnapEl(t.snap)},l.prototype.renderSkeleton=function(){var t;return l.__super__.renderSkeleton.apply(this,arguments),this.segContainerEl.remove(),this.segContainerEl=null,t=y('<div class="fc-rows"><table><tbody/></table></div>').appendTo(this.bodyScroller.contentEl),this.tbodyEl=t.find("tbody")},l.prototype.renderFgSegs=function(t){var e,i,n,r,s,o,a;for(t=this.renderFgSegEls(t),a=[],n=0,r=(o=this.view.pairSegsWithRows(t)).length;n<r;n++)e=(s=o[n])[0],i=s[1],e.fgSegs=i,e.isShown&&(e.isSegsRendered=!0,a.push(s));return this.renderFgSegsInContainers(a),this.updateSegFollowers(t),t},l.prototype.unrenderFgSegs=function(){var t,e,i,n;for(this.clearSegFollowers(),i=0,n=(e=this.view.getEventRows()).length;i<n;i++)(t=e[i]).fgSegs=null,t.isSegsRendered=!1;return this.unrenderFgContainers(e)},l.prototype.renderFill=function(t,e,i){var n,r,s,o,a,l,d,h,c,u,p,f;for(h=[],a=[],n=0,s=(e=this.renderFillSegEls(t,e)).length;n<s;n++)(p=e[n]).resourceId?h.push(p):a.push(p);for(f=[],r=0,o=(d=this.view.pairSegsWithRows(h)).length;r<o;r++)c=(l=d[r])[0],u=l[1],"bgEvent"===t&&(c.bgSegs=u),c.isShown&&f.push(l);return a.length&&f.unshift([this,a]),this.renderFillInContainers(t,f,i),e},l.prototype.renderHelper=function(t,e){var i,n;return n=this.eventToSegs(t),n=this.renderFgSegEls(n),i=this.view.pairSegsWithRows(n),this.renderHelperSegsInContainers(i,e)},l.prototype.computeInitialScroll=function(t){var e;return e=l.__super__.computeInitialScroll.apply(this,arguments),t&&(e.resourceId=t.resourceId,e.bottom=t.bottom),e},l.prototype.queryScroll=function(){var t,e,i,n,r,s,o,a;for(a=l.__super__.queryScroll.apply(this,arguments),o=this.bodyScroller.scrollEl.offset().top,i=0,n=(r=this.view.getVisibleRows()).length;i<n;i++)if((s=r[i]).resource&&o<(e=(t=s.getTr("event")).offset().top+t.outerHeight())){a.resourceId=s.resource.id,a.bottom=e-o;break}return a},l.prototype.setScroll=function(t){var e,i,n,r;return t.resourceId&&((r=this.view.getResourceRow(t.resourceId))&&((e=r.getTr("event"))&&(n=this.bodyScroller.innerEl.offset().top,i=e.offset().top+e.outerHeight(),t.top=i-t.bottom-n))),l.__super__.setScroll.call(this,t)},l.prototype.scrollToResource=function(t){var e,i,n,r;return(n=this.view.getResourceRow(t.id))&&(e=n.getTr("event"))?(i=this.bodyScroller.innerEl.offset().top,r=e.offset().top-i,this.bodyScroller.scrollEl.scrollTop(r)):void 0},l}(),a=30,O=function(){function t(t){var r;this.view=t,this.isRTL=this.view.opt("isRTL"),this.givenColWidths=this.colWidths=function(){var t,e,i,n;for(n=[],t=0,e=(i=this.view.colSpecs).length;t<e;t++)r=i[t],n.push(r.width);return n}.call(this)}return t.prototype.view=null,t.prototype.headEl=null,t.prototype.el=null,t.prototype.tbodyEl=null,t.prototype.headScroller=null,t.prototype.bodyScroller=null,t.prototype.joiner=null,t.prototype.colGroupHtml="",t.prototype.headTable=null,t.prototype.headColEls=null,t.prototype.headCellEls=null,t.prototype.bodyColEls=null,t.prototype.bodyTable=null,t.prototype.renderSkeleton=function(){return this.headScroller=new P("invisible-scroll","hidden"),this.headScroller.contentEl.html(this.renderHeadHtml()),this.headEl.append(this.headScroller.el),this.bodyScroller=new P("auto","invisible-scroll"),this.bodyScroller.contentEl.html("<table>"+this.colGroupHtml+"<tbody/></table>"),this.tbodyEl=this.bodyScroller.contentEl.find("tbody"),this.el.append(this.bodyScroller.el),this.joiner=new L("horizontal",[this.headScroller,this.bodyScroller]),this.headTable=this.headEl.find("table"),this.headColEls=this.headEl.find("col"),this.headCellEls=this.headScroller.contentEl.find("tr:last-child th"),this.bodyColEls=this.el.find("col"),this.bodyTable=this.el.find("table"),this.colMinWidths=this.computeColMinWidths(),this.applyColWidths(),this.initColResizing()},t.prototype.renderHeadHtml=function(){var t,e,i,n,r,s,o,a,l,d;for(i="<table>",t="<colgroup>",s=0,a=(e=this.view.colSpecs).length;s<a;s++)t+=(d=e[s]).isMain?'<col class="fc-main-col"/>':"<col/>";for(t+="</colgroup>",i+=this.colGroupHtml=t,i+="<tbody>",this.view.superHeaderText&&(i+='<tr class="fc-super"><th class="'+this.view.widgetHeaderClass+'" colspan="'+e.length+'"><div class="fc-cell-content"><span class="fc-cell-text">'+pt(this.view.superHeaderText)+"</span></div></th></tr>"),i+="<tr>",!0,n=o=0,l=e.length;o<l;n=++o)d=e[n],r=n===e.length-1,i+='<th class="'+this.view.widgetHeaderClass+'"><div><div class="fc-cell-content">'+(d.isMain?'<div class="fc-icon fc-expander-space" />':"")+'<span class="fc-cell-text">'+pt(d.labelText||"")+"</span></div>"+(r?"":'<div class="fc-col-resizer"></div>')+"</div></th>";return(i+="</tr>")+"</tbody></table>"},t.prototype.givenColWidths=null,t.prototype.colWidths=null,t.prototype.colMinWidths=null,t.prototype.tableWidth=null,t.prototype.tableMinWidth=null,t.prototype.initColResizing=function(){return this.headEl.find("th .fc-col-resizer").each((n=this,function(e,i){return(i=y(i)).on("mousedown",function(t){return n.colResizeMousedown(e,t,i)})}));var n},t.prototype.colResizeMousedown=function(i,t,e){var n,r,s,o;return(n=this.colWidths=this.queryColWidths()).pop(),n.push(null),s=n[i],r=Math.min(this.colMinWidths[i],a),new l({dragStart:function(){return e.addClass("fc-active")},drag:(o=this,function(t){var e;return e=s+(o.isRTL?-t:t),e=Math.max(e,r),n[i]=e,o.applyColWidths()}),dragStop:function(){return e.removeClass("fc-active")}}).mousedown(t)},t.prototype.applyColWidths=function(){var t,e,i,n,r,s,o,a,l,d,h,c,u,p,f,g,m;for(i=this.colMinWidths,e=!(t=!0),d=m=0,u=(r=this.colWidths).length;d<u;d++)"number"==typeof(n=r[d])?m+=n:(t=!1,n&&(e=!0));for(a=e&&!this.view.isHGrouping?"auto":"",o=function(){var t,e,i;for(i=[],l=t=0,e=r.length;t<e;l=++t)n=r[l],i.push(null!=n?n:a);return i}(),l=h=g=0,p=o.length;h<p;l=++h)g+="number"==typeof(s=o[l])?s:i[l];for(l=c=0,f=o.length;c<f;l=++c)s=o[l],this.headColEls.eq(l).width(s),this.bodyColEls.eq(l).width(s);return this.headScroller.setContentMinWidth(g),this.bodyScroller.setContentMinWidth(g),this.tableMinWidth=g,this.tableWidth=t?m:void 0},t.prototype.computeColMinWidths=function(){var t,e,i,n,r,s;for(r=[],t=e=0,i=(n=this.givenColWidths).length;e<i;t=++e)s=n[t],r.push("number"==typeof s?s:parseInt(this.headColEls.eq(t).css("min-width"))||a);return r},t.prototype.queryColWidths=function(){var t,e,i,n,r;for(r=[],t=0,e=(n=this.headCellEls).length;t<e;t++)i=n[t],r.push(y(i).outerWidth());return r},t.prototype.updateWidth=function(){return this.headScroller.update(),this.bodyScroller.update(),this.joiner.update(),this.follower?this.follower.update():void 0},t.prototype.headHeight=function(){var t;return(t=this.headScroller.contentEl.find("table")).height.apply(t,arguments)},t}(),I=function(){function t(t){this.view=t,this.children=[],this.trHash={},this.trs=y()}return t.prototype.view=null,t.prototype.parent=null,t.prototype.prevSibling=null,t.prototype.children=null,t.prototype.depth=0,t.prototype.hasOwnRow=!1,t.prototype.trHash=null,t.prototype.trs=null,t.prototype.isRendered=!1,t.prototype.isExpanded=!0,t.prototype.isShown=!1,t.prototype.addChild=function(t,e){var i,n,r,s;for(t.remove(),i=this.children,null!=e?i.splice(e,0,t):(e=i.length,i.push(t)),t.prevSibling=0<e?i[e-1]:null,e<i.length-1&&(i[e+1].prevSibling=t),t.parent=this,t.depth=this.depth+(this.hasOwnRow?1:0),n=0,r=(s=t.getNodes()).length;n<r;n++)s[n].added();return this.isShown&&this.isExpanded?t.show():void 0},t.prototype.removeChild=function(t){var e,i,n,r,s,o,a,l;for(n=!1,i=r=0,o=(e=this.children).length;r<o;i=++r)if(e[i]===t){n=!0;break}if(n){for(i<e.length-1&&(e[i+1].prevSibling=t.prevSibling),e.splice(i,1),t.recursivelyUnrender(),s=0,a=(l=t.getNodes()).length;s<a;s++)l[s].removed();return t.parent=null,t.prevSibling=null,t}return!1},t.prototype.removeChildren=function(){var t,e,i,n,r,s;for(t=0,i=(r=this.children).length;t<i;t++)r[t].recursivelyUnrender();for(e=0,n=(s=this.getDescendants()).length;e<n;e++)s[e].removed();return this.children=[]},t.prototype.remove=function(){return this.parent?this.parent.removeChild(this):void 0},t.prototype.getLastChild=function(){var t;return(t=this.children)[t.length-1]},t.prototype.getPrevRow=function(){var t,e;for(e=this;e;){if(e.prevSibling)for(e=e.prevSibling;t=e.getLastChild();)e=t;else e=e.parent;if(e&&e.hasOwnRow&&e.isShown)return e}return null},t.prototype.getLeadingRow=function(){return this.hasOwnRow?this:this.isExpanded&&this.children.length?this.children[0].getLeadingRow():void 0},t.prototype.getRows=function(t){var e,i,n;for(null==t&&(t=[]),this.hasOwnRow&&t.push(this),e=0,i=(n=this.children).length;e<i;e++)n[e].getRows(t);return t},t.prototype.getNodes=function(t){var e,i,n;for(null==t&&(t=[]),t.push(this),e=0,i=(n=this.children).length;e<i;e++)n[e].getNodes(t);return t},t.prototype.getDescendants=function(){var t,e,i,n;for(t=[],e=0,i=(n=this.children).length;e<i;e++)n[e].getNodes(t);return t},t.prototype.render=function(){var t,e,i,n,r,s,o;if(this.trHash={},s=[],this.hasOwnRow)for(o in t=this.getPrevRow(),e=this.view.tbodyHash)n=e[o],r=y("<tr/>"),this.trHash[o]=r,s.push(r[0]),this[i="render"+j(o)+"Content"]&&this[i](r),t?t.trHash[o].after(r):n.prepend(r);return this.trs=y(s).on("click",".fc-expander",kt(this,"toggleExpanded")),this.isRendered=!0},t.prototype.unrender=function(){var t,e,i,n;if(this.isRendered){for(i in t=this.trHash)e=t[i],this[n="unrender"+j(i)+"Content"]&&this[n](e);return this.trHash={},this.trs.remove(),this.trs=y(),this.isRendered=!1,this.isShown=!1,this.hidden()}},t.prototype.recursivelyUnrender=function(){var t,e,i,n,r;for(this.unrender(),r=[],e=0,i=(n=this.children).length;e<i;e++)t=n[e],r.push(t.recursivelyUnrender());return r},t.prototype.getTr=function(t){return this.trHash[t]},t.prototype.show=function(){var t,e,i,n,r;if(!this.isShown&&(this.isRendered?this.trs.css("display",""):this.render(),this.ensureSegsRendered&&this.ensureSegsRendered(),this.isExpanded?this.indicateExpanded():this.indicateCollapsed(),this.isShown=!0,this.shown(),this.isExpanded)){for(r=[],e=0,i=(n=this.children).length;e<i;e++)t=n[e],r.push(t.show());return r}},t.prototype.hide=function(){var t,e,i,n,r;if(this.isShown&&(this.isRendered&&this.trs.hide(),this.isShown=!1,this.hidden(),this.isExpanded)){for(r=[],e=0,i=(n=this.children).length;e<i;e++)t=n[e],r.push(t.hide());return r}},t.prototype.expand=function(){var t,e,i;if(!this.isExpanded){for(this.isExpanded=!0,this.indicateExpanded(),this.view.batchRows(),t=0,e=(i=this.children).length;t<e;t++)i[t].show();return this.view.unbatchRows(),this.animateExpand()}},t.prototype.collapse=function(){var t,e,i;if(this.isExpanded){for(this.isExpanded=!1,this.indicateCollapsed(),this.view.batchRows(),t=0,e=(i=this.children).length;t<e;t++)i[t].hide();return this.view.unbatchRows()}},t.prototype.toggleExpanded=function(){return this.isExpanded?this.collapse():this.expand()},t.prototype.indicateExpanded=function(){return this.trs.find(".fc-expander").removeClass(this.getCollapsedIcon()).addClass(this.getExpandedIcon())},t.prototype.indicateCollapsed=function(){return this.trs.find(".fc-expander").removeClass(this.getExpandedIcon()).addClass(this.getCollapsedIcon())},t.prototype.enableExpanding=function(){return this.trs.find(".fc-expander-space").addClass("fc-expander")},t.prototype.disableExpanding=function(){return this.trs.find(".fc-expander-space").removeClass("fc-expander").removeClass(this.getExpandedIcon()).removeClass(this.getCollapsedIcon())},t.prototype.getExpandedIcon=function(){return"fc-icon-down-triangle"},t.prototype.getCollapsedIcon=function(){return"fc-icon-"+(this.view.isRTL?"left":"right")+"-triangle"},t.prototype.animateExpand=function(){var t,e,i;return(i=null!=(t=this.children[0])&&null!=(e=t.getLeadingRow())?e.trs:void 0)?(i.addClass("fc-collapsed"),setTimeout(function(){return i.addClass("fc-transitioning"),i.removeClass("fc-collapsed")}),i.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){return i.removeClass("fc-transitioning")})):void 0},t.prototype.getMaxTrInnerHeight=function(){var n;return n=0,y.each(this.trHash,function(t,e){var i;return i=ot(e).find("> div:not(.fc-cell-content):first"),n=Math.max(i.height(),n)}),n},t.prototype.setTrInnerHeight=function(i){return y.each(this.trHash,function(t,e){return ot(e).find("> div:not(.fc-cell-content):first").height(i)})},t.prototype.shown=function(){return this.hasOwnRow?this.rowShown(this):void 0},t.prototype.hidden=function(){return this.hasOwnRow?this.rowHidden(this):void 0},t.prototype.rowShown=function(t){return(this.parent||this.view).rowShown(t)},t.prototype.rowHidden=function(t){return(this.parent||this.view).rowHidden(t)},t.prototype.added=function(){return this.hasOwnRow?this.rowAdded(this):void 0},t.prototype.removed=function(){return this.hasOwnRow?this.rowRemoved(this):void 0},t.prototype.rowAdded=function(t){return(this.parent||this.view).rowAdded(t)},t.prototype.rowRemoved=function(t){return(this.parent||this.view).rowRemoved(t)},t}(),z=function(){function n(t,e,i){this.groupSpec=e,this.groupValue=i,n.__super__.constructor.apply(this,arguments)}return Yt(n,I),n.prototype.groupSpec=null,n.prototype.groupValue=null,n.prototype.rowRemoved=function(t){return n.__super__.rowRemoved.apply(this,arguments),t===this||this.children.length?void 0:this.remove()},n.prototype.renderGroupContentEl=function(){var t,e;return t=y('<div class="fc-cell-content" />').append(this.renderGroupTextEl()),"function"==typeof(e=this.groupSpec.render)&&(t=e(t,this.groupValue)||t),t},n.prototype.renderGroupTextEl=function(){var t,e;return e=this.groupValue||"","function"==typeof(t=this.groupSpec.text)&&(e=t(e)||e),y('<span class="fc-cell-text" />').text(e)},n}(),f=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yt(t,z),t.prototype.hasOwnRow=!0,t.prototype.renderSpreadsheetContent=function(t){var e;return(e=this.renderGroupContentEl()).prepend('<span class="fc-icon fc-expander" />'),y('<td class="fc-divider" />').attr("colspan",this.view.colSpecs.length).append(y("<div/>").append(e)).appendTo(t)},t.prototype.renderEventContent=function(t){return t.append('<td class="fc-divider"> <div/> </td>')},t}(),V=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yt(t,z),t.prototype.rowspan=0,t.prototype.leadingTr=null,t.prototype.groupTd=null,t.prototype.rowShown=function(){return this.rowspan+=1,this.renderRowspan(),t.__super__.rowShown.apply(this,arguments)},t.prototype.rowHidden=function(){return this.rowspan-=1,this.renderRowspan(),t.__super__.rowHidden.apply(this,arguments)},t.prototype.renderRowspan=function(){var t;return this.rowspan?(this.groupTd||(this.groupTd=y('<td class="'+this.view.widgetContentClass+'"/>').append(this.renderGroupContentEl())),this.groupTd.attr("rowspan",this.rowspan),(t=this.getLeadingRow().getTr("spreadsheet"))!==this.leadingTr?(t&&t.prepend(this.groupTd),this.leadingTr=t):void 0):(this.groupTd&&(this.groupTd.remove(),this.groupTd=null),this.leadingTr=null)},t}(),h=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yt(t,I),t.prototype.hasOwnRow=!0,t.prototype.segContainerEl=null,t.prototype.segContainerHeight=null,t.prototype.innerEl=null,t.prototype.bgSegContainerEl=null,t.prototype.isSegsRendered=!1,t.prototype.bgSegs=null,t.prototype.fgSegs=null,t.prototype.renderEventContent=function(t){return t.html('<td class="'+this.view.widgetContentClass+'"> <div> <div class="fc-event-container" /> </div> </td>'),this.segContainerEl=t.find(".fc-event-container"),this.innerEl=this.bgSegContainerEl=t.find("td > div"),this.ensureSegsRendered()},t.prototype.ensureSegsRendered=function(){return this.isSegsRendered?void 0:(this.bgSegs&&this.view.timeGrid.renderFillInContainer("bgEvent",this,this.bgSegs),this.fgSegs&&this.view.timeGrid.renderFgSegsInContainers([[this,this.fgSegs]]),this.isSegsRendered=!0)},t.prototype.unrenderEventContent=function(){return this.bgSegs=null,this.fgSegs=null,this.isSegsRendered=!1},t}(),k=function(){function i(t,e){this.resource=e,i.__super__.constructor.apply(this,arguments)}return Yt(i,h),i.prototype.resource=null,i.prototype.rowAdded=function(t){return i.__super__.rowAdded.apply(this,arguments),t!==this&&this.isRendered&&1===this.children.length?(this.enableExpanding(),this.isExpanded?this.indicateExpanded():this.indicateCollapsed()):void 0},i.prototype.rowRemoved=function(t){return i.__super__.rowRemoved.apply(this,arguments),t!==this&&this.isRendered&&!this.children.length?this.disableExpanding():void 0},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),0<this.children.length?this.enableExpanding():this.disableExpanding(),this.view.trigger("resourceRender",this.resource,this.resource,this.getTr("spreadsheet").find("> td"),this.getTr("event").find("> td"))},i.prototype.renderEventContent=function(t){return i.__super__.renderEventContent.apply(this,arguments),t.attr("data-resource-id",this.resource.id)},i.prototype.renderSpreadsheetContent=function(t){var e,i,n,r,s,o,a,l,d;for(a=this.resource,r=0,s=(o=this.view.colSpecs).length;r<s;r++)(e=o[r]).group||(n=e.field?a[e.field]||null:a,d="function"==typeof e.text?e.text(a,n):n,i=y('<div class="fc-cell-content">'+(e.isMain?this.renderGutterHtml():"")+'<span class="fc-cell-text">'+(d?pt(d):"&nbsp;")+"</span></div>"),"function"==typeof e.render&&(i=e.render(a,i,n)||i),l=y('<td class="'+this.view.widgetContentClass+'"/>').append(i),e.isMain&&l.wrapInner("<div/>"),t.append(l));return t.attr("data-resource-id",a.id)},i.prototype.renderGutterHtml=function(){var t,e,i;for(t="",e=0,i=this.depth;e<i;e+=1)t+='<span class="fc-icon"/>';return t+'<span class="fc-icon fc-expander-space"/>'},i}(),c.views.timeline.resourceClass=H,b=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,t),e.mixin(M),e.prototype.timeGridClass=R,e.prototype.dayGridClass=C,e.prototype.renderHead=function(){return e.__super__.renderHead.apply(this,arguments),this.timeGrid.processHeadResourceEls(this.headContainerEl)},e.prototype.setResources=function(t){return this.timeGrid.setResources(t),this.dayGrid&&this.dayGrid.setResources(t),this.clearView(),this.displayView()},e.prototype.unsetResources=function(){return this.clearEvents(),this.timeGrid.unsetResources(),this.dayGrid&&this.dayGrid.unsetResources(),this.clearView(),this.displayView()},e}(c.AgendaView),c.views.agenda.queryResourceClass=function(t){var e;return(null!=(e=t.options.groupByResource||t.options.groupByDateAndResource)?e:1===t.duration.as("days"))?b:void 0},S=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,t),e.mixin(M),e.prototype.dayGridClass=C,e.prototype.renderHead=function(){return e.__super__.renderHead.apply(this,arguments),this.dayGrid.processHeadResourceEls(this.headContainerEl)},e.prototype.setResources=function(t){return this.dayGrid.setResources(t),this.clearView(),this.displayView()},e.prototype.unsetResources=function(){return this.clearEvents(),this.dayGrid.unsetResources(),this.clearView(),this.displayView()},e}(c.BasicView),T=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,t),e.mixin(M),e.prototype.dayGridClass=C,e.prototype.renderHead=function(){return e.__super__.renderHead.apply(this,arguments),this.dayGrid.processHeadResourceEls(this.headContainerEl)},e.prototype.setResources=function(t){return this.dayGrid.setResources(t),this.clearView(),this.displayView()},e.prototype.unsetResources=function(){return this.clearEvents(),this.dayGrid.unsetResources(),this.clearView(),this.displayView()},e}(c.MonthView),c.views.basic.queryResourceClass=function(t){var e;return(null!=(e=t.options.groupByResource||t.options.groupByDateAndResource)?e:1===t.duration.as("days"))?S:void 0},c.views.month.queryResourceClass=function(t){return t.options.groupByResource||t.options.groupByDateAndResource?T:void 0},w="2016-02-18",N={years:1,weeks:1},u="http://fullcalendar.io/scheduler/license/",v=["GPL-My-Project-Is-Open-Source","CC-Attribution-NonCommercial-NoDerivatives"],Tt=function(t,e){return mt(window.location.href)||vt(t)||et(e)?void 0:Rt('Please use a valid license key. <a href="'+u+'">More Info</a>',e)},vt=function(t){var e,i,n,r;return-1!==y.inArray(t,v)||!!((i=(t||"").match(/^(\d+)\-fcs\-(\d+)$/))&&10===i[1].length&&(n=d.utc(1e3*parseInt(i[2])),(r=d.utc(c.mockSchedulerReleaseDate||w)).isValid()&&(e=r.clone().subtract(N),n.isAfter(e))))},mt=function(t){return Boolean(t.match(/\w+\:\/\/fullcalendar\.io\/|\/demos\/[\w-]+\.html$/))},Rt=function(t,e){return e.append(y('<div class="fc-license-message" />').html(t))},void(et=function(t){return 1<=t.find(".fc-license-message").length}))}),function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define("gridster-coords",["jquery"],e):t.GridsterCoords=e(t.$||t.jQuery)}(this,function(i){"use strict";function e(t){return t[0]&&i.isPlainObject(t[0])?this.data=t[0]:this.el=t,this.isCoords=!0,this.coords={},this.init(),this}var t=e.prototype;return t.init=function(){this.set(),this.original_coords=this.get()},t.set=function(t,e){var i=this.el;if(i&&!t&&(this.data=i.offset(),this.data.width=i[0].scrollWidth,this.data.height=i[0].scrollHeight),i&&t&&!e){var n=i.offset();this.data.top=n.top,this.data.left=n.left}var r=this.data;return void 0===r.left&&(r.left=r.x1),void 0===r.top&&(r.top=r.y1),this.coords.x1=r.left,this.coords.y1=r.top,this.coords.x2=r.left+r.width,this.coords.y2=r.top+r.height,this.coords.cx=r.left+r.width/2,this.coords.cy=r.top+r.height/2,this.coords.width=r.width,this.coords.height=r.height,this.coords.el=i||!1,this},t.update=function(t){if(!t&&!this.el)return this;if(t){var e=i.extend({},this.data,t);return this.data=e,this.set(!0,!0)}return this.set(!0),this},t.get=function(){return this.coords},t.destroy=function(){this.el.removeData("coords"),delete this.el},i.fn.coords=function(){if(this.data("coords"))return this.data("coords");var t=new e(this);return this.data("coords",t),t},e}),function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define("gridster-collision",["jquery","gridster-coords"],e):t.GridsterCollision=e(t.$||t.jQuery,t.GridsterCoords)}(this,function(g){"use strict";function i(t,e,i){this.options=g.extend(n,i),this.$element=t,this.last_colliders=[],this.last_colliders_coords=[],this.set_colliders(e),this.init()}var n={colliders_context:document.body,overlapping_region:"C"};i.defaults=n;var t=i.prototype;return t.init=function(){this.find_collisions()},t.overlaps=function(t,e){var i=!1,n=!1;return(e.x1>=t.x1&&e.x1<=t.x2||e.x2>=t.x1&&e.x2<=t.x2||t.x1>=e.x1&&t.x2<=e.x2)&&(i=!0),(e.y1>=t.y1&&e.y1<=t.y2||e.y2>=t.y1&&e.y2<=t.y2||t.y1>=e.y1&&t.y2<=e.y2)&&(n=!0),i&&n},t.detect_overlapping_region=function(t,e){var i="",n="";return t.y1>e.cy&&t.y1<e.y2&&(i="N"),t.y2>e.y1&&t.y2<e.cy&&(i="S"),t.x1>e.cx&&t.x1<e.x2&&(n="W"),t.x2>e.x1&&t.x2<e.cx&&(n="E"),i+n||"C"},t.calculate_overlapped_area_coords=function(t,e){var i=Math.max(t.x1,e.x1),n=Math.max(t.y1,e.y1);return g({left:i,top:n,
width:Math.min(t.x2,e.x2)-i,height:Math.min(t.y2,e.y2)-n}).coords().get()},t.calculate_overlapped_area=function(t){return t.width*t.height},t.manage_colliders_start_stop=function(t,e,i){for(var n=this.last_colliders_coords,r=0,s=n.length;r<s;r++)-1===g.inArray(n[r],t)&&e.call(this,n[r]);for(var o=0,a=t.length;o<a;o++)-1===g.inArray(t[o],n)&&i.call(this,t[o])},t.find_collisions=function(t){for(var e=this,i=this.options.overlapping_region,n=[],r=[],s=this.colliders||this.$colliders,o=s.length,a=e.$element.coords().update(t||!1).get();o--;){var l=e.$colliders?g(s[o]):s[o],d=l.isCoords?l:l.coords(),h=d.get();if(e.overlaps(a,h)){var c=e.detect_overlapping_region(a,h);if(c===i||"all"===i){var u=e.calculate_overlapped_area_coords(a,h),p=e.calculate_overlapped_area(u);if(0!==p){var f={area:p,area_coords:u,region:c,coords:h,player_coords:a,el:l};e.options.on_overlap&&e.options.on_overlap.call(this,f),n.push(d),r.push(f)}}}}return(e.options.on_overlap_stop||e.options.on_overlap_start)&&this.manage_colliders_start_stop(n,e.options.on_overlap_start,e.options.on_overlap_stop),this.last_colliders_coords=n,r},t.get_closest_colliders=function(t){var e=this.find_collisions(t);return e.sort(function(t,e){return"C"===t.region&&"C"===e.region?t.coords.y1<e.coords.y1||t.coords.x1<e.coords.x1?-1:1:(t.area,e.area,1)}),e},t.set_colliders=function(t){"string"==typeof t||t instanceof g?this.$colliders=g(t,this.options.colliders_context).not(this.$element):this.colliders=g(t)},g.fn.collision=function(t,e){return new i(this,t,e)},i}),function(t){"use strict";t.delay=function(t,e){var i=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},t.debounce=function(n,r,s){var o;return function(){var t=this,e=arguments,i=function(){o=null,s||n.apply(t,e)};s&&!o&&n.apply(t,e),clearTimeout(o),o=setTimeout(i,r)}},t.throttle=function(e,i){var n,r,s,o,a,l,d=debounce(function(){a=o=!1},i);return function(){n=this,r=arguments;var t=function(){s=null,a&&e.apply(n,r),d()};return s||(s=setTimeout(t,i)),o?a=!0:l=e.apply(n,r),d(),o=!0,l}}}(window),function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define("gridster-draggable",["jquery"],e):t.GridsterDraggable=e(t.$||t.jQuery)}(this,function(i){"use strict";function e(t,e){this.options=i.extend({},n,e),this.$document=i(document),this.$container=i(t),this.$scroll_container=this.options.scroll_container===window?i(window):this.$container.closest(this.options.scroll_container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.player_min_top=0+this.options.offset_top,this.id=s(),this.ns=".gridster-draggable-"+this.id,this.init()}var n={items:"li",distance:1,limit:{width:!0,height:!1},offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null,container_width:0,move_element:!0,helper:!1,remove_helper:!0},r=i(window),g={x:"left",y:"top"},o=!!("ontouchstart"in window),m=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},t=0,s=function(){return++t+""};e.defaults=n;var a=e.prototype;return a.init=function(){var t=this.$container.css("position");this.calculate_dimensions(),this.$container.css("position","static"===t?"relative":t),this.disabled=!1,this.events(),r.bind(this.nsEvent("resize"),throttle(i.proxy(this.calculate_dimensions,this),200))},a.nsEvent=function(t){return(t||"")+this.ns},a.events=function(){this.pointer_events={start:this.nsEvent("touchstart")+" "+this.nsEvent("mousedown"),move:this.nsEvent("touchmove")+" "+this.nsEvent("mousemove"),end:this.nsEvent("touchend")+" "+this.nsEvent("mouseup")},this.$container.on(this.nsEvent("selectstart"),i.proxy(this.on_select_start,this)),this.$container.on(this.pointer_events.start,this.options.items,i.proxy(this.drag_handler,this)),this.$document.on(this.pointer_events.end,i.proxy(function(t){this.is_dragging=!1,this.disabled||(this.$document.off(this.pointer_events.move),this.drag_start&&this.on_dragstop(t))},this))},a.get_actual_pos=function(t){return t.position()},a.get_mouse_pos=function(t){if(t.originalEvent&&t.originalEvent.touches){var e=t.originalEvent;t=e.touches.length?e.touches[0]:e.changedTouches[0]}return{left:t.clientX,top:t.clientY}},a.get_offset=function(t){t.preventDefault();var e=this.get_mouse_pos(t),i=Math.round(e.left-this.mouse_init_pos.left),n=Math.round(e.top-this.mouse_init_pos.top),r=Math.round(this.el_init_offset.left+i-this.baseX+this.$scroll_container.scrollLeft()-this.scroll_container_offset_x),s=Math.round(this.el_init_offset.top+n-this.baseY+this.$scroll_container.scrollTop()-this.scroll_container_offset_y);return this.options.limit.width&&(r>this.player_max_left?r=this.player_max_left:r<this.player_min_left&&(r=this.player_min_left)),this.options.limit.height&&(s>this.player_max_top?s=this.player_max_top:s<this.player_min_top&&(s=this.player_min_top)),{position:{left:r,top:s},pointer:{left:e.left,top:e.top,diff_left:i+(this.$scroll_container.scrollLeft()-this.scroll_container_offset_x),diff_top:n+(this.$scroll_container.scrollTop()-this.scroll_container_offset_y)}}},a.get_drag_data=function(t){var e=this.get_offset(t);return e.$player=this.$player,e.$helper=this.helper?this.$helper:this.$player,e},a.set_limits=function(t){return t||(t=this.$container.width()),this.player_max_left=t-this.player_width-this.options.offset_left,this.player_max_top=this.options.container_height-this.player_height-this.options.offset_top,this.options.container_width=t,this},a.scroll_in=function(t,e){var i,n=g[t],r=50,s=30,o="scroll"+m(n),a="x"===t,l=a?this.scroller_width:this.scroller_height;i=this.$scroll_container===window?a?this.$scroll_container.width():this.$scroll_container.height():a?this.$scroll_container[0].scrollWidth:this.$scroll_container[0].scrollHeight;var d,h=a?this.$player.width():this.$player.height(),c=this.$scroll_container[o](),u=c+l-r,p=c+r,f=c+e.pointer[n];return u<=f&&(d=c+s)<i-l+h&&(this.$scroll_container[o](d),this["scroll_offset_"+t]+=s),f<=p&&0<(d=c-s)&&(this.$scroll_container[o](d),this["scroll_offset_"+t]-=s),this},a.manage_scroll=function(t){this.scroll_in("x",t),this.scroll_in("y",t)},a.calculate_dimensions=function(){this.scroller_height=this.$scroll_container.height(),this.scroller_width=this.$scroll_container.width()},a.drag_handler=function(t){if(!this.disabled&&(1===t.which||o)&&!this.ignore_drag(t)){var r=this,s=!0;return this.$player=i(t.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this.mouse_init_pos=this.get_mouse_pos(t),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.$document.on(this.pointer_events.move,function(t){var e=r.get_mouse_pos(t),i=Math.abs(e.left-r.mouse_init_pos.left),n=Math.abs(e.top-r.mouse_init_pos.top);return(i>r.options.distance||n>r.options.distance)&&(s?(s=!1,r.on_dragstart.call(r,t)):!0===r.is_dragging&&r.on_dragmove.call(r,t),!1)}),!!o&&void 0}},a.on_dragstart=function(t){if(t.preventDefault(),this.is_dragging)return this;this.drag_start=this.is_dragging=!0;var e=this.$container.offset();return this.baseX=Math.round(e.left),this.baseY=Math.round(e.top),"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.scroll_container_offset_y=this.$scroll_container.scrollTop(),this.scroll_container_offset_x=this.$scroll_container.scrollLeft(),this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height(),this.set_limits(this.options.container_width),this.options.start&&this.options.start.call(this.$player,t,this.get_drag_data(t)),!1},a.on_dragmove=function(t){var e=this.get_drag_data(t);this.options.autoscroll&&this.manage_scroll(e),this.options.move_element&&(this.helper?this.$helper:this.$player).css({position:"absolute",left:e.position.left,top:e.position.top});var i=this.last_position||e.position;return e.prev_position=i,this.options.drag&&this.options.drag.call(this.$player,t,e),this.last_position=e.position,!1},a.on_dragstop=function(t){var e=this.get_drag_data(t);return this.drag_start=!1,this.options.stop&&this.options.stop.call(this.$player,t,e),this.helper&&this.options.remove_helper&&this.$helper.remove(),!1},a.on_select_start=function(t){if(!this.disabled&&!this.ignore_drag(t))return!1},a.enable=function(){this.disabled=!1},a.disable=function(){this.disabled=!0},a.destroy=function(){this.disable(),this.$container.off(this.ns),this.$document.off(this.ns),r.off(this.ns),i.removeData(this.$container,"drag")},a.ignore_drag=function(t){return this.options.handle?!i(t.target).is(this.options.handle):i.isFunction(this.options.ignore_dragging)?this.options.ignore_dragging(t):this.options.resize?!i(t.target).is(this.options.items):i(t.target).is(this.options.ignore_dragging.join(", "))},i.fn.gridDraggable=function(t){return new e(this,t)},i.fn.dragg=function(t){return this.each(function(){i.data(this,"drag")||i.data(this,"drag",new e(this,t))})},e}),function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("jquery"),require("./jquery.draggable.js"),require("./jquery.collision.js"),require("./jquery.coords.js"),require("./utils.js")):"function"==typeof define&&define.amd?define(["jquery","gridster-draggable","gridster-collision"],e):t.Gridster=e(t.$||t.jQuery,t.GridsterDraggable,t.GridsterCollision)}(this,function(v,t){"use strict";function l(t,e){this.options=v.extend(!0,{},n,e),this.options.draggable=this.options.draggable||{},this.options.draggable=v.extend(!0,{},this.options.draggable,{scroll_container:this.options.scroll_container}),this.$el=v(t),this.$scroll_container=this.options.scroll_container===window?v(window):this.$el.closest(this.options.scroll_container),this.$wrapper=this.$el.parent(),this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs-w"),this.$changed=v([]),this.w_queue={},this.is_responsive()?this.min_widget_width=this.get_responsive_col_width():this.min_widget_width=this.options.widget_base_dimensions[0],this.min_widget_height=this.options.widget_base_dimensions[1],this.is_resizing=!1,this.min_col_count=this.options.min_cols,this.prev_col_count=this.min_col_count,this.generated_stylesheets=[],this.$style_tags=v([]),typeof this.options.limit==typeof!0&&(console.log("limit: bool is deprecated, consider using limit: { width: boolean, height: boolean} instead"),this.options.limit={width:this.options.limit,height:this.options.limit}),this.options.auto_init&&this.init()}function i(t){for(var e=["col","row","size_x","size_y"],i={},n=0,r=e.length;n<r;n++){var s=e[n];if(!(s in t))throw new Error("Not exists property `"+s+"`");var o=t[s];if(!o||isNaN(o))throw new Error("Invalid value of `"+s+"` property");i[s]=+o}return i}var e=v(window),n={namespace:"",widget_selector:"li",static_class:"static",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:1/0,limit:{width:!0,height:!1},min_rows:1,max_rows:15,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,auto_init:!0,center_widgets:!1,responsive_breakpoint:!1,scroll_container:window,shift_larger_widgets_down:!0,move_widgets_down_only:!1,shift_widgets_up:!0,show_element:function(t,e){e?t.fadeIn(e):t.fadeIn()},hide_element:function(t,e){e?t.fadeOut(e):t.fadeOut()},serialize_params:function(t,e){return{col:e.col,row:e.row,size_x:e.size_x,size_y:e.size_y}},collision:{wait_for_mouseup:!1},draggable:{items:".gs-w:not(.static)",distance:4,ignore_dragging:t.defaults.ignore_dragging.slice(0)},resize:{enabled:!1,axes:["both"],handle_append_to:"",handle_class:"gs-resize-handle",max_size:[1/0,1/0],min_size:[1,1]},ignore_self_occupied:!1};l.defaults=n,l.generated_stylesheets=[],l.sort_by_row_asc=function(t){return t.sort(function(t,e){return t.row||(t=v(t).coords().grid,e=v(e).coords().grid),t=i(t),e=i(e),t.row>e.row?1:-1})},l.sort_by_row_and_col_asc=function(t){return t.sort(function(t,e){return t=i(t),e=i(e),t.row>e.row||t.row===e.row&&t.col>e.col?1:-1})},l.sort_by_col_asc=function(t){return t.sort(function(t,e){return t=i(t),e=i(e),t.col>e.col?1:-1})},l.sort_by_row_desc=function(t){return t.sort(function(t,e){return t=i(t),e=i(e),t.row+t.size_y<e.row+e.size_y?1:-1})};var r=l.prototype;return r.init=function(){this.options.resize.enabled&&this.setup_resize(),this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.set_dom_grid_width(),this.$wrapper.addClass("ready"),this.draggable(),this.options.resize.enabled&&this.resizable(),this.options.center_widgets&&setTimeout(v.proxy(function(){this.center_widgets()},this),0),e.bind("resize.gridster",throttle(v.proxy(this.recalculate_faux_grid,this),200))},r.disable=function(){return this.$wrapper.find(".player-revert").removeClass("player-revert"),this.drag_api.disable(),this},r.enable=function(){return this.drag_api.enable(),this},r.disable_resize=function(){return this.$el.addClass("gs-resize-disabled"),this.resize_api.disable(),this},r.enable_resize=function(){return this.$el.removeClass("gs-resize-disabled"),this.resize_api.enable(),this},r.add_widget=function(t,e,i,n,r,s,o,a){var l;if(e||(e=1),i||(i=1),n||r)l={col:n,row:r,size_x:e,size_y:i},this.options.avoid_overlapped_widgets&&this.empty_cells(n,r,e,i);else if(!1===(l=this.next_position(e,i)))return!1;var d=v(t).attr({"data-col":l.col,"data-row":l.row,"data-sizex":e,"data-sizey":i}).addClass("gs-w").appendTo(this.$el).hide();this.$widgets=this.$widgets.add(d),this.$changed=this.$changed.add(d),this.register_widget(d);var h=parseInt(l.row)+(parseInt(l.size_y)-1);return this.rows<h&&this.add_faux_rows(h-this.rows),s&&this.set_widget_max_size(d,s),o&&this.set_widget_min_size(d,o),this.set_dom_grid_width(),this.set_dom_grid_height(),this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0]),this.options.center_widgets&&setTimeout(v.proxy(function(){this.center_widgets()},this),0),this.options.show_element.call(this,d,a),d},r.set_widget_min_size=function(t,e){if(!(t="number"==typeof t?this.$widgets.eq(t):t).length)return this;var i=t.data("coords").grid;return i.min_size_x=e[0],i.min_size_y=e[1],this},r.set_widget_max_size=function(t,e){if(!(t="number"==typeof t?this.$widgets.eq(t):t).length)return this;var i=t.data("coords").grid;return i.max_size_x=e[0],i.max_size_y=e[1],this},r.add_resize_handle=function(t){var e=this.options.resize.handle_append_to?v(this.options.resize.handle_append_to,t):t;return 0===e.children("span[class~='"+this.resize_handle_class+"']").length&&v(this.resize_handle_tpl).appendTo(e),this},r.resize_widget=function(t,e,i,n){var r=t.coords().grid;this.is_resizing=!0,e||(e=r.size_x),i||(i=r.size_y),this.is_valid_row(r.row,i)||this.add_faux_rows(Math.max(this.calculate_highest_row(r.row,i)-this.rows,0)),this.is_valid_col(r.col,i)||this.add_faux_cols(Math.max(this.calculate_highest_row(r.col,e)-this.cols,0));var s={col:r.col,row:r.row,size_x:e,size_y:i};return this.mutate_widget_in_gridmap(t,r,s),this.set_dom_grid_height(),this.set_dom_grid_width(),n&&n.call(this,s.size_x,s.size_y),this.is_resizing=!1,t},r.expand_widget=function(t,e,i,n,r){var s=t.coords().grid,o=Math.floor((v(window).width()-2*this.options.widget_margins[0])/this.min_widget_width);e=e||Math.min(o,this.cols),i||(i=s.size_y);var a=s.size_y;t.attr("pre_expand_col",s.col),t.attr("pre_expand_sizex",s.size_x),t.attr("pre_expand_sizey",s.size_y);var l=n||1;a<i&&this.add_faux_rows(Math.max(i-a,0));var d={col:l,row:s.row,size_x:e,size_y:i};return this.mutate_widget_in_gridmap(t,s,d),this.set_dom_grid_height(),this.set_dom_grid_width(),r&&r.call(this,d.size_x,d.size_y),t},r.collapse_widget=function(t,e){var i=t.coords().grid,n=parseInt(t.attr("pre_expand_sizex")),r=parseInt(t.attr("pre_expand_sizey")),s={col:parseInt(t.attr("pre_expand_col")),row:i.row,size_x:n,size_y:r};return this.mutate_widget_in_gridmap(t,i,s),this.set_dom_grid_height(),this.set_dom_grid_width(),e&&e.call(this,s.size_x,s.size_y),t},r.fit_to_content=function(t,e,i,n){var r=t.coords().grid,s=this.$wrapper.width(),o=this.$wrapper.height(),a=this.options.widget_base_dimensions[0]+2*this.options.widget_margins[0],l=this.options.widget_base_dimensions[1]+2*this.options.widget_margins[1],d=Math.ceil((s+2*this.options.widget_margins[0])/a),h=Math.ceil((o+2*this.options.widget_margins[1])/l),c={col:r.col,row:r.row,size_x:Math.min(e,d),size_y:Math.min(i,h)};return this.mutate_widget_in_gridmap(t,r,c),this.set_dom_grid_height(),this.set_dom_grid_width(),n&&n.call(this,c.size_x,c.size_y),t},r.center_widgets=debounce(function(){var t,e=this.$wrapper.width();t=this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0]+2*this.options.widget_margins[0];var i=2*Math.floor(Math.max(Math.floor(e/t),this.min_col_count)/2);this.options.min_cols=i,this.options.max_cols=i,this.options.extra_cols=0,this.set_dom_grid_width(i);var n=((this.cols=i)-this.prev_col_count)/2;return n<0?(this.get_min_col()>-1*n?this.shift_cols(n):this.resize_widget_dimensions(this.options),setTimeout(v.proxy(function(){this.resize_widget_dimensions(this.options)},this),0)):0<n?(this.resize_widget_dimensions(this.options),setTimeout(v.proxy(function(){this.shift_cols(n)},this),0)):(this.resize_widget_dimensions(this.options),setTimeout(v.proxy(function(){this.resize_widget_dimensions(this.options)},this),0)),this.prev_col_count=i,this},200),r.get_min_col=function(){return Math.min.apply(Math,this.$widgets.map(v.proxy(function(t,e){return this.get_cells_occupied(v(e).coords().grid).cols},this)).get())},r.shift_cols=function(o){var t=this.$widgets.map(v.proxy(function(t,e){var i=v(e);return this.dom_to_coords(i)},this));(t=l.sort_by_row_and_col_asc(t)).each(v.proxy(function(t,e){var i=v(e.el),n=i.coords().grid,r=parseInt(i.attr("data-col")),s={col:Math.max(Math.round(r+o),1),row:n.row,size_x:n.size_x,size_y:n.size_y};setTimeout(v.proxy(function(){this.mutate_widget_in_gridmap(i,n,s)},this),0)},this))},r.mutate_widget_in_gridmap=function(t,e,i){var n=e.size_y,r=this.get_cells_occupied(e),s=this.get_cells_occupied(i),o=[];v.each(r.cols,function(t,e){-1===v.inArray(e,s.cols)&&o.push(e)});var a=[];v.each(s.cols,function(t,e){-1===v.inArray(e,r.cols)&&a.push(e)});var l=[];v.each(r.rows,function(t,e){-1===v.inArray(e,s.rows)&&l.push(e)});var d=[];if(v.each(s.rows,function(t,e){-1===v.inArray(e,r.rows)&&d.push(e)}),this.remove_from_gridmap(e),a.length){var h=[i.col,i.row,i.size_x,Math.min(n,i.size_y),t];this.empty_cells.apply(this,h)}if(d.length){var c=[i.col,i.row,i.size_x,i.size_y,t];this.empty_cells.apply(this,c)}if(e.col=i.col,e.row=i.row,e.size_x=i.size_x,e.size_y=i.size_y,this.add_to_gridmap(i,t),t.removeClass("player-revert"),this.update_widget_dimensions(t,i),this.options.shift_widgets_up){if(o.length){var u=[o[0],i.row,o[o.length-1]-o[0]+1,Math.min(n,i.size_y),t];this.remove_empty_cells.apply(this,u)}if(l.length){var p=[i.col,i.row,i.size_x,i.size_y,t];this.remove_empty_cells.apply(this,p)}}return this.move_widget_up(t),this},r.empty_cells=function(t,s,e,o,i){return this.widgets_below({col:t,row:s-o,size_x:e,size_y:o}).not(i).each(v.proxy(function(t,e){var i=v(e),n=i.coords().grid;if(n.row<=s+o-1){var r=s+o-n.row;this.move_widget_down(i,r)}},this)),this.is_resizing||this.set_dom_grid_height(),this},r.remove_empty_cells=function(t,e,i,n,r){return this.widgets_below({col:t,row:e,size_x:i,size_y:n}).not(r).each(v.proxy(function(t,e){this.move_widget_up(v(e),n)},this)),this.set_dom_grid_height(),this},r.next_position=function(t,e){t||(t=1),e||(e=1);for(var i,n=this.gridmap,r=n.length,s=[],o=1;o<r;o++){i=n[o].length;for(var a=1;a<=i;a++)this.can_move_to({size_x:t,size_y:e},o,a)&&s.push({col:o,row:a,size_y:e,size_x:t})}return!!s.length&&l.sort_by_row_and_col_asc(s)[0]},r.remove_by_grid=function(t,e){var i=this.is_widget(t,e);i&&this.remove_widget(i)},r.remove_widget=function(t,e,i){var n=t instanceof v?t:v(t);if(0===n.length)return this;var r=n.coords().grid;if(void 0===r)return this;v.isFunction(e)&&(i=e,e=!1),this.cells_occupied_by_placeholder={},this.$widgets=this.$widgets.not(n);var s=this.widgets_below(n);return this.remove_from_gridmap(r),this.options.hide_element.call(this,n,v.proxy(function(){n.remove(),e||s.each(v.proxy(function(t,e){this.move_widget_up(v(e),r.size_y)},this)),this.set_dom_grid_height(),i&&i.call(this,t)},this)),this},r.remove_all_widgets=function(i){return this.$widgets.each(v.proxy(function(t,e){this.remove_widget(e,!0,i)},this)),this},r.serialize=function(t){t||(t=this.$widgets);var n=[];return t.each(v.proxy(function(t,e){var i=v(e);void 0!==i.coords().grid&&n.push(this.options.serialize_params(i,i.coords().grid))},this)),n},r.serialize_changed=function(){return this.serialize(this.$changed)},r.dom_to_coords=function(t){return{col:parseInt(t.attr("data-col"),10),row:parseInt(t.attr("data-row"),10),size_x:parseInt(t.attr("data-sizex"),10)||1,size_y:parseInt(t.attr("data-sizey"),10)||1,max_size_x:parseInt(t.attr("data-max-sizex"),10)||!1,max_size_y:parseInt(t.attr("data-max-sizey"),10)||!1,min_size_x:parseInt(t.attr("data-min-sizex"),10)||!1,min_size_y:parseInt(t.attr("data-min-sizey"),10)||!1,el:t}},r.register_widget=function(t){var e=t instanceof v,i=e?this.dom_to_coords(t):t,n=!1;e||(t=i.el);var r=this.can_go_widget_up(i);return this.options.shift_widgets_up&&r&&(i.row=r,t.attr("data-row",r),this.$el.trigger("gridster:positionchanged",[i]),n=!0),this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:i.size_x,size_y:i.size_y},i.col,i.row)&&(v.extend(i,this.next_position(i.size_x,i.size_y)),t.attr({"data-col":i.col,"data-row":i.row,"data-sizex":i.size_x,"data-sizey":i.size_y}),n=!0),t.data("coords",t.coords()),t.data("coords").grid=i,this.add_to_gridmap(i,t),this.update_widget_dimensions(t,i),this.options.resize.enabled&&this.add_resize_handle(t),n},r.update_widget_position=function(t,i){return this.for_each_cell_occupied(t,function(t,e){if(!this.gridmap[t])return this;this.gridmap[t][e]=i}),this},r.update_widget_dimensions=function(t,e){var i=e.size_x*(this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0])+(e.size_x-1)*this.options.widget_margins[0],n=e.size_y*this.options.widget_base_dimensions[1]+(e.size_y-1)*this.options.widget_margins[1];return t.data("coords").update({width:i,height:n}),t.attr({"data-col":e.col,"data-row":e.row,"data-sizex":e.size_x,"data-sizey":e.size_y}),this},r.update_widgets_dimensions=function(){return v.each(this.$widgets,v.proxy(function(t,e){var i=v(e).coords().grid;"object"==typeof i&&this.update_widget_dimensions(v(e),i)},this)),this},r.remove_from_gridmap=function(t){return this.update_widget_position(t,!1)},r.add_to_gridmap=function(t,e){this.update_widget_position(t,e||t.el)},r.draggable=function(){var i=this,t=v.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],offset_top:this.options.widget_margins[1],container_width:this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0],container_height:this.rows*this.min_widget_height+(this.rows+1)*this.options.widget_margins[0],limit:{width:this.options.limit.width,height:this.options.limit.height},start:function(t,e){i.$widgets.filter(".player-revert").removeClass("player-revert"),i.$player=v(this),i.$helper=v(e.$helper),i.helper=!i.$helper.is(i.$player),i.on_start_drag.call(i,t,e),i.$el.trigger("gridster:dragstart")},stop:function(t,e){i.on_stop_drag.call(i,t,e),i.$el.trigger("gridster:dragstop")},drag:throttle(function(t,e){i.on_drag.call(i,t,e),i.$el.trigger("gridster:drag")},60)});this.drag_api=this.$el.dragg(t).data("drag")},r.resizable=function(){return this.resize_api=this.$el.gridDraggable({items:"."+this.options.resize.handle_class,offset_left:this.options.widget_margins[0],container_width:this.container_width,move_element:!1,resize:!0,limit:{width:this.options.max_cols!==1/0||this.limit.width,height:this.options.max_rows!==1/0||this.limit.height},scroll_container:this.options.scroll_container,start:v.proxy(this.on_start_resize,this),stop:v.proxy(function(t,e){delay(v.proxy(function(){this.on_stop_resize(t,e)},this),120)},this),drag:throttle(v.proxy(this.on_resize,this),60)}),this},r.setup_resize=function(){this.resize_handle_class=this.options.resize.handle_class;var t=this.options.resize.axes,e='<span class="'+this.resize_handle_class+" "+this.resize_handle_class+'-{type}" />';return this.resize_handle_tpl=v.map(t,function(t){return e.replace("{type}",t)}).join(""),v.isArray(this.options.draggable.ignore_dragging)&&this.options.draggable.ignore_dragging.push("."+this.resize_handle_class),this},r.on_start_drag=function(t,e){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging"),this.highest_col=this.get_highest_occupied_cell().col,this.$player.addClass("player"),this.player_grid_data=this.$player.coords().grid,this.placeholder_grid_data=v.extend({},this.player_grid_data),this.get_highest_occupied_cell().row+this.player_grid_data.size_y<=this.options.max_rows&&this.set_dom_grid_height(this.$el.height()+this.player_grid_data.size_y*this.min_widget_height),this.set_dom_grid_width(this.cols);var i=this.player_grid_data.size_x,n=this.cols-this.highest_col;this.options.max_cols===1/0&&n<=i&&this.add_faux_cols(Math.min(i-n,1));var r=this.faux_grid,s=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.last_cols=[],this.last_rows=[],this.collision_api=this.$helper.collision(r,this.options.collision),this.$preview_holder=v("<"+this.$player.get(0).tagName+" />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:s.width,height:s.height}}).appendTo(this.$el),this.options.draggable.start&&this.options.draggable.start.call(this,t,e)},r.on_drag=function(t,e){if(null===this.$player)return!1;var i=this.options.widget_margins,n=this.$preview_holder.attr("data-col"),r=this.$preview_holder.attr("data-row"),s={left:e.position.left+this.baseX-i[0]*n,top:e.position.top+this.baseY-i[1]*r};this.options.max_cols===1/0&&(this.placeholder_grid_data.col+this.placeholder_grid_data.size_x-1>=this.cols-1&&this.options.max_cols>=this.cols+1&&(this.add_faux_cols(1),this.set_dom_grid_width(this.cols+1),this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0])),this.collision_api.set_colliders(this.faux_grid)),this.colliders_data=this.collision_api.get_closest_colliders(s),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.helper&&this.$player&&this.$player.css({left:e.position.left,top:e.position.top}),this.options.draggable.drag&&this.options.draggable.drag.call(this,t,e)},r.on_stop_drag=function(t,e){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging");var i=this.options.widget_margins,n=this.$preview_holder.attr("data-col"),r=this.$preview_holder.attr("data-row");e.position.left=e.position.left+this.baseX-i[0]*n,e.position.top=e.position.top+this.baseY-i[1]*r,this.colliders_data=this.collision_api.get_closest_colliders(e.position),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.$changed=this.$changed.add(this.$player);var s=this.placeholder_grid_data.el.coords().grid;s.col===this.placeholder_grid_data.col&&s.row===this.placeholder_grid_data.row||(this.update_widget_position(s,!1),this.options.collision.wait_for_mouseup&&this.for_each_cell_occupied(this.placeholder_grid_data,function(t,e){if(this.is_widget(t,e)){var i=this.placeholder_grid_data.row+this.placeholder_grid_data.size_y-parseInt(this.gridmap[t][e][0].getAttribute("data-row"));!this.move_widget_down(this.is_widget(t,e),i)&&this.set_placeholder(this.placeholder_grid_data.el.coords().grid.col,this.placeholder_grid_data.el.coords().grid.row)}})),this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data);var o=this.placeholder_grid_data.col,a=this.placeholder_grid_data.row;this.set_cells_player_occupies(o,a),this.$player.coords().grid.row=a,this.$player.coords().grid.col=o,this.$player.addClass("player-revert").removeClass("player").attr({"data-col":o,"data-row":a}).css({left:"",top:""}),this.options.draggable.stop&&this.options.draggable.stop.call(this,t,e),this.$preview_holder.remove(),this.$player=null,this.$helper=null,this.placeholder_grid_data={},this.player_grid_data={},this.cells_occupied_by_placeholder={},this.cells_occupied_by_player={},this.w_queue={},this.set_dom_grid_height(),this.set_dom_grid_width(),this.options.max_cols===1/0&&this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0])},r.on_start_resize=function(t,e){this.$resized_widget=e.$player.closest(".gs-w"),this.resize_coords=this.$resized_widget.coords(),this.resize_wgd=this.resize_coords.grid,this.resize_initial_width=this.resize_coords.coords.width,this.resize_initial_height=this.resize_coords.coords.height,this.resize_initial_sizex=this.resize_coords.grid.size_x,this.resize_initial_sizey=this.resize_coords.grid.size_y,this.resize_initial_col=this.resize_coords.grid.col,this.resize_last_sizex=this.resize_initial_sizex,this.resize_last_sizey=this.resize_initial_sizey,this.resize_max_size_x=Math.min(this.resize_wgd.max_size_x||this.options.resize.max_size[0],this.options.max_cols-this.resize_initial_col+1),this.resize_max_size_y=this.resize_wgd.max_size_y||this.options.resize.max_size[1],this.resize_min_size_x=this.resize_wgd.min_size_x||this.options.resize.min_size[0]||1,this.resize_min_size_y=this.resize_wgd.min_size_y||this.options.resize.min_size[1]||1,this.resize_initial_last_col=this.get_highest_occupied_cell().col,this.set_dom_grid_width(this.cols),this.resize_dir={right:e.$player.is("."+this.resize_handle_class+"-x"),bottom:e.$player.is("."+this.resize_handle_class+"-y")},this.is_responsive()||this.$resized_widget.css({"min-width":this.options.widget_base_dimensions[0],"min-height":this.options.widget_base_dimensions[1]});var i=this.$resized_widget.get(0).tagName;this.$resize_preview_holder=v("<"+i+" />",{"class":"preview-holder resize-preview-holder","data-row":this.$resized_widget.attr("data-row"),"data-col":this.$resized_widget.attr("data-col"),css:{width:this.resize_initial_width,height:this.resize_initial_height}}).appendTo(this.$el),this.$resized_widget.addClass("resizing"),this.options.resize.start&&this.options.resize.start.call(this,t,e,this.$resized_widget),this.$el.trigger("gridster:resizestart")},r.on_stop_resize=function(t,e){this.$resized_widget.removeClass("resizing").css({width:"",height:"","min-width":"","min-height":""}),delay(v.proxy(function(){this.$resize_preview_holder.remove().css({"min-width":"","min-height":""}),this.options.resize.stop&&this.options.resize.stop.call(this,t,e,this.$resized_widget),this.$el.trigger("gridster:resizestop")},this),300),this.set_dom_grid_width(),this.set_dom_grid_height(),this.options.max_cols===1/0&&this.drag_api.set_limits(this.cols*this.min_widget_width)},r.on_resize=function(t,e){var i,n=e.pointer.diff_left,r=e.pointer.diff_top,s=this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0],o=this.options.widget_base_dimensions[1],a=this.options.widget_margins[0],l=this.options.widget_margins[1],d=this.resize_max_size_x,h=this.resize_min_size_x,c=this.resize_max_size_y,u=this.resize_min_size_y,p=this.options.max_cols===1/0,f=Math.ceil(n/(s+2*a)-.2),g=Math.ceil(r/(o+2*l)-.2),m=Math.max(1,this.resize_initial_sizex+f),_=Math.max(1,this.resize_initial_sizey+g),v=Math.floor(this.container_width/this.min_widget_width-this.resize_initial_col+1),y=v*this.min_widget_width+(v-1)*a;m=Math.max(Math.min(m,d),h),i=d*s+((m=Math.min(v,m))-1)*a;var w=Math.min(i,y),b=h*s+(m-1)*a,S=c*o+((_=Math.max(Math.min(_,c),u))-1)*l,C=u*o+(_-1)*l;if(this.resize_dir.right?_=this.resize_initial_sizey:this.resize_dir.bottom&&(m=this.resize_initial_sizex),p){var x=this.resize_initial_col+m-1;p&&this.resize_initial_last_col<=x&&(this.set_dom_grid_width(Math.max(x+1,this.cols)),this.cols<x&&this.add_faux_cols(x-this.cols))}var D={};!this.resize_dir.bottom&&(D.width=Math.max(Math.min(this.resize_initial_width+n,w),b)),!this.resize_dir.right&&(D.height=Math.max(Math.min(this.resize_initial_height+r,S),C)),this.$resized_widget.css(D),m===this.resize_last_sizex&&_===this.resize_last_sizey||(this.resize_widget(this.$resized_widget,m,_,!1),this.set_dom_grid_width(this.cols),this.$resize_preview_holder.css({width:"",
height:""}).attr({"data-row":this.$resized_widget.attr("data-row"),"data-sizex":m,"data-sizey":_})),this.options.resize.resize&&this.options.resize.resize.call(this,t,e,this.$resized_widget),this.$el.trigger("gridster:resize"),this.resize_last_sizex=m,this.resize_last_sizey=_},r.on_overlapped_column_change=function(t,e){if(!this.colliders_data.length)return this;var i,n=this.get_targeted_columns(this.colliders_data[0].el.data.col),r=this.last_cols.length,s=n.length;for(i=0;i<s;i++)-1===v.inArray(n[i],this.last_cols)&&(t||v.noop).call(this,n[i]);for(i=0;i<r;i++)-1===v.inArray(this.last_cols[i],n)&&(e||v.noop).call(this,this.last_cols[i]);return this.last_cols=n,this},r.on_overlapped_row_change=function(t,e){if(!this.colliders_data.length)return this;var i,n=this.get_targeted_rows(this.colliders_data[0].el.data.row),r=this.last_rows.length,s=n.length;for(i=0;i<s;i++)-1===v.inArray(n[i],this.last_rows)&&(t||v.noop).call(this,n[i]);for(i=0;i<r;i++)-1===v.inArray(this.last_rows[i],n)&&(e||v.noop).call(this,this.last_rows[i]);this.last_rows=n},r.set_player=function(t,e,i){var h=!1,n=i?{col:t}:this.colliders_data[0].el.data,c=n.col,u=n.row||e;this.player_grid_data={col:c,row:u,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x},this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);var p=this.get_widgets_overlapped(this.player_grid_data),f=this.player_grid_data.size_y,g=this.player_grid_data.size_x,m=this.cells_occupied_by_placeholder,_=this;if(p.each(v.proxy(function(t,e){var i=v(e),n=i.coords().grid,r=m.cols[0]+g-1,s=m.rows[0]+f-1;if(i.hasClass(_.options.static_class))return!0;if(_.options.collision.wait_for_mouseup&&_.drag_api.is_dragging)_.placeholder_grid_data.col=c,_.placeholder_grid_data.row=u,_.cells_occupied_by_placeholder=_.get_cells_occupied(_.placeholder_grid_data),_.$preview_holder.attr({"data-row":u,"data-col":c});else if(n.size_x<=g&&n.size_y<=f)if(_.is_swap_occupied(m.cols[0],n.row,n.size_x,n.size_y)||_.is_player_in(m.cols[0],n.row)||_.is_in_queue(m.cols[0],n.row,i))if(_.is_swap_occupied(r,n.row,n.size_x,n.size_y)||_.is_player_in(r,n.row)||_.is_in_queue(r,n.row,i))if(_.is_swap_occupied(n.col,m.rows[0],n.size_x,n.size_y)||_.is_player_in(n.col,m.rows[0])||_.is_in_queue(n.col,m.rows[0],i))if(_.is_swap_occupied(n.col,s,n.size_x,n.size_y)||_.is_player_in(n.col,s)||_.is_in_queue(n.col,s,i))if(_.is_swap_occupied(m.cols[0],m.rows[0],n.size_x,n.size_y)||_.is_player_in(m.cols[0],m.rows[0])||_.is_in_queue(m.cols[0],m.rows[0],i))for(var o=0;o<g;o++)for(var a=0;a<f;a++){var l=m.cols[0]+o,d=m.rows[0]+a;if(!_.is_swap_occupied(l,d,n.size_x,n.size_y)&&!_.is_player_in(l,d)&&!_.is_in_queue(l,d,i)){h=_.queue_widget(l,d,i),o=g;break}}else _.options.move_widgets_down_only?p.each(v.proxy(function(t,e){var i=v(e);_.can_go_down(i)&&i.coords().grid.row===_.player_grid_data.row&&!_.is_in_queue(r,n.row,i)&&(_.move_widget_down(i,_.player_grid_data.size_y),_.set_placeholder(c,u))})):h=_.queue_widget(m.cols[0],m.rows[0],i);else h=_.queue_widget(n.col,s,i);else h=_.queue_widget(n.col,m.rows[0],i);else h=_.queue_widget(r,n.row,i);else _.options.move_widgets_down_only?p.each(v.proxy(function(t,e){var i=v(e);_.can_go_down(i)&&i.coords().grid.row===_.player_grid_data.row&&!_.is_in_queue(i.coords().grid.col,n.row,i)&&(_.move_widget_down(i,_.player_grid_data.size_y),_.set_placeholder(c,u))})):h=_.queue_widget(m.cols[0],n.row,i);else _.options.shift_larger_widgets_down&&!h&&p.each(v.proxy(function(t,e){var i=v(e);_.can_go_down(i)&&i.coords().grid.row===_.player_grid_data.row&&(_.move_widget_down(i,_.player_grid_data.size_y),_.set_placeholder(c,u))}));_.clean_up_changed()})),h&&this.can_placeholder_be_set(c,u,g,f)){for(var r in this.w_queue){var s=parseInt(r.split("_")[0]),o=parseInt(r.split("_")[1]);"full"!==this.w_queue[r]&&this.new_move_widget_to(this.w_queue[r],s,o)}this.set_placeholder(c,u)}if(!p.length){if(this.options.shift_widgets_up){var a=this.can_go_player_up(this.player_grid_data);!1!==a&&(u=a)}this.can_placeholder_be_set(c,u,g,f)&&this.set_placeholder(c,u)}return this.w_queue={},{col:c,row:u}},r.is_swap_occupied=function(t,e,i,n){for(var r=!1,s=0;s<i;s++)for(var o=0;o<n;o++){var a=t+s,l=e+o,d=a+"_"+l;if(this.is_occupied(a,l))r=!0;else if(d in this.w_queue){if("full"===this.w_queue[d]){r=!0;continue}var h=this.w_queue[d].coords().grid;this.is_widget_under_player(h.col,h.row)||delete this.w_queue[d]}l>parseInt(this.options.max_rows)&&(r=!0),a>parseInt(this.options.max_cols)&&(r=!0),this.is_player_in(a,l)&&(r=!0)}return r},r.can_placeholder_be_set=function(t,e,i,n){for(var r=!0,s=0;s<i;s++)for(var o=0;o<n;o++){var a=t+s,l=e+o,d=this.is_widget(a,l);l>parseInt(this.options.max_rows)&&(r=!1),a>parseInt(this.options.max_cols)&&(r=!1),this.is_occupied(a,l)&&!this.is_widget_queued_and_can_move(d)&&(r=!1)}return r},r.queue_widget=function(t,e,i){var n=i,r=n.coords().grid,s=t+"_"+e;if(s in this.w_queue)return!1;this.w_queue[s]=n;for(var o=0;o<r.size_x;o++)for(var a=0;a<r.size_y;a++){var l=t+o+"_"+(e+a);l!==s&&(this.w_queue[l]="full")}return!0},r.is_widget_queued_and_can_move=function(t){var e=!1;if(!1===t)return!1;for(var i in this.w_queue)if("full"!==this.w_queue[i]&&this.w_queue[i].attr("data-col")===t.attr("data-col")&&this.w_queue[i].attr("data-row")===t.attr("data-row")){e=!0;for(var n=this.w_queue[i],r=parseInt(i.split("_")[0]),s=parseInt(i.split("_")[1]),o=n.coords().grid,a=0;a<o.size_x;a++)for(var l=0;l<o.size_y;l++){var d=r+a,h=s+l;this.is_player_in(d,h)&&(e=!1)}}return e},r.is_in_queue=function(t,e,i){var n=!1,r=t+"_"+e;if(r in this.w_queue)if("full"===this.w_queue[r])n=!0;else{var s=this.w_queue[r].coords().grid;this.is_widget_under_player(s.col,s.row)?this.w_queue[r].attr("data-col")===i.attr("data-col")&&this.w_queue[r].attr("data-row")===i.attr("data-row")?(delete this.w_queue[r],n=!1):n=!0:(delete this.w_queue[r],n=!1)}return n},r.widgets_constraints=function(t){var r=v([]),s=[],o=[];return t.each(v.proxy(function(t,e){var i=v(e),n=i.coords().grid;this.can_go_widget_up(n)?(r=r.add(i),s.push(n)):o.push(n)},this)),t.not(r),{can_go_up:l.sort_by_row_asc(s),can_not_go_up:l.sort_by_row_desc(o)}},r.manage_movements=function(t,o,a){return v.each(t,v.proxy(function(t,e){var i=e,n=i.el,r=this.can_go_widget_up(i);if(r)this.move_widget_to(n,r),this.set_placeholder(o,r+i.size_y);else if(!this.can_go_player_up(this.player_grid_data)){var s=a+this.player_grid_data.size_y-i.row;this.can_go_down(n)&&(console.log("In Move Down!"),this.move_widget_down(n,s),this.set_placeholder(o,a))}},this)),this},r.is_player=function(t,e){if(e&&!this.gridmap[t])return!1;var i=e?this.gridmap[t][e]:t;return i&&(i.is(this.$player)||i.is(this.$helper))},r.is_player_in=function(t,e){var i=this.cells_occupied_by_player||{};return 0<=v.inArray(t,i.cols)&&0<=v.inArray(e,i.rows)},r.is_placeholder_in=function(t,e){var i=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(t)&&0<=v.inArray(e,i.rows)},r.is_placeholder_in_col=function(t){var e=this.cells_occupied_by_placeholder||[];return 0<=v.inArray(t,e.cols)},r.is_empty=function(t,e){return void 0===this.gridmap[t]||void 0!==this.gridmap[t][e]&&!1===this.gridmap[t][e]},r.is_valid_col=function(t,e){return this.options.max_cols===1/0||this.cols>=this.calculate_highest_col(t,e)},r.is_valid_row=function(t,e){return this.rows>=this.calculate_highest_row(t,e)},r.calculate_highest_col=function(t,e){return t+(e||1)-1},r.calculate_highest_row=function(t,e){return t+(e||1)-1},r.is_occupied=function(t,e){return!(!this.gridmap[t]||this.is_player(t,e)||!this.gridmap[t][e]||this.options.ignore_self_occupied&&this.$player.data()===v(this.gridmap[t][e]).data())},r.is_widget=function(t,e){var i=this.gridmap[t];return!!i&&!!(i=i[e])&&i},r.is_static=function(t,e){var i=this.gridmap[t];return!!i&&!(!(i=i[e])||!i.hasClass(this.options.static_class))},r.is_widget_under_player=function(t,e){return!!this.is_widget(t,e)&&this.is_player_in(t,e)},r.get_widgets_under_player=function(e){e||(e=this.cells_occupied_by_player||{cols:[],rows:[]});var n=v([]);return v.each(e.cols,v.proxy(function(t,i){v.each(e.rows,v.proxy(function(t,e){this.is_widget(i,e)&&(n=n.add(this.gridmap[i][e]))},this))},this)),n},r.set_placeholder=function(t,n){var r=v.extend({},this.placeholder_grid_data),e=t+r.size_x-1;e>this.cols&&(t-=e-t);var i=this.placeholder_grid_data.row<n,s=this.placeholder_grid_data.col!==t;if(this.placeholder_grid_data.col=t,this.placeholder_grid_data.row=n,this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.$preview_holder.attr({"data-row":n,"data-col":t}),this.options.shift_player_up){(i||s)&&this.widgets_below({col:r.col,row:r.row,size_y:r.size_y,size_x:r.size_x}).each(v.proxy(function(t,e){var i=v(e),n=i.coords().grid,r=this.can_go_widget_up(n);r&&this.move_widget_to(i,r)},this));var o=this.get_widgets_under_player(this.cells_occupied_by_placeholder);o.length&&o.each(v.proxy(function(t,e){var i=v(e);this.move_widget_down(i,n+r.size_y-i.data("coords").grid.row)},this))}},r.can_go_player_up=function(t){var n=t.row+t.size_y-1,r=!0,s=[],o=1e4,a=this.get_widgets_under_player();return this.for_each_column_occupied(t,function(t){var e=this.gridmap[t],i=n+1;for(s[t]=[];0<--i&&(this.is_empty(t,i)||this.is_player(t,i)||this.is_widget(t,i)&&e[i].is(a));)s[t].push(i),o=i<o?i:o;if(0===s[t].length)return!(r=!1);s[t].sort(function(t,e){return t-e})}),!!r&&this.get_valid_rows(t,s,o)},r.can_go_widget_up=function(n){var r=n.row+n.size_y-1,s=!0,o=[],a=1e4;return this.for_each_column_occupied(n,function(t){var e=this.gridmap[t];o[t]=[];for(var i=r+1;0<--i&&(!this.is_widget(t,i)||this.is_player_in(t,i)||e[i].is(n.el));)this.is_player(t,i)||this.is_placeholder_in(t,i)||this.is_player_in(t,i)||o[t].push(i),i<a&&(a=i);if(0===o[t].length)return!(s=!1);o[t].sort(function(t,e){return t-e})}),!!s&&this.get_valid_rows(n,o,a)},r.get_valid_rows=function(t,e,i){for(var n=t.row,r=t.row+t.size_y-1,s=t.size_y,o=i-1,a=[];++o<=r;){var l=!0;if(v.each(e,function(t,e){v.isArray(e)&&-1===v.inArray(o,e)&&(l=!1)}),!0===l&&(a.push(o),a.length===s))break}var d=!1;return 1===s?a[0]!==n&&(d=a[0]||!1):a[0]!==n&&(d=this.get_consecutive_numbers_index(a,s)),d},r.get_consecutive_numbers_index=function(t,e){for(var i=t.length,n=[],r=!0,s=-1,o=0;o<i;o++){if(r||t[o]===s+1){if(n.push(o),n.length===e)break;r=!1}else n=[],r=!0;s=t[o]}return n.length>=e&&t[n[0]]},r.get_widgets_overlapped=function(){var r=v([]),s=[],e=this.cells_occupied_by_player.rows.slice(0);return e.reverse(),v.each(this.cells_occupied_by_player.cols,v.proxy(function(t,n){v.each(e,v.proxy(function(t,e){if(!this.gridmap[n])return!0;var i=this.gridmap[n][e];this.is_occupied(n,e)&&!this.is_player(i)&&-1===v.inArray(i,s)&&(r=r.add(i),s.push(i))},this))},this)),r},r.on_start_overlapping_column=function(t){this.set_player(t,void 0,!1)},r.on_start_overlapping_row=function(t){this.set_player(void 0,t,!1)},r.on_stop_overlapping_column=function(t){var e=this;this.options.shift_larger_widgets_down&&this.for_each_widget_below(t,this.cells_occupied_by_player.rows[0],function(){e.move_widget_up(this,e.player_grid_data.size_y)})},r.on_stop_overlapping_row=function(t){var e=this,i=this.cells_occupied_by_player.cols;if(this.options.shift_larger_widgets_down)for(var n=0,r=i.length;n<r;n++)this.for_each_widget_below(i[n],t,function(){e.move_widget_up(this,e.player_grid_data.size_y)})},r.new_move_widget_to=function(t,e,i){var n=t.coords().grid;return this.remove_from_gridmap(n),n.row=i,n.col=e,this.add_to_gridmap(n),t.attr("data-row",i),t.attr("data-col",e),this.update_widget_position(n,t),this.$changed=this.$changed.add(t),this},r.move_widget=function(t,e,i,n){var r=t.coords().grid,s={col:e,row:i,size_x:r.size_x,size_y:r.size_y};return this.mutate_widget_in_gridmap(t,r,s),this.set_dom_grid_height(),this.set_dom_grid_width(),n&&n.call(this,s.col,s.row),t},r.move_widget_to=function(t,e){var s=this,i=t.coords().grid,n=this.widgets_below(t);return!1!==this.can_move_to(i,i.col,e)&&(this.remove_from_gridmap(i),i.row=e,this.add_to_gridmap(i),t.attr("data-row",e),this.$changed=this.$changed.add(t),n.each(function(t,e){var i=v(e),n=i.coords().grid,r=s.can_go_widget_up(n);r&&r!==n.row&&s.move_widget_to(i,r)}),this)},r.move_widget_up=function(n,r){if(void 0===r)return!1;var t=n.coords().grid,s=t.row,o=[];if(r||(r=1),!this.can_go_up(n))return!1;this.for_each_column_occupied(t,function(t){if(-1===v.inArray(n,o)){var e=n.coords().grid,i=s-r;if(!(i=this.can_go_up_to_row(e,t,i)))return!0;this.remove_from_gridmap(e),e.row=i,this.add_to_gridmap(e),n.attr("data-row",e.row),this.$changed=this.$changed.add(n),o.push(n)}})},r.move_widget_down=function(t,e){var i,n,s;if(e<=0)return!1;if((i=t.coords().grid.row)+(t.coords().grid.size_y-1)+e>this.options.max_rows)return!1;if(n=[],s=e,!t)return!1;if(this.failed=!1,-1===v.inArray(t,n)){var o=t.coords().grid,r=i+e;if(this.widgets_below(t).each(v.proxy(function(t,e){if(!0!==this.failed){var i=v(e),n=i.coords().grid,r=this.displacement_diff(n,o,s);0<r&&(this.failed=!1===this.move_widget_down(i,r))}},this)),this.failed)return!1;this.remove_from_gridmap(o),o.row=r,this.update_widget_position(o,t),t.attr("data-row",o.row),this.$changed=this.$changed.add(t),n.push(t)}return!0},r.can_go_up_to_row=function(t,e,i){var n,r=!0,s=[],o=t.row;if(this.for_each_column_occupied(t,function(t){for(s[t]=[],n=o;n--&&this.is_empty(t,n)&&!this.is_placeholder_in(t,n);)s[t].push(n);if(!s[t].length)return!(r=!1)}),!r)return!1;for(n=i,n=1;n<o;n++){for(var a=!0,l=0,d=s.length;l<d;l++)s[l]&&-1===v.inArray(n,s[l])&&(a=!1);if(!0===a){r=n;break}}return r},r.displacement_diff=function(t,e,i){var n=t.row,r=[],s=e.row+e.size_y;return this.for_each_column_occupied(t,function(t){for(var e=0,i=s;i<n;i++)this.is_empty(t,i)&&(e+=1);r.push(e)}),0<(i-=Math.max.apply(Math,r))?i:0},r.widgets_below=function(t){var e=v([]),i=v.isPlainObject(t)?t:t.coords().grid;if(void 0===i)return e;var n=this,r=i.row+i.size_y-1;return this.for_each_column_occupied(i,function(t){n.for_each_widget_below(t,r,function(){if(!n.is_player(this)&&-1===v.inArray(this,e))return e=e.add(this),!0})}),l.sort_by_row_asc(e)},r.set_cells_player_occupies=function(t,e){return this.remove_from_gridmap(this.placeholder_grid_data),this.placeholder_grid_data.col=t,this.placeholder_grid_data.row=e,this.add_to_gridmap(this.placeholder_grid_data,this.$player),this},r.empty_cells_player_occupies=function(){return this.remove_from_gridmap(this.placeholder_grid_data),this},r.can_go_down=function(t){var e=!0,i=this;return t.hasClass(this.options.static_class)&&(e=!1),this.widgets_below(t).each(function(){v(this).hasClass(i.options.static_class)&&(e=!1)}),e},r.can_go_up=function(t){var e=t.coords().grid,i=e.row,n=i-1,r=!0;return 1!==i&&(this.for_each_column_occupied(e,function(t){if(this.is_occupied(t,n)||this.is_player(t,n)||this.is_placeholder_in(t,n)||this.is_player_in(t,n))return!(r=!1)}),r)},r.can_move_to=function(n,t,e){var r=n.el,i={size_y:n.size_y,size_x:n.size_x,col:t,row:e},s=!0;return!(this.options.max_cols!==1/0&&t+n.size_x-1>this.cols)&&(!(this.options.max_rows<e+n.size_y-1)&&(this.for_each_cell_occupied(i,function(t,e){var i=this.is_widget(t,e);!i||n.el&&!i.is(r)||(s=!1)}),s))},r.get_targeted_columns=function(t){for(var e=(t||this.player_grid_data.col)+(this.player_grid_data.size_x-1),i=[],n=t;n<=e;n++)i.push(n);return i},r.get_targeted_rows=function(t){for(var e=(t||this.player_grid_data.row)+(this.player_grid_data.size_y-1),i=[],n=t;n<=e;n++)i.push(n);return i},r.get_cells_occupied=function(t,e){var i,n={cols:[],rows:[]};for(e instanceof v&&(t=e.coords().grid),i=0;i<t.size_x;i++){var r=t.col+i;n.cols.push(r)}for(i=0;i<t.size_y;i++){var s=t.row+i;n.rows.push(s)}return n},r.for_each_cell_occupied=function(t,i){return this.for_each_column_occupied(t,function(e){this.for_each_row_occupied(t,function(t){i.call(this,e,t)})}),this},r.for_each_column_occupied=function(t,e){for(var i=0;i<t.size_x;i++){var n=t.col+i;e.call(this,n,t)}},r.for_each_row_occupied=function(t,e){for(var i=0;i<t.size_y;i++){var n=t.row+i;e.call(this,n,t)}},r.clean_up_changed=function(){var t=this;t.$changed.each(function(){t.options.shift_larger_widgets_down&&t.move_widget_up(v(this))})},r._traversing_widgets=function(t,e,i,n,r){var s=this.gridmap;if(s[i]){var o,a,l=t+"/"+e;if(i instanceof v){var d=i.coords().grid;i=d.col,n=d.row,r=n}var h=[],c=n,u={"for_each/above":function(){for(;c--&&!(0<c&&this.is_widget(i,c)&&-1===v.inArray(s[i][c],h)&&(o=r.call(s[i][c],i,c),h.push(s[i][c]),o)););},"for_each/below":function(){for(c=n+1,a=s[i].length;c<a;c++)this.is_widget(i,c)&&-1===v.inArray(s[i][c],h)&&(o=r.call(s[i][c],i,c),h.push(s[i][c]))}};u[l]&&u[l].call(this)}},r.for_each_widget_above=function(t,e,i){return this._traversing_widgets("for_each","above",t,e,i),this},r.for_each_widget_below=function(t,e,i){return this._traversing_widgets("for_each","below",t,e,i),this},r.get_highest_occupied_cell=function(){for(var t,e=this.gridmap,i=e[1].length,n=[],r=[],s=e.length-1;1<=s;s--)for(t=i-1;1<=t;t--)if(this.is_widget(s,t)){n.push(t),r.push(s);break}return{col:Math.max.apply(Math,r),row:Math.max.apply(Math,n)}},r.get_widgets_in_range=function(t,e,i,n){var r,s,o,a,l=v([]);for(r=i;t<=r;r--)for(s=n;e<=s;s--)!1!==(o=this.is_widget(r,s))&&((a=o.data("coords").grid).col>=t&&a.col<=i&&a.row>=e&&a.row<=n&&(l=l.add(o)));return l},r.get_widgets_at_cell=function(t,e){return this.get_widgets_in_range(t,e,t,e)},r.get_widgets_from=function(e,i){var t=v();return e&&(t=t.add(this.$widgets.filter(function(){var t=parseInt(v(this).attr("data-col"));return t===e||e<t}))),i&&(t=t.add(this.$widgets.filter(function(){var t=parseInt(v(this).attr("data-row"));return t===i||i<t}))),t},r.set_dom_grid_height=function(t){if(void 0===t){var e=this.get_highest_occupied_cell().row;t=(e+1)*this.options.widget_margins[1]+e*this.min_widget_height}return this.container_height=t,this.$el.css("height",this.container_height),this},r.set_dom_grid_width=function(t){void 0===t&&(t=this.get_highest_occupied_cell().col);var e=this.options.max_cols===1/0?this.options.max_cols:this.cols;return t=Math.min(e,Math.max(t,this.options.min_cols)),this.container_width=(t+1)*this.options.widget_margins[0]+t*this.min_widget_width,this.is_responsive()?this.$el.css({"min-width":"100%","max-width":"100%"}):this.$el.css("width",this.container_width),this},r.is_responsive=function(){return this.options.autogenerate_stylesheet&&"auto"===this.options.widget_base_dimensions[0]&&this.options.max_cols!==1/0},r.get_responsive_col_width=function(){var t=this.cols||this.options.max_cols;return(this.$el[0].clientWidth-3-(t+1)*this.options.widget_margins[0])/t},r.resize_responsive_layout=function(){return this.min_widget_width=this.get_responsive_col_width(),this.generate_stylesheet(),this.update_widgets_dimensions(),this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0]),this},r.toggle_collapsed_grid=function(t,e){return t?(this.$widgets.css({"margin-top":e.widget_margins[0],"margin-bottom":e.widget_margins[0],"min-height":e.widget_base_dimensions[1]}),this.$el.addClass("collapsed"),this.resize_api&&this.disable_resize(),this.drag_api&&this.disable()):(this.$widgets.css({"margin-top":"auto","margin-bottom":"auto","min-height":"auto"}),this.$el.removeClass("collapsed"),this.resize_api&&this.enable_resize(),this.drag_api&&this.enable()),this},r.generate_stylesheet=function(t){var e,i="",n=this.is_responsive()&&this.options.responsive_breakpoint&&v(window).width()<this.options.responsive_breakpoint;t||(t={}),t.cols||(t.cols=this.cols),t.rows||(t.rows=this.rows),t.namespace||(t.namespace=this.options.namespace),t.widget_base_dimensions||(t.widget_base_dimensions=this.options.widget_base_dimensions),t.widget_margins||(t.widget_margins=this.options.widget_margins),this.is_responsive()&&(t.widget_base_dimensions=[this.get_responsive_col_width(),t.widget_base_dimensions[1]],this.toggle_collapsed_grid(n,t));var r=v.param(t);if(0<=v.inArray(r,l.generated_stylesheets))return!1;for(this.generated_stylesheets.push(r),l.generated_stylesheets.push(r),e=1;e<=t.cols+1;e++)i+=t.namespace+' [data-col="'+e+'"] { left:'+(n?this.options.widget_margins[0]:e*t.widget_margins[0]+(e-1)*t.widget_base_dimensions[0])+"px; }\n";for(e=1;e<=t.rows+1;e++)i+=t.namespace+' [data-row="'+e+'"] { top:'+(e*t.widget_margins[1]+(e-1)*t.widget_base_dimensions[1])+"px; }\n";for(var s=1;s<=t.rows;s++)i+=t.namespace+' [data-sizey="'+s+'"] { height:'+(n?"auto":s*t.widget_base_dimensions[1]+(s-1)*t.widget_margins[1])+(n?"":"px")+"; }\n";for(var o=1;o<=t.cols;o++){var a=o*t.widget_base_dimensions[0]+(o-1)*t.widget_margins[0];i+=t.namespace+' [data-sizex="'+o+'"] { width:'+(n?this.$wrapper.width()-2*this.options.widget_margins[0]:a>this.$wrapper.width()?this.$wrapper.width():a)+"px; }\n"}return this.remove_style_tags(),this.add_style_tag(i)},r.add_style_tag=function(t){var e=document,i="gridster-stylesheet";if(""!==this.options.namespace&&(i=i+"-"+this.options.namespace),!document.getElementById(i)){var n=e.createElement("style");n.id=i,e.getElementsByTagName("head")[0].appendChild(n),n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),this.remove_style_tags(),this.$style_tags=this.$style_tags.add(n)}return this},r.remove_style_tags=function(){var t=l.generated_stylesheets,e=this.generated_stylesheets;this.$style_tags.remove(),l.generated_stylesheets=v.map(t,function(t){if(-1===v.inArray(t,e))return t})},r.generate_faux_grid=function(t,e){var i,n;for(this.faux_grid=[],this.gridmap=[],i=e;0<i;i--)for(this.gridmap[i]=[],n=t;0<n;n--)this.add_faux_cell(n,i);return this},r.add_faux_cell=function(t,e){var i=v({left:this.baseX+(e-1)*this.min_widget_width,top:this.baseY+(t-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:e,row:t,original_col:e,original_row:t}).coords();return v.isArray(this.gridmap[e])||(this.gridmap[e]=[]),void 0===this.gridmap[e][t]&&(this.gridmap[e][t]=!1),this.faux_grid.push(i),this},r.add_faux_rows=function(t){t=window.parseInt(t,10);for(var e=this.rows,i=e+parseInt(t||1),n=i;e<n;n--)for(var r=this.cols;1<=r;r--)this.add_faux_cell(n,r);return this.rows=i,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},r.add_faux_cols=function(t){t=window.parseInt(t,10);var e=this.cols,i=e+parseInt(t||1);i=Math.min(i,this.options.max_cols);for(var n=e+1;n<=i;n++)for(var r=this.rows;1<=r;r--)this.add_faux_cell(r,n);return this.cols=i,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},r.recalculate_faux_grid=function(){var t=this.$wrapper.width();return this.baseX=(e.width()-t)/2,this.baseY=this.$wrapper.offset().top,"relative"===this.$wrapper.css("position")&&(this.baseX=this.baseY=0),v.each(this.faux_grid,v.proxy(function(t,e){this.faux_grid[t]=e.update({left:this.baseX+(e.data.col-1)*this.min_widget_width,top:this.baseY+(e.data.row-1)*this.min_widget_height})},this)),this.is_responsive()&&this.resize_responsive_layout(),this.options.center_widgets&&this.center_widgets(),this},r.resize_widget_dimensions=function(t){return t.widget_margins&&(this.options.widget_margins=t.widget_margins),t.widget_base_dimensions&&(this.options.widget_base_dimensions=t.widget_base_dimensions),this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0],this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1],this.$widgets.each(v.proxy(function(t,e){var i=v(e);this.resize_widget(i)},this)),this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.set_dom_grid_width(),this},r.get_widgets_from_DOM=function(){var t=this.$widgets.map(v.proxy(function(t,e){var i=v(e);return this.dom_to_coords(i)},this));return t=l.sort_by_row_and_col_asc(t),v(t).map(v.proxy(function(t,e){return this.register_widget(e)||null},this)).length&&this.$el.trigger("gridster:positionschanged"),this},r.get_num_widgets=function(){return this.$widgets.size()},r.set_num_columns=function(t){var e=this.options.max_cols,i=Math.floor(t/(this.min_widget_width+this.options.widget_margins[0]))+this.options.extra_cols,n=this.$widgets.map(function(){return v(this).attr("data-col")}).get();n.length||(n=[0]);var r=Math.max.apply(Math,n);this.cols=Math.max(r,i,this.options.min_cols),e!==1/0&&r<=e&&e<this.cols&&(this.cols=e),this.drag_api&&this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0])},r.set_new_num_rows=function(t){var e=this.options.max_rows,i=this.$widgets.map(function(){return v(this).attr("data-row")}).get();i.length||(i=[0]);var n=Math.max.apply(Math,i);this.rows=Math.max(n,t,this.options.min_rows),e!==1/0&&(e<n||e<this.rows)&&(e=this.rows),this.min_rows=n,this.max_rows=e,this.options.max_rows=e;var r=this.rows*this.min_widget_height+(this.rows+1)*this.options.widget_margins[1];this.drag_api&&(this.drag_api.options.container_height=r),this.container_height=r,this.generate_faux_grid(this.rows,this.cols)},r.generate_grid_and_stylesheet=function(){var t=this.$wrapper.width();this.set_num_columns(t);this.options.extra_rows;return this.$widgets.each(function(t,e){+v(e).attr("data-sizey")}),this.rows=this.options.max_rows,this.baseX=(e.width()-t)/2,this.baseY=this.$wrapper.offset().top,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this.generate_faux_grid(this.rows,this.cols)},r.destroy=function(t){return this.$el.removeData("gridster"),v.each(this.$widgets,function(){v(this).removeData("coords")}),e.unbind(".gridster"),this.drag_api&&this.drag_api.destroy(),this.resize_api&&this.resize_api.destroy(),this.$widgets.each(function(t,e){v(e).coords().destroy()}),this.resize_api&&this.resize_api.destroy(),this.remove_style_tags(),t&&this.$el.remove(),this},v.fn.gridster=function(e){return this.each(function(){var t=v(this);t.data("gridster")||t.data("gridster",new l(this,e))})},l}),Gws_Category_Navi.prototype.setBaseUrl=function(t){this.baseUrl=t},Gws_Category_Navi.prototype.render=function(t){if(0!=t.length){var r=this,s=[],o=s[0],a=-1,l=location.href.replace(/https?:\/\/.*?\//,"/"),d=null;$.each(t,function(t,e){var i=(e.name.match(/\//g)||[]).length,n=r.baseUrl.replace("ID",e._id);0!=i&&i==a||(s.push({depth:i,items:[]}),o=s[s.length-1]),l.startsWith(n)&&(d=e._id),o.items.push('<a class="link-item" href="'+n+'">'+e.trailing_name+"</a>"),a=i});var i=[];$.each(s,function(t,e){i.push('<div class="depth depth-'+e.depth+'">'),i.push(e.items.join('<span class="separator"></span>')),i.push("</div>")}),this.el.find(".dropdown-menu").append(i.join(""));var e=this.el.find(".dropdown-toggle");if(d){var n='<i class="material-icons md-18 md-dark">&#xE14C;</i>';e.after('<a class="ml-1" href="'+e.attr("href")+'">'+n+"</a>")}e.click(function(){return!1})}else this.el.hide()},Gws_Tab.renderTabs=function(t){var e=location.pathname+"/";$(t).find("a").each(function(){var t=$(this);e.match(new RegExp("^"+t.attr("href")+"(/|$)"))&&t.addClass("current")})},this.Gws_Popup=function(){function t(){}return t.init=null,t.render=function(t,e){var i;return this.init||(this.init=!0,$(window).resize(function(){return $(".gws-popup").remove()}),$(document).click(function(t){if(!$(t.target).closest(".gws-popup, .gws-popup-event").length)return $(".gws-popup").remove()})),$(".gws-popup").remove(),i=$("<div class='gws-popup'></div>").html($(e)),$("body").append(i),t.addClass("gws-popup-event"),this.renderPopup(t)},t.renderPopup=function(t){var e,i,n;return e=$(".gws-popup"),$(window).width()<1.5*e.outerWidth()&&e.css("max-width",$(window).width()/2),i=t.offset().left+t.outerWidth()/2-e.outerWidth()/2,n=t.offset().top-e.outerHeight()-20,i<0?(i=t.offset().left+t.outerWidth()/2-20,e.addClass("left")):e.removeClass("left"),i+e.outerWidth()>$(window).width()?(i=t.offset().left-e.outerWidth()+t.outerWidth()/2+20,e.addClass("right")):e.removeClass("right"),n<0?(n=t.offset().top+t.outerHeight(),e.addClass("top")):e.removeClass("top"),e.css({left:i,top:n}).animate({top:"+=10",opacity:1},50)},t}(),this.Gws_Member=function(){function t(){}return t.groups=null,t.users=null,t.render=function(){return $(".js-copy-groups").length<2&&($(".js-copy-groups").remove(),$(".js-paste-groups").remove()),$(".js-copy-groups").click(function(){return t.copyGroups($(this))}),$(".js-paste-groups").click(function(){return t.pasteGroups($(this))}),$(".js-copy-users").length<2&&($(".js-copy-users").remove(),$(".js-paste-users").remove()),$(".js-copy-users").click(function(){return t.copyUsers($(this))}),$(".js-paste-users").click(function(){return t.pasteUsers($(this))})},t.confirmReadableSetting=function(){return $(".save").on("click",function(){if(0===$(".gws-addon-readable-setting tbody tr").length)return confirm("\u95b2\u89a7\u8005\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\u5168\u54e1\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u304c\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")})},t.copyGroups=function(t){return this.groups=t.closest("dl").find("tbody tr").clone(!0),this.showLog(t,this.groups.length+"\u4ef6\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\u3002"),!1},t.pasteGroups=function(t){var e;return e=this.pasteItems(t,this.groups),this.showLog(t,e+"\u4ef6\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002"),!1},t.copyUsers=function(t){return this.users=t.closest("dl").find("tbody tr").clone(!0),this.showLog(t,this.users.length+"\u4ef6\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\u3002"),!1},t.pasteUsers=function(t){var e;return e=this.pasteItems(t,this.users),this.showLog(t,e+"\u4ef6\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002"),!1},t.pasteItems=function(t,e){var i,n,r,s;return e&&0!==e.length?((i=t.closest("dl")).find("table").show(),s=i.find("tbody"),n=i.find(".hidden-ids").attr("name"),r=0,e.each(function(){var t;if(0===s.find('tr[data-id="'+$(this).data("id")+'"]').length)return(t=$(this).clone(!0)).find("input").attr("name",n),s.append(t),r+=1}),r):0},t.showLog=function(t,e){return $(".gws-member-log").remove(),$("<span class='gws-member-log'>"+e+"</span>").appendTo(t.parent()).hide().fadeIn(200)},t}(),this.Gws_Reminder=function(){function t(){}return t.renderList=function(e){var t;return null==e&&(e={}),(t=$(e.el||document)).find(".list-item").each(function(){return $(this).find(".links").prepend('<a class="restore" href="#" style="display: none;">\u5143\u306b\u623b\u3059</a>')}),t.find(".list-item.deleted").each(function(){return $(this).find(".check, .meta, .delete, .updated, .more-btn").hide(),$(this).find(".dropdown-menu").removeClass("active"),$(this).find(".restore").show(),$(this).find(".notification").hide()}),t.find(".list-item .delete").click(function(){var t;return t=$(this).closest(".list-item"),$.ajax({url:e.url,method:"post",data:{_method:"delete",id:t.data("id"),item_id:t.data("item_id"),item_model:t.data("model"),item_name:t.data("name"),date:t.data("date")},success:function(){return t.toggleClass("gws-list-item--deleted").find(".check, .meta, .delete, .updated, .more-btn").hide(),t.find(".dropdown-menu").removeClass("active"),t.find(".restore").show(),t.find(".notification").hide(),!1},error:function(){return alert("Error")}}),!1}),t.find(".list-item .restore").click(function(){var t;return t=$(this).closest(".list-item"),$.ajax({url:e.restore_url,method:"post",data:{id:t.data("id"),item_id:t.data("item_id"),item_model:t.data("model"),item_name:t.data("name"),date:t.data("date")},success:function(){return t.toggleClass("gws-list-item--deleted").find(".check, .meta, .delete, .more-btn").show(),t.find(".restore").hide(),t.find(".notification")[0]&&(t.find(".notification")[0].selectedIndex=0),t.find(".notification").show(),!1},error:function(){return alert("Error")}}),!1})},t}(),Gws_Bookmark.prototype.render=function(t){null===t&&(t={});var e,i=this;this.bookmarkId=t.id,this.defaultName=t.default_name,this.url=t.url,this.model=t.model,e=this.bookmarkId?this.bookmarkIcon:this.unbookmarkIcon;var n=t.name||this.defaultName,r=$('<span class="bookmark-icon"></span>').append($('<i class="material-icons"></i>').html(e)),s=$('<ul class="dropdown-menu"></ul>'),o=$("<li></li>");o.append($('<input name="bookmark[name]" id="bookmark_name" class="bookmark-name" type="text">').val(n)),o.append($('<input name="button" type="button" class="btn update" />').val(t.save)),o.append($('<input name="button" type="button" class="btn delete" />').val(t["delete"])),s.append($('<li><div class="bookmark-notice"></div></li>')).append(o),this.el.html(r).append(s),this.el.click(function(t){if(i.loading)return!1;$(t.target
).hasClass("update")?i.update():$(t.target).hasClass("delete")?i["delete"]():i.bookmarkId?(i.el.addClass("active"),i.el.find(".dropdown-menu").addClass("active")):i.create()})},Gws_Bookmark.prototype.create=function(){this.loading=!0;var e=this,i=this.el.find(".dropdown-menu").html();this.el.find(".dropdown-menu").html(SS.loading),$.ajax({url:this.url,method:"POST",data:{item:{name:this.defaultName,url:location.pathname+location.search,model:this.model}},success:function(t){e.el.find(".dropdown-menu").html(i),e.el.addClass("active"),e.el.find(".dropdown-menu").addClass("active"),e.el.find(".material-icons").html(e.bookmarkIcon),e.el.find(".bookmark-notice").text(t.notice),e.el.find(".bookmark-name").val(e.defaultName),e.bookmarkId=t.bookmark_id,e.loading=!1},error:function(){alert("Error")}})},Gws_Bookmark.prototype.update=function(){this.loading=!0;var e=this,i=this.el.find(".bookmark-name").val()||this.defaultName,t=this.url+"/"+this.bookmarkId,n=this.el.find(".dropdown-menu").html();this.el.find(".dropdown-menu").html(SS.loading),this.el.addClass("active"),this.el.find(".dropdown-menu").addClass("active"),$.ajax({url:t,method:"POST",data:{_method:"patch",item:{name:i,url:location.pathname+location.search,model:this.model}},success:function(t){e.el.find(".dropdown-menu").html(n),e.el.removeClass("active"),e.el.find(".dropdown-menu").removeClass("active"),e.el.find(".material-icons").html(e.bookmarkIcon),e.el.find(".bookmark-notice").text(t.notice),e.el.find(".bookmark-name").val(i),e.bookmarkId=t.bookmark_id,e.loading=!1},error:function(){alert("Error")}})},Gws_Bookmark.prototype["delete"]=function(){var t=this;if(!this.bookmarkId)return!1;this.loading=!0;var e=this.url+"/"+this.bookmarkId,i=this.el.find(".dropdown-menu").html();this.el.find(".dropdown-menu").html(SS.loading),this.el.addClass("active"),this.el.find(".dropdown-menu").addClass("active"),$.ajax({url:e,method:"POST",data:{_method:"delete",item:{url:location.pathname+location.search}},success:function(){t.el.find(".dropdown-menu").html(i),t.el.removeClass("active"),t.el.find(".dropdown-menu").removeClass("active"),t.el.find(".material-icons").html(t.unbookmarkIcon),t.bookmarkId=null,t.loading=!1},error:function(){alert("Error")}})},this.Gws_EditLock=function(){function t(t,e,i){this.releaseLockOnCancel=n(this.releaseLockOnCancel,this),this.releaseLock=n(this.releaseLock,this),this.refreshLock=n(this.refreshLock,this),this.selector=t,this.lock_url=e,this.unlock_url=i,this.unloading=!1,this.interval=12e4,$.support.opacity?$(window).bind("beforeunload",this.releaseLock):($('button[type="reset"]').bind("click",this.releaseLockOnCancel),$("a.back-to-index").bind("click",this.releaseLockOnCancel),$("a.back-to-show").bind("click",this.releaseLockOnCancel)),this.refreshLock()}var n=function(t,e){return function(){return t.apply(e,arguments)}};return t.prototype.updateView=function(t){if($(this.selector+" .lock_until").text(""),t)return $(this.selector+" .lock_until").text(t)},t.prototype.refreshLock=function(){var e;if(!this.unloading)return $.ajax({type:"GET",url:this.lock_url,dataType:"json",cache:!1,statusCode:{200:(e=this,function(t){return t.lock_until_pretty?e.updateView(t.lock_until_pretty):e.updateView(null)})}}),setTimeout(this.refreshLock,this.interval)},t.prototype.releaseLock=function(){this.unloading=!0,$.ajax({type:"POST",url:this.unlock_url,dataType:"json",data:{_method:"delete"},timeout:5e3})},t.prototype.releaseLockOnCancel=function(){return this.releaseLock(),!0},t}(),Gws_ReadableSetting.prototype.render=function(){var t=this;this.el.find(".buttons input").change(function(){"select"==$(this).val()?t.showSelectForm():t.hideSelectForm()}),"select"==this.el.find(".buttons input:checked").val()?this.el.find(".gws-addon-readable-setting-select").show():this.el.find(".gws-addon-readable-setting-select").hide()},Gws_ReadableSetting.prototype.showSelectForm=function(){this.el.find(".gws-addon-readable-setting-select").slideDown("fast")},Gws_ReadableSetting.prototype.hideSelectForm=function(){this.el.find(".gws-addon-readable-setting-select").slideUp("fast")},Gws_Contrast.getContrastId=function(t){return Cookies.get("gws-contrast-"+t)},Gws_Contrast.setContrastId=function(t,e){Cookies.set("gws-contrast-"+t,e,{expires:7,path:"/"})},Gws_Contrast.removeContrastId=function(t){Cookies.remove("gws-contrast-"+t)},Gws_Contrast.prototype.render=function(){var n=this;this.$el.data("load",function(){n.loadContrasts()}),this.$el.on("click",".gws-contrast-item",function(t){var e=$(this),i=e.data("id");"default"===i?(n.removeContrast(e.data("text-color"),e.data("color")),Gws_Contrast.removeContrastId(n.opts.siteId)):(n.changeContrast(e.data("text-color"),e.data("color")),Gws_Contrast.setContrastId(n.opts.siteId,i)),SS.notice(n.opts.notice.replace(":name",e.text())),t.stopPropagation()})},Gws_Contrast.prototype.loadContrasts=function(){if(this.$el.data("loadedAt"))this.checkActiveContrast();else{var e=this;$.ajax({url:this.opts.url,type:"GET",dataType:"json",success:function(t){e.renderContrasts(t)},error:function(){e.showMessage(this.opts.loadError)},complete:function(t){e.completeLoading(t)}})}},Gws_Contrast.prototype.completeLoading=function(){this.$el.data("loadedAt",Date.now()),this.$el.find(".gws-contrast-loading").closest("li").hide()},Gws_Contrast.prototype.showMessage=function(t){this.$el.append($("<li/>").html('<div class="gws-contrast-error">'+t+"</div>"))},Gws_Contrast.prototype.renderContrasts=function(t){if(0!==t.length){this.renderContrast("default",this.opts.defaultContrast);var e=this;$.each(t,function(){e.renderContrast(this._id.$oid,this.name,this.color,this.text_color)}),this.checkActiveContrast()}else this.showMessage(this.opts.noContrasts)},Gws_Contrast.prototype.renderContrast=function(t,e,i,n){var r={id:t};i&&(r.color=i),n&&(r.textColor=n);var s=$("<input/>",{type:"radio",name:"gws-contrast-item",value:t}),o=$("<label/>",{"class":"gws-contrast-item",data:r});o.append(s),o.append('<span class="gws-contrast-name">'+e+"</span>"),this.$el.append($("<li/>").append(o))},Gws_Contrast.prototype.checkActiveContrast=function(){var t=Gws_Contrast.getContrastId(this.opts.siteId);t?$('input[name="gws-contrast-item"]').val([t]):$('input[name="gws-contrast-item"]').val(["default"])},Gws_Contrast.prototype.changeContrast=function(t,e){this.$style||(this.$style=$("<style/>",{type:"text/css"}),$("head").append(this.$style)),this.$style.html(this.template.replace(/:color/g,t).replace(/:background/g,e))},Gws_Contrast.prototype.removeContrast=function(){this.$style&&this.$style.html("")},this.Gws_Schedule_View=function(){function i(){}return i.getCalendar=function(){var t;return 0===(t=$("#calendar-controller")).length&&(t=$("#calendar")),t.fullCalendar("getView").calendar?t:null},i.getCalendarDate=function(){var t;return(t=i.getCalendar())?t.fullCalendar("getDate").format("YYYY-MM-DD"):null},i.renderTabs=function(t){return $(t).find("a").click(function(){var t,e;return(t=i.getCalendarDate())&&(e=(e=$(this).attr("href")).replace(/(\?.*)?$/,"?calendar[date]="+t),$(this).attr("href",e)),!0})},i.renderSideCalendars=function(t){return $(t).find(".fc-toolbar h2").click(function(){var t,e;return e="gws-schedule-tool-calendars",t=i.getCalendarDate(),t=$.fullCalendar.moment(t),$("."+e).is(":hidden")&&$("."+e).remove(),0===$("."+e).length&&i.crenderSideCalendars(e,t),$("."+e).animate({width:"toggle"},"fast")})},i.crenderSideCalendars=function(i,e){var t,n,r;for(t="<div class='"+i+"'><div class='xdsoft_datetimepicker controller'><button type='button' class='xdsoft_prev' /><button type='button' class='xdsoft_next' /></div></div>",$("#menu").before(t),n=r=0;r<=3;n=++r)0<n&&e.add(1,"months"),$("."+i).append("<div class='"+i+"-cal"+n+"'></div>"),$("."+i+"-cal"+n).datetimepicker({timepicker:!1,format:"Y/m/d",closeOnDateSelect:!0,scrollInput:!1,scrollMonth:!1,inline:!0,defaultDate:e.format("YYYY-MM-DD"),defaultSelect:!1,todayButton:!1,onGenerate:function(){return $(this).find(".xdsoft_today").removeClass("xdsoft_today"),$(this).find(".xdsoft_current").removeClass("xdsoft_current")},onSelectDate:function(t){return e=sprintf("%d-%02d-%02d",t.getFullYear(),t.getMonth()+1,t.getDate()),$(".calendar").fullCalendar("gotoDate",e)}});return $("."+i).find(".xdsoft_month, .xdsoft_year").unbind("mousedown").find("i").remove(),$("."+i+" .xdsoft_datetimepicker").not(".controller.controller").find(".xdsoft_prev, .xdsoft_next").hide(),$("."+i+" .controller .xdsoft_prev").mousedown(function(){var t,e;for(e=[],n=t=1;t<=4;n=++t)e.push($("."+i+" .xdsoft_prev").not(this).mousedown().mouseup());return e}),$("."+i+" .controller .xdsoft_next").mousedown(function(){var t,e;for(e=[],n=t=1;t<=4;n=++t)e.push($("."+i+" .xdsoft_next").not(this).mousedown().mouseup());return e})},i}(),this.Gws_Schedule_Calendar=function(){function d(){}return d.messages={noPlan:"\u4e88\u5b9a\u306f\u3042\u308a\u307e\u305b\u3093"},d.render=function(t,e,i){var n;return null==e&&(e={}),null==i&&(i={}),n=this.defaultParams(t,e),e.restUrl&&$.extend(!0,n,this.editableParams(e)),e.restUrl&&$.extend(!0,n,this.tapMenuParams(e)),$.extend(!0,n,e),$(t).fullCalendar(n),this.renderInitialize(t,i),this.overrideAddLink(t)},d.renderInitialize=function(t,e){return null==e&&(e={}),e.viewTodo||(e.viewTodo="active"),e.view&&$(t).fullCalendar("changeView",e.view),e.date&&$(t).fullCalendar("gotoDate",e.date),"list"===e.viewFormat&&($.fullCalendar.toggleListFormat(t),$(t).find(".fc-withListView-button").addClass("fc-state-active")),"active"===e.viewTodo&&$(t).find(".fc-withTodo-button").addClass("fc-state-active"),"active"===e.viewAttendance&&$(t).find(".fc-withAbsence-button").addClass("fc-state-active"),Gws_Schedule_View.renderSideCalendars(t),$(t+"-header .calendar-text").each(function(){var t,e;return e=$(this),t=$(this).find(".calendar-text-popup").prop("outerHTML"),e.find(".calendar-text-link").click(function(){return Gws_Popup.render($(this),$(t).show()),!1})})},d.defaultParams=function(e){return{buttonText:{listMonth:"\u30ea\u30b9\u30c8"},columnFormat:{month:"ddd",week:"M/D [(]ddd[)]",day:"M/D [(]ddd[)]"},customButtons:{withTodo:{text:"ToDo\u8868\u793a",click:function(){return $(".fc-event-todo").toggle(!$(this).hasClass("fc-state-active")),$(this).toggleClass("fc-state-active"),d.updateNoPlanVisibility($(this).closest(".fc"))}},withAbsence:{text:"\u6b20\u5e2d\u8868\u793a",click:function(){return $(".fc-event-user-attendance-absence").toggle(!$(this).hasClass("fc-state-active")),$(this).toggleClass("fc-state-active"),d.updateNoPlanVisibility($(this).closest(".fc"))}},withListView:{text:"\u30ea\u30b9\u30c8",click:function(){return $.fullCalendar.toggleListFormat(e),$(e).fullCalendar("refetchEvents"),$(window).trigger("resize"),$(this).toggleClass("fc-state-active")}}},contentHeight:"auto",displayEventEnd:{basicWeek:!0},endParam:"s[end]",fixedWeekCount:!1,slotEventOverlap:!1,header:{left:"today prev next title",right:"withAbsence withTodo month,basicWeek,agendaDay withListView"},lang:"ja",nextDayThreshold:"00:00:00",schedulerLicenseKey:"CC-Attribution-NonCommercial-NoDerivatives",slotLabelFormat:"HH:mm",startParam:"s[start]",timeFormat:"HH:mm",titleFormat:{month:"YYYY\u5e74 M\u6708",week:"(YYYY\u5e74 M\u6708 D\u65e5\uff08ddd\uff09)",day:"YYYY\u5e74 M\u6708 D\u65e5\uff08ddd\uff09"},loading:function(t){return t?$(e).hasClass("fc-list-format")?$(this).find(".fc-view").prepend('<span class="fc-loading">\u8aad\u307f\u8fbc\u307f\u4e2d</span>'):$(this).find(".fc-widget-content").eq(0).prepend('<span class="fc-loading">\u8aad\u307f\u8fbc\u307f\u4e2d</span>'):$(this).find(".fc-loading").remove()},eventAfterAllRender:function(t){var e,i;return(i=$(".fc .fc-withTodo-button")).length&&(i.hasClass("fc-state-active")?$(".fc .fc-event-todo").show():$(".fc .fc-event-todo").hide()),(e=$(".fc .fc-withAbsence-button")).length&&(e.hasClass("fc-state-active")?$(".fc .fc-event-user-attendance-absence").show():$(".fc .fc-event-user-attendance-absence").hide()),d.updateNoPlanVisibility(t.el.closest(".fc")),d.changePrintPreviewPortrait(t)}}},d.viewStateQuery=function(t){var e,i,n;return i=t.el.closest(".fc").hasClass("fc-list-format")?"list":"default",n=$(".fc .fc-withTodo-button").hasClass("fc-state-active")?"active":"inactive",e=$(".fc .fc-withAbsence-button").hasClass("fc-state-active")?"active":"inactive","calendar[path]="+location.pathname+"&calendar[view]="+t.name+"&calendar[viewFormat]="+i+"&calendar[viewTodo]="+n+"&calendar[viewAttendance]="+e},d.tapMenuParams=function(a){var l;return l=a.restUrl,{dayClick:function(e,t,i){var n,r,s,o;if(n="",a.tapMenu&&(r=new Date,s=e.format()+"T"+r.getHours()+":00:00",o="calendar[date]="+e.format()+"&"+d.viewStateQuery(i),n="<a href='"+l+"/new?start="+s+"&"+o+"' class='add-plan'>\u4e88\u5b9a\u3092\u4f5c\u6210</a>",n+="<a href='"+l.replace(/schedule\/.*/,"schedule/todo/readables")+"/new?start="+s+"&"+o+"' class='add-plan'>ToDo\u3092\u4f5c\u6210</a>"),0===$("#calendar-controller").length&&("month"!==i.name&&(n+='<a href="" data-view="month">\u6708\u8868\u793a</a>'),"basicWeek"!==i.name&&(n+='<a href="" data-view="basicWeek">\u9031\u8868\u793a</a>'),"agendaDay"!==i.name&&(n+='<a href="" data-view="agendaDay">\u65e5\u8868\u793a</a>')),n)return $("body").append('<div class="tap-menu">'+n+"</div>"),t.pageX+$(".tap-menu").width()>$(window).width()?$(".tap-menu").css("top",t.pageY-5).css("right",5).show():$(".tap-menu").css("top",t.pageY-5).css("left",t.pageX-5).show(),$(".tap-menu a").click(function(){var t;if($(this).data("view"))return(t=i.calendar.getCalendar()).changeView($(this).data("view")),t.gotoDate(e),$(".tap-menu").remove(),!1}),$(".tap-menu").mouseleave(function(){return $(".tap-menu").remove()})}}},d.editableParams=function(t){var l;return l=t.restUrl,{editable:!0,eventClick:function(t,e,i){var n,r,s;if(!t.noPopup)return s=$(this),Gws_Popup.render(s,"<div class='fc-popup'><span class='fc-loading'>\u8aad\u307f\u8fbc\u307f\u4e2d</span></div>"),n=t.restUrl?t.restUrl:l,r="calendar[date]="+t.start.format("YYYY-MM-DD")+"&"+d.viewStateQuery(i),$.ajax({url:n+"/"+t.id+"/popup",success:function(t){return $(".fc-popup").html(t),$(".fc-popup").find("a").each(function(){return $(this).attr("href",$(this).attr("href")+"?"+r)}),Gws_Popup.renderPopup(s)}})},eventDrop:function(t,e,i,n,r,s){var o,a;return a=null,t.end&&(a=t.end.format()),o=t.restUrl?t.restUrl:l,$.ajax({type:"PUT",url:o+"/"+t.id+".json",data:{item:{api:"drop",api_start:t.start.format(),api_end:a}},success:function(){var t;return t=s.el.closest(".calendar").attr("id"),$(".calendar.multiple").not("#"+t).fullCalendar("refetchEvents")},error:function(t){return alert(t.responseJSON.join("\n")),i()}})},eventResize:function(t,e,i){return $.ajax({type:"PUT",url:l+"/"+t.id+".json",data:{item:{api:"resize",api_start:t.start.format(),api_end:t.end.format()}},success:function(){var t;return t=view.el.closest(".calendar").attr("id"),$(".calendar.multiple").not("#"+t).fullCalendar("refetchEvents")},error:function(t){return alert(t.responseJSON.join("\n")),i()}})}}},d.changePrintPreviewPortrait=function(t){if($("body").hasClass("print-preview"))return"agendaDay"===t.type||"listMonth"===t.type||t.el.closest(".fc").hasClass("fc-list-format")?($("body").removeClass("horizontal"),$("body").addClass("vertical")):($("body").removeClass("vertical"),$("body").addClass("horizontal"))},d.overrideAddLink=function(r){return $(".add-plan").click(function(){var t,e,i,n;return i=new Date,t=$(r).fullCalendar("getDate"),n=$(r).fullCalendar("getView"),e=$(this).attr("href").replace(/\?.*/,""),n.start.isBefore(i)&&n.end.isAfter(i)||(e=e+"?start="+(t.format("YYYY-MM-DD")+"T"+i.getHours()+":00:00")+"&"+("calendar[date]="+t.format()+"&"+d.viewStateQuery(n))),$(this).attr("href",e)})},d.updateNoPlanVisibility=function(t){var e;if(0!==(e=$(t).find(".fc-listMonth-view-container .no-plan")).length)return 0===$(".fc-event:visible").length?e.show():e.hide()},d}();var FC=$.fullCalendar,View=FC.View;BasicHourView=FC.views.basicHour=FC.BasicView.extend({renderEvents:function(t){for(i in this.dayGrid.renderEvents(t),head='<tr><td class="fc-head-container fc-widget-header">',head+='<div class="fc-row fc-widget-header">',head+="<table><thead><tr>",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])head+='<th class="fc-day-header fc-widget-header fc-hour-'+i+'">'+i+"</th>";head+="</tr></thead></table>",head+="</div>",head+="</td></tr>",this.el.find(".fc-head").html(head)}}),BasicHourView.eventRender=function(t,e,i){var n=BasicHourView.eventLeftPosition(t,i),r=BasicHourView.eventRightPosition(t,i)-n;r<1&&(r=1),e.find(".fc-time").remove(),e.css({position:"absolute",top:"2px",width:r.toString()+"%","margin-left":n+"%"})},BasicHourView.eventLeftPosition=function(t,e){if(nums=BasicHourView.datesToNum(t.start,e.start),nums[0]<nums[1])return 0;var i=new Date(t.start._i);return.0694*(60*i.getHours()+i.getMinutes())},BasicHourView.eventRightPosition=function(t,e){if(!t.end)return 1;if(nums=BasicHourView.datesToNum(t.end,e.end),nums[0]==nums[1])return 99.5;var i=new Date(t.end._i);return.0694*(60*i.getHours()+i.getMinutes())},BasicHourView.datesToNum=function(t,e){return num1=1e4*t.year()+100*(t.month()+1)+t.date(),num2=1e4*e.year()+100*(e.month()+1)+e.date(),[num1,num2]},function(){var t=$.fullCalendar,p=(t.View,!1),f=function(){var t=$(".fc-listMonth-view .fc-listMonth-view-container")[0];return t?$(t):t=$('<div class="fc-listMonth-view-container"></div>').appendTo(".fc-listMonth-view")},g=function(t){return t.html(""),t},m=function(){var t=$(".fc-listMonth-view .no-plan");0==$(".fc-event:visible").length?t.show():t.hide()},e=t.ListMonthView=t.BasicView.extend({renderEvents:function(i){var n=this.calendar,t=g(f()),e=$('<div class="fc-listMonth-view-table"></div>'),r=$('<div class="td no-plan" style="display: none;">'+Gws_Schedule_Calendar.messages.noPlan+"</div>");for(var s in $('<div class="tr"></div>').appendTo(e).append(r),i){var o=i[s];if(-1===o.className.indexOf("fc-holiday")){var a=$('<span class="fc-content"></span>').text(o.title),l=$('<a class="fc-event fc-event-point"></a>').append(a);l.addClass(o.className.join(" ")),l.css({color:o.textColor,"background-color":o.backgroundColor}),l.bind("click",function(t){var e=$(this).data("eventNo");return n.view.trigger("eventClick",$(this),i[e],t)}).data("eventNo",s);var d=$('<div class="td info"></div>').append(l);o.sanitizedHtml&&d.append('<p class="summary">'+o.sanitizedHtml+"</p>");var h=$('<div class="td date"></div>').text(o.startDateLabel),c=$('<div class="td time"></div>').text(o.startTimeLabel);o.allDay&&c.text(o.allDayLabel),0;var u=$('<div class="tr"></div>').appendTo(e).append(h).append(c).append(d);-1!==o.className.indexOf("fc-event-todo")&&u.addClass("fc-event-todo"),-1!==o.className.indexOf("fc-event-user-attendance-absence")&&(u.addClass("fc-event-user-attendance-absence"),u.css("display","none"))}}e.appendTo(t),m(),p||(p=!0,$(".fc-withTodo-button").on("click",function(){var t=$("#calendar").fullCalendar("getView").name;t||(t=$("#calendar-controller").fullCalendar("getView").name),"listMonth"===t&&setTimeout(m,0)}))}});t.views.listMonth={"class":e,duration:{months:1},defaults:{fixedWeekCount:!1}}}(),function(){var u=$.fullCalendar,p=function(t){if(!t.title)return"";var e='<div class="fc-title">'+u.htmlEscape("["+t.title+"]");return t.sanitizedHtml?e+" "+u.htmlEscape(t.sanitizedHtml)+"</div>":e+"</div>"},t=u.TimeGrid.extend({fgSegHtml:function(t,e){var i,n,r,s=this.view,o=t.event,a=s.isEventDraggable(o),l=!e&&t.isStart&&s.isEventResizableFromStart(o),d=!e&&t.isEnd&&s.isEventResizableFromEnd(o),h=this.getSegClasses(t,a,l||d),c=u.cssToStr(this.getSegSkinCss(t));return h.unshift("fc-time-grid-event","fc-v-event"),s.isMultiDayEvent(o)?(t.isStart||t.isEnd)&&(i=this.getEventTimeText(t),n=this.getEventTimeText(t,"LT"),r=this.getEventTimeText(t,null,!1)):(i=this.getEventTimeText(o),n=this.getEventTimeText(o,"LT"),r=this.getEventTimeText(o,null,!1)),'<a class="'+h.join(" ")+'"'+(o.url?' href="'+u.htmlEscape(o.url)+'"':"")+(c?' style="'+c+'"':"")+'><div class="fc-content">'+(i?'<div class="fc-time" data-start="'+u.htmlEscape(r)+'" data-full="'+u.htmlEscape(n)+'"><span>'+u.htmlEscape(i)+"</span></div>":"")+p(o)+'</div><div class="fc-bg"/>'+(d?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"}});u.AgendaView.extend({timeGridClass:t})}();var fullCalendar_renderListEvents=function(i){var t=function(){var t=$(".fc-view .fc-listMonth-view-container")[0];return t?$(t):t=$('<div class="fc-listMonth-view-container"></div>').appendTo(".fc-view")},e=function(t){return t.html(""),t},n=function(){var t=$(".fc-listMonth-view-container .no-plan");0==$(".fc-event:visible").length?t.show():t.hide()},r=this.calendar,s=e(t()),o=$('<div class="fc-listMonth-view-table"></div>'),a=$('<div class="td no-plan" style="display: none;">'+Gws_Schedule_Calendar.messages.noPlan+"</div>");$('<div class="tr"></div>').appendTo(o).append(a);for(var l=0;l<i.length;l++){var d=i[l].event;if(-1===d.className.indexOf("fc-holiday")){var h=$('<span class="fc-content"></span>').text(d.title),c=$('<a class="fc-event fc-event-point"></a>').append(h);c.addClass(d.className.join(" ")),c.css({color:d.textColor,"background-color":d.backgroundColor}),c.bind("click",function(t){var e=$(this).data("eventNo");return r.view.trigger("eventClick",$(this),i[e].event,t)}).data("eventNo",l);var u=$('<div class="td info"></div>').append(c);if(d.sanitizedHtml&&u.append('<p class="summary">'+d.sanitizedHtml+"</p>"),d.allDay)var p=d.startDateLabel+" "+d.allDayLabel,f=d.endDateLabel+" "+d.allDayLabel;else p=d.startDateLabel+" "+d.startTimeLabel,f=d.endDateLabel+" "+d.endTimeLabel;var g=$('<div class="td startAt"></div>').text(p),m=$('<div class="td delimiter"></div>').text("-"),_=$('<div class="td endAt"></div>').text(f),v=$('<div class="tr"></div>').appendTo(o).append(g).append(m).append(_).append(u);0,-1!==d.className.indexOf("fc-event-todo")&&v.addClass("fc-event-todo"),-1!==d.className.indexOf("fc-event-user-attendance-absence")&&(v.addClass("fc-event-user-attendance-absence"),v.css("display","none"))}}o.appendTo(s),n()};$.fullCalendar.toggleListFormat=function(t){$(t).hasClass("fc-list-format")?($(t).find(".fc-view").children().show(),$(t).find(".fc-listMonth-view-container").hide(),$(t).removeClass("fc-list-format")):($(t).find(".fc-view").children().hide(),$(t).find(".fc-listMonth-view-container").show(),$(t).addClass("fc-list-format"))},$.fullCalendar.BasicView.prototype.renderListEvents=fullCalendar_renderListEvents,$.fullCalendar.BasicView.prototype.renderEvents_=$.fullCalendar.BasicView.prototype.renderEvents,$.fullCalendar.BasicView.prototype.renderEvents=function(t){this.renderEvents_(t),this.el.closest(".fc").hasClass("fc-list-format")&&(segs=this.dayGrid.segs,this.renderListEvents(segs))},$.fullCalendar.BasicView.prototype.renderSkeletonHtml_=$.fullCalendar.BasicView.prototype.renderSkeletonHtml,$.fullCalendar.BasicView.prototype.renderSkeletonHtml=function(){var t=this.renderSkeletonHtml_();return this.el.closest(".fc").hasClass("fc-list-format")&&(t=$(t).hide()[0]),t},$.fullCalendar.AgendaView.prototype.renderListEvents=fullCalendar_renderListEvents,$.fullCalendar.AgendaView.prototype.renderEvents_=$.fullCalendar.AgendaView.prototype.renderEvents,$.fullCalendar.AgendaView.prototype.renderEvents=function(t){this.renderEvents_(t),this.el.closest(".fc").hasClass("fc-list-format")&&(segs=this.timeGrid.segs.concat(this.dayGrid.segs),this.renderListEvents(segs))},$.fullCalendar.AgendaView.prototype.renderSkeletonHtml_=$.fullCalendar.AgendaView.prototype.renderSkeletonHtml,$.fullCalendar.AgendaView.prototype.renderSkeletonHtml=function(){var t=this.renderSkeletonHtml_();return this.el.closest(".fc").hasClass("fc-list-format")&&(t=$(t).hide()[0]),t},Gws_Schedule_CalendarTransition.prototype.renderLinks=function(t){var e=this;$(t).each(function(){if(!$(this).hasClass("no-calendar-state")){var t=$(this).attr("href");0<=t.indexOf("?")?t+="&"+e.state:t+="?"+e.state,$(this).attr("href",t)}})},this.Gws_Schedule_Multiple_Calendar=function(){function t(){}return t.render=function(t,e,i){var n;return null==e&&(e={}),null==i&&(i={}),n=Gws_Schedule_Calendar.defaultParams(e),e.restUrl&&$.extend(!0,n,Gws_Schedule_Calendar.editableParams(e)),e.restUrl&&$.extend(!0,n,Gws_Schedule_Calendar.tapMenuParams(e)),$.extend(!0,n,this.defaultParams(e)),$.extend(!0,n,this.contentParams(e)),$.extend(!0,n,e),$(t).fullCalendar(n),Gws_Schedule_Calendar.renderInitialize(t,i),$(document).click(function(t){return $(".fc-event").not($(t.target).closest(".fc-event")).find(".fc-popup").remove()})},t.defaultParams=function(){return{defaultView:"basicWeek",header:{left:"today prev next title",right:"withAbsence withTodo basicWeek,timelineDay"},slotDuration:"01:00",slotLabelFormat:"H",views:{basicHour:{type:"day",buttonText:"\u65e5",contentHeight:25},timelineDay:{contentHeight:25,minTime:"08:00",maxTime:"22:00"}}}},t.controllerParams=function(){return{header:{left:"today prev next title",right:"withAbsence withTodo basicWeek,timelineDay"},eventSources:[],eventAfterAllRender:function(t){if("basicWeek"===t.name)return t.el.find(".fc-body").hide()}}},t.contentParams=function(){return{eventRender:function(t,e,i){if("basicHour"===i.name)return BasicHourView.eventRender(t,e,i)},eventAfterAllRender:function(){}}},t.renderController=function(t,e,i){var n,r;return null==e&&(e={}),null==i&&(i={}),r=Gws_Schedule_Calendar.defaultParams(e),$.extend(!0,r,this.defaultParams(e)),$.extend(!0,r,this.controllerParams(e)),$.extend(!0,r,e),$(t).fullCalendar(r),Gws_Schedule_Calendar.renderInitialize(t,i),Gws_Schedule_Calendar.overrideAddLink(t),(n=$(t)).find(".fc-today-button").click(function(){return $(".calendar.multiple .fc-today-button").click()}),n.find(".fc-prev-button").click(function(){return $(".calendar.multiple .fc-prev-button").click()}),n.find(".fc-next-button").click(function(){return $(".calendar.multiple .fc-next-button").click()}),n.find(".fc-basicWeek-button").click(function(){return $(".calendar.multiple .fc-basicWeek-button").click()}),n.find(".fc-timelineDay-button").click(function(){return $(".calendar.multiple .fc-timelineDay-button").click()}),n.find(".fc-basicHour-button").click(function(){return $(".calendar.multiple .fc-basicHour-button").click()})},t}(),this.Gws_Schedule_Plan=function(){function s(){}return s.diffOn=36e5,s.renderForm=function(t){return null==t&&(t={}),$("input.date").datetimepicker({lang:"ja",timepicker:!1,format:"Y/m/d",closeOnDateSelect:!0,scrollInput:!1,maxDate:t.maxDate}),$("input.datetime").datetimepicker({lang:"ja",roundTime:"ceil",step:30,maxDate:t.maxDate}),this.relateDateForm(),this.relateDateTimeForm()},s.renderAlldayForm=function(){return this.changeDateForm(),$("#item_allday").change(function(){return s.changeDateValue(),s.changeDateForm()})},s.changeDateValue=function(){var t,e;return $("#item_allday").prop("checked")?($("#item_start_on").val($("#item_start_at").val().replace(/ .*/,"")),$("#item_end_on").val($("#item_end_at").val().replace(/ .*/,""))):(e=$("#item_start_at").val().replace(/.* /,""),t=$("#item_end_at").val().replace(/.* /,""),""===e&&""!==$("#item_start_on").val()&&(e="00:00"),""===t&&""!==$("#item_end_on").val()&&(t="00:00"),$("#item_start_at").val($("#item_start_on").val()+" "+e),$("#item_end_at").val($("#item_end_on").val()+" "+t))},s.changeDateForm=function(){return $("#item_allday").prop("checked")?($(".dates-field").show(),$(".datetimes-field").hide()):($(".dates-field").hide(),$(".datetimes-field").show())},s.relateDateForm=function(n,r){if(null==n&&(n=".date.start"),null==r&&(r=".date.end"),$(n+", "+r).click(function(){return s.diffOn=s.diffDates($(n).val(),$(r).val())}),$(n).change(function(){var t,e,i;if((i=$(n).val())&&(i=new Date(i).getTime(),!isNaN(i)))return(t=new Date).setTime(i+s.diffOn),e="%d/%02d/%02d",$(n).hasClass("datetime")&&(e="%d/%02d/%02d %02d:%02d"),$(r).val(sprintf(e,t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes()))}),""===$(r).val())return $(n).change()},s.relateDateTimeForm=function(){return this.relateDateForm(".datetime.start",".datetime.end")},s.diffDates=function(t,e){var i;return t&&e?(i=new Date(e).getTime()-new Date(t).getTime())<0?0:i:36e5},s.transferEnd2Start=function(){return $("#item_allday").prop("checked")?$("#item_start_on").val($("#item_end_on").val()):$("#item_start_at").val($("#item_end_at").val())},s}(),this.Gws_Schedule_Repeat_Plan=function(){function t(){}return t.renderForm=function(){return this.changeRepeatForm(),this.relateDateForm(),$("#item_repeat_type").change(function(){return t.changeRepeatForm()})},t.changeRepeatForm=function(){var t;return""===(t=$("#item_repeat_type").val())?$(".gws-schedule-repeat").hide():($(".gws-schedule-repeat").show(),$(".repeat-daily, .repeat-weekly, .repeat-monthly").hide(),$(".repeat-"+t).show())},t.relateDateForm=function(){return Gws_Schedule_Plan.relateDateForm(".date.repeat_start",".date.repeat_end")},t.renderSubmitButtons=function(){var t,e,i,n,r,s;return r=$("#main form"),s='<span class="gws-schedule-btn-space"></span>',t=$('<input type="button" class="btn" value="\u4eca\u56de\u306e\u307f" />'),e=$('<input type="button" class="btn" value="\u4ee5\u964d\u3059\u3079\u3066" />'),i=$('<input type="button" class="btn" value="\u4e00\u9023\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3059\u3079\u3066" />'),t.bind("click",function(){return r.append('<input type="hidden" name="item[edit_range]" value="one" />').submit()}),e.bind("click",function(){return r.append('<input type="hidden" name="item[edit_range]" value="later" />').submit()}),i.bind("click",function(){return r.append('<input type="hidden" name="item[edit_range]" value="all" />').submit()}),(n=$('<div class="gws-schedule-repeat-submit"></div>')).append(t).append(s).append(e).append(s).append(i),$(".send .save, .send .delete").click(function(){if(""!==$("#item_repeat_type").val())return $.colorbox({inline:!0,href:n}),!1})},t}(),this.Gws_Memo_Message=function(){function t(){}return t.render=function(){$(".list-head .search").on("click",function(){$(".gws-memo-search").animate({height:"toggle"},"fast")}),$(".gws-memo-search .reset").on("click",function(){$(".gws-memo-search input[type=text]").val(""),$(".gws-memo-search .search").click()}),$(".cc-bcc-label").click(function(){return $(".gws-addon-memo-member .cc-bcc").animate({height:"toggle"},"fast"),!1}),$(".add-template").change(function(){""!==$(this).val()&&("html"===$("#item_format").val()?CKEDITOR.instances.item_html.insertText($(this).val()):Webmail_Mail_Form.insertText($("#item_text"),$(this).val()),$(this).val(""))}),$(".send-mdn,.ignore-mdn").on("click",function(){if($(this).hasClass("disabled"))return!1;$.ajax({url:$(this).attr("href"),method:"POST",dataType:"json",data:{_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){return $(".send-mdn,.ignore-mdn").addClass("disabled")},success:function(t){return SS.notice(t.notice),$(".request-mdn-notice").remove()}})})},t.buildForm=function(t,e){var i=$(".list-item input:checkbox:checked").map(function(){return $(this).val()});if(0===i.length)return!1;var n,r,s=$('meta[name="csrf-token"]').attr("content"),o=$("<form/>",{action:t,method:"post",data:{confirm:e}});for(o.append($("<input/>",{name:"authenticity_token",value:s,type:"hidden"})),n=0,r=i.length;n<r;n++){var a=i[n];o.append($("<input/>",{name:"ids[]",value:a,type:"hidden"}))}return o},t}(),Gws_Memo_Folder.render=function(){return $("#addon-gws-agents-addons-group_permission").hide()},Gws_Memo_Filter.render=function(){return $("#addon-gws-agents-addons-group_permission").hide()},this.Gws_Monitor_Topic=function(){function t(){}return t.render=function(){return $(".public").on("click",function(){var t,e,i,n,r;return r=$('meta[name="csrf-token"]').attr("content"),e=(t=$(this)).data("ss-action"),i=t.data("ss-confirm"),(n=$("<form/>",{action:e,method:"post",data:{confirm:i}})).append($("<input/>",{name:"authenticity_token",value:r,type:"hidden"})),n.appendTo(document.body).submit()}),$(".preparation").on("click",function(){var t,e,i,n,r;return r=$('meta[name="csrf-token"]').attr("content"),e=(t=$(this)).data("ss-action"),i=t.data("ss-confirm"),(n=$("<form/>",{action:e,method:"post",data:{confirm:i}})).append($("<input/>",{name:"authenticity_token",value:r,type:"hidden"})),n.appendTo(document.body).submit()}),$(".question_not_applicable").on("click",function(){var t,e,i;return i=$('meta[name="csrf-token"]').attr("content"),e=$("#item_id").val(),(t=$("<form/>",{action:e+"/question_not_applicable",method:"post",data:{confirm:"\u8a72\u5f53\u306a\u3057\u306b\u3057\u307e\u3059\u304b\uff1f"}})).append($("<input/>",{name:"authenticity_token",value:i,type:"hidden"})),t.appendTo(document.body).submit()}),$(".answered").on("click",function(){var t,e,i;return i=$(
'meta[name="csrf-token"]').attr("content"),e=$("#item_id").val(),(t=$("<form/>",{action:e+"/answered",method:"post",data:{confirm:"\u56de\u7b54\u6e08\u307f\u306b\u3057\u307e\u3059\u304b\uff1f"}})).append($("<input/>",{name:"authenticity_token",value:i,type:"hidden"})),t.appendTo(document.body).submit()})},t.buildForm=function(t,e){var i,n,r,s,o,a;if(0===(i=$(".list-item input:checkbox:checked").map(function(){return $(this).val()})).length)return!1;for(a=$('meta[name="csrf-token"]').attr("content"),(n=$("<form/>",{action:t,method:"post",data:{confirm:e}})).append($("<input/>",{name:"authenticity_token",value:a,type:"hidden"})),r=0,o=i.length;r<o;r++)s=i[r],n.append($("<input/>",{name:"ids[]",value:s,type:"hidden"}));return n},t.renderForm=function(t){return null==t&&(t={}),$("input.date").datetimepicker({lang:"ja",timepicker:!1,format:"Y/m/d",closeOnDateSelect:!0,scrollInput:!1,maxDate:t.maxDate}),$("input.datetime").datetimepicker({lang:"ja",roundTime:"ceil",step:30,maxDate:t.maxDate})},t}(),Gws_Portal.prototype.addItems=function(t){var i=this;$.each(t,function(t,e){i.addItem(e)})},Gws_Portal.prototype.addItem=function(t){var e=t._id.$oid;li=this.gs.add_widget('<li class="portlet-item" data-id="'+e+'"></li>',t.grid_data.size_x,t.grid_data.size_y,t.grid_data.col,t.grid_data.row),li.data("id",e);var i=this.el.find(".portlet-html[data-id='"+e+"']");if(i.length){i.height();i.prependTo(li)}},Gws_Portal.prototype.autoResizeItem=function(t,e){var i=this.gs.options.widget_base_dimensions[1],n=i/2<e%i?1:0,r=t.data("sizex"),s=Math.floor(e/i)+n;t.data("sizey")<s&&this.gs.resize_widget(t,r,s)},Gws_Portal.prototype.setSerializeEvent=function(t){var e=this;e.updateUrl=$(t).data("href"),$(t).click(function(){e.serialize()})},Gws_Portal.prototype.setResetEvent=function(t){var i=this;$(t).click(function(){var t=[];i.el.find(".portlet-item").each(function(){t.push($(this).clone())}),i.gs.remove_all_widgets(),$.each(t,function(t,e){i.gs.add_widget(e,e.data("sizex"),e.data("sizey"))})})},Gws_Portal.prototype.serialize=function(){var i=this,n={};i.el.find("li.portlet-item").each(function(){var t=$(this),e=t.data("id");n[e]=i.gs.serialize(t)[0]}),$.ajax({url:i.updateUrl,method:"POST",dataType:"json",data:{_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content"),json:JSON.stringify(n)},success:function(t){SS.notice(t.message)}})},Gws_Elasticsearch_Highlighter=function(){},Gws_Elasticsearch_Highlighter.prototype={render:function(){location.hash&&$(location.hash).css("border","1px solid red")}},this.Gws_Discussion_Thread=function(){function t(){}return t.render=function(l){var o=function(t,e,i){var n=$("<span></span>"),r=$('<img src="/assets/img/gws/ic-file.png" alt="" />'),s=$('<a target="_blank"></a>'),o=$('<input type="hidden" name="item[file_ids][]" class="file-id" />'),a=$('<i class="material-icons md-18 md-inactive deselect">close</i>');n.attr("data-file-id",e),n.attr("id","file-"+e),s.text(i),s.attr("href","/.u"+l+"/apis/temp_files/"+e+"/view"),o.attr("value",e),a.on("click",function(){return $(this).parent("span").remove(),$(t).find("[data-file-id]").length<=0&&$(t).hide(),!1}),n.append(r),n.append(s),n.append(a),n.append(o),$(t).show(),$(t).append(n)};$("a.ajax-box").data("on-select",function(t){var e,i,n;return n=$.colorbox.element().closest(".comment-files").find(".selected-files"),e=t.data("id"),i=t.data("humanized-name"),o(n,e,i),$.colorbox.close()});var t={select:function(t,s){return $(t).each(function(t,e){var i,n,r;return r=$(s).closest(".comment-files").find(".selected-files"),i=e._id,n=e.name,o(r,i,n)}),!1}};new SS_Addon_TempFile($(".comment-files .upload-drop-area"),l,t),$(".open-reply").on("click",function(){return $(this).closest(".addon-body").next(".reply").show(),$(this).remove(),!1}),$(".reply[data-topic]").each(function(){var t=$(this).attr("data-topic"),e=function(){return $(".discussion-contributor"+t+" input#item_contributor_model").val($(this).data("model")),$(".discussion-contributor"+t+" input#item_contributor_id").val($(this).data("id")),$(".discussion-contributor"+t+" input#item_contributor_name").val($(this).data("name"))};return $(this).find(".discussion-contributor"+t+' input[name="tmp[contributor]"]').on("change",e),$(this).find(".discussion-contributor"+t+' input[name="tmp[contributor]"]:checked').each(e)})},t}(),this.Gws_Discussion_Unseen=function(){function e(){}return e.url=null,e.intervalID=null,e.intervalTime=null,e.timestamp=null,e.renderUnseen=function(t,e,i){if(this.url=t,this.intervalTime=e,this.timestamp=i,this.url&&this.intervalTime&&this.timestamp)return this.intervalID=setInterval(this.checkMessage,this.intervalTime)},e.checkMessage=function(){return $.ajax({url:e.url,success:function(t){if(parseInt(t)>e.timestamp)return $(".gws-discussion-unseen").show(),clearInterval(e.intervalID)}})},e}(),Gws_Attendance=function(t,e){this.el=t,this.$el=$(t),this.$toolbar=this.$el.find(".cell-toolbar"),this.options=e,this.now=new Date(e.now),this.render()},Gws_Attendance.prototype.render=function(){var n=this;this.$el.find("button[name=punch]").on("click",function(t){t.preventDefault(),t.stopPropagation();var e=$(this).data("action"),i=$(this).data("confirm");n.onPunchClicked(e,i)}),this.$el.find("button[name=edit]").on("click",function(t){t.preventDefault(),t.stopPropagation();var e=$(this).data("action"),i=$(this).data("confirm");n.onEditClicked(e,i)}),this.$el.find(".reason-tooltip").on("click",function(t){t.preventDefault(),t.stopPropagation(),n.hideToolbar(),n.hideTooltip(),$(this).find(".reason").show()}),this.$el.find("select[name=year_month]").on("change",function(){var t=$(this).val();t&&(location.href=n.options.indexUrl.replace(":year_month",t))}),$(document).on("click",this.el+" .time-card .time",function(t){t.preventDefault(),t.stopPropagation(),n.onClickTime($(this))}),$(document).on("click",this.el+" .time-card .memo",function(t){t.preventDefault(),t.stopPropagation(),n.onClickMemo($(this))}),$(document).on("click",function(){n.hideToolbar(),n.hideTooltip()})},Gws_Attendance.prototype.onPunchClicked=function(t,e){if(t&&(!e||confirm(e))){var i=$('meta[name="csrf-token"]').attr("content");$form=$("<form/>",{action:t,method:"post"}),$form.append($("<input/>",{name:"authenticity_token",value:i,type:"hidden"})),$("body").append($form),$form.submit()}},Gws_Attendance.prototype.onEditClicked=function(t,e){t&&(e&&!confirm(e)||($a=$("<a />",{href:t}),$a.colorbox({open:!0,width:"90%"})))},Gws_Attendance.prototype.hideToolbar=function(){this.$toolbar.hide()},Gws_Attendance.prototype.hideTooltip=function(){this.$el.find(".reason-tooltip .reason").hide()},Gws_Attendance.prototype.onClickTime=function(t){this.onClickCell(t,this.options.timeUrl)},Gws_Attendance.prototype.onClickMemo=function(t){this.onClickCell(t,this.options.memoUrl)},Gws_Attendance.prototype.setFocus=function(t){this.$el.find(".time-card .time").removeClass("focus"),this.$el.find(".time-card .memo").removeClass("focus"),t.addClass("focus")},Gws_Attendance.prototype.isCellToday=function(t){return t.closest("tr").hasClass("current")},Gws_Attendance.prototype.onClickCell=function(t,e){if(this.hideTooltip(),t.data("day"))if(this.setFocus(t),this.options.editable||this.isCellToday(t)){var i=e;i=(i=i.replace(":day",t.data("day"))).replace(":type",t.data("type")),this.$toolbar.find(".edit").attr("href",i),this.options.editable||this.isCellToday(t)?this.$toolbar.find(".edit").show():this.$toolbar.find(".edit").hide();var n=t.offset();t.hasClass("top")?n.top-=this.$toolbar.outerHeight():n.top+=t.outerHeight(),this.$toolbar.show(),this.$toolbar.offset(n)}else this.$toolbar.hide()},Gws_Attendance_Portlet=function(t,e){this.$el=$(t),this.options=e,this.render()},Gws_Attendance_Portlet.prototype.render=function(){var t=this;this.$el.find("button[name=punch]").on("click",function(){t.punch($(this),$(this).closest("tr").data("field-name"))}),this.$el.find("button[name=edit]").on("click",function(){t.edit($(this),$(this).closest("tr").data("field-name"))})},Gws_Attendance_Portlet.prototype.punch=function(t,e){if(t.attr("disabled","disabled"),confirm(this.options.confirmMessage)){var i=this.options.punchUrl.replace(":TYPE",e),n=this;$.ajax({url:i,method:"POST",data:{ref:this.options.ref},dataType:"json",success:function(){alert(n.options.successMessage),location.reload()},error:function(t){alert(t.responseJSON.join("\n"))},complete:function(){t.removeAttr("disabled")}})}else t.removeAttr("disabled")},Gws_Attendance_Portlet.prototype.edit=function(t,e){t.attr("disabled","disabled");var i=this.options.editUrl.replace(":TYPE",e);$a=$("<a/>",{href:i}),$a.colorbox({open:!0})},this.Gws_Presence_User=function(){function d(){}return d.render=function(){$(document).on("click",function(){return $(".presence-state-selector").hide(),!0}),$(".presence-state-selector").on("click",function(){return!1}),$(".presence-state-selector [data-value]").on("click",function(){var e=$(this).closest(".presence-state-selector").attr("data-id"),t=$(this).closest(".presence-state-selector").attr("data-url"),i=$(this).attr("data-value");return $.ajax({url:t,type:"POST",data:{_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content"),presence_state:i},success:function(t){d.changedState(e,t),$(".presence-state-selector").hide()},error:function(t){alert(t.responseJSON.join("\n"))}}),!1}),$(".editable .select-presence-state,.editable .presence-state").on("click",function(){return $(".presence-state-selector").closest("li.portlet-item").css("z-index",0),$(".presence-state-selector").hide(),$(this).closest("li.portlet-item").css("z-index",1e3),$(this).closest("td").find(".presence-state-selector").show(),!1}),$(".ajax-text-field").on("click",function(){return d.toggleForm(this),!1}),$(".ajax-text-field").next(".editicon").on("click",function(){return $(this).prev(".ajax-text-field").trigger("click"),!1})},d.changedState=function(t,e){var i=e.presence_state||"",n=e.presence_state_label,r=e.presence_state_style,s=$("tr[data-id="+t+"] .presence-state"),o=$("tr[data-id="+t+"] .presence-state-selector");s.removeClass(),s.addClass("presence-state"),s.addClass(r),s.text(n),o.find('[data-value="'+i+'"] .selected-icon').css("visibility","visible"),o.find('[data-value!="'+i+'"] .selected-icon').css("visibility","hidden")},d.toggleForm=function(t){var e=$(t).attr("data-tag-state"),i=$(t).attr("data-original-tag"),n=$(t).attr("data-form-tag"),r=$(t).text()||$(t).val(),s=$(n).attr("name"),o=($(n).attr("data-id"),$(n).attr("data-url")),a=!1;if("original"==e){(n=$(n)).attr("data-original-tag",$(t).attr("data-original-tag")),n.attr("data-form-tag",$(t).attr("data-form-tag")),n.val(r),n.focusout(function(){if(a)return!0;var t={_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content")};return t[s]=$(n).val(),$.ajax({url:o,type:"POST",data:t,success:function(t){$(n).val(t[s]),d.toggleForm(n)},error:function(t){alert(t.responseJSON.join("\n")),a=!0}}),!1}),n.keypress(function(t){if(13==t.which){var e={_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content")};return e[s]=$(n).val(),$.ajax({url:o,type:"POST",data:e,success:function(t){$(n).val(t[s]),d.toggleForm(n)},error:function(t){alert(t.responseJSON.join("\n")),a=!0}}),!1}});var l=n.uniqueId();$(t).replaceWith(n),$(l).focus()}else(i=$(i).text(r)).attr("data-original-tag",$(t).attr("data-original-tag")),i.attr("data-form-tag",$(t).attr("data-form-tag")),i.on("click",function(){return d.toggleForm(this),!1}),i.uniqueId(),$(t).replaceWith(i),$(".ajax-text-field[data-id='"+i.attr("data-id")+"'][data-name='"+i.attr("data-name")+"']").text(r)},d}(),this.Gws_Presence_User_Reload=function(){function t(){}return t.render=function(t){null==t&&(t={});var e=t.url,i=t.paginate_params,n=t.page;$(".group-users .reload").on("click",function(){param=$.param({s:{keyword:$(".group-users [name='s[keyword]']").val()},paginate_params:i,page:n}),$.ajax({url:e+"?"+param,beforeSend:function(){$(".group-users .data-table-wrap").html(SS.loading)},success:function(t){$(".group-users .data-table-wrap").html(t);var e=$(".group-users .data-table-wrap").find("time");$(".group-users .list-head time").replaceWith(e).show(),e.show()}})}),$(".group-users .list-head .search").on("submit",function(){return param=$.param({s:{keyword:$(".group-users [name='s[keyword]']").val()},paginate_params:i}),$.ajax({url:e+"?"+param,beforeSend:function(){$(".group-users .data-table-wrap").html(SS.loading)},success:function(t){$(".group-users .data-table-wrap").html(t);var e=$(".group-users .data-table-wrap").find("time");$(".group-users .list-head time").replaceWith(e),e.show()},error:function(){$(".group-users .data-table-wrap").html("")}}),!1})},t}(),$(function(){$("a[href^=http]").not('[href*="'+location.hostname+'"]').attr({target:"_blank"});var e=location.pathname+"/";$(".gws-schedule-tabs a").each(function(){var t=$(this);e.match(new RegExp("^"+t.attr("href")+"(/|$)"))&&t.addClass("current")}),Gws_Member.render()});